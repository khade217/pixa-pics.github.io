(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{1038:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(630);t.assertParams=function(e,t,r){var o,a=e.length,s=t.length;for(n.assert(e.length===t.length,"Error in concat"+a+"D: rank of x1 ("+a+") and x2 ("+s+") must be the same."),n.assert(r>=0&&r<a,"Error in concat"+a+"D: axis must be between 0 and "+(a-1)+"."),o=0;o<a;o++)n.assert(o===r||e[o]===t[o],"Error in concat"+a+"D: Shape ("+e+") does not match ("+t+") along the non-concatenated axis "+o+".")},t.computeOutShape1D=function(e,t){n.assert(1===e.length&&1===t.length,"x1 and x2 should be 1d array.");var r=e.slice();return r[0]+=t[0],r},t.computeOutShape=function(e,t,r){n.assert(e.length===t.length,"x1 and x2 should have the same rank.");var o=e.slice();return o[r]+=t[r],o},t.computeGradientSliceShapes=function(e,t){return{aBegin:[0,0],aSize:e,bBegin:[0,e[1]],bSize:t}}},1039:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SELU_SCALEALPHA=1.7580993408473768,t.SELU_SCALE=1.0507009873554805},1040:function(e,t,r){"use strict";var n,o,a,s,i,u=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),n=r(632),o=r(679),a=r(656),s=function(e){function t(t,r,n){void 0===n&&(n=1e-8);var s=e.call(this)||this;return s.accumulatedGrads={},s.accumulatedUpdates={},s.c=o.keep(a.scalar(-t)),s.epsilon=o.keep(a.scalar(n)),s.rho=o.keep(a.scalar(r)),s.oneMinusRho=o.keep(a.scalar(1-r)),s}return u(t,e),t.prototype.applyGradients=function(e){var t,r=this,s=function(t){var s,u,c,l=n.ENV.engine.registeredVariables[t];null==i.accumulatedGrads[t]&&o.tidy((function(){r.accumulatedGrads[t]=a.zerosLike(l).variable(!1)})),null==i.accumulatedUpdates[t]&&o.tidy((function(){r.accumulatedUpdates[t]=a.zerosLike(l).variable(!1)})),s=e[t],u=i.accumulatedGrads[t],c=i.accumulatedUpdates[t],o.tidy((function(){var e,n=r.rho.mul(u).add(r.oneMinusRho.mul(s.square())),o=c.add(r.epsilon).sqrt().div(u.add(r.epsilon).sqrt()).mul(s),a=r.rho.mul(c).add(r.oneMinusRho.mul(o.square()));r.accumulatedGrads[t].assign(n),r.accumulatedUpdates[t].assign(a),e=r.c.mul(o).add(l),l.assign(e)}))},i=this;for(t in e)s(t)},t.prototype.dispose=function(){var e=this;this.c.dispose(),this.epsilon.dispose(),this.rho.dispose(),this.oneMinusRho.dispose(),null!=this.accumulatedUpdates&&(Object.keys(this.accumulatedUpdates).forEach((function(t){return e.accumulatedUpdates[t].dispose()})),Object.keys(this.accumulatedGrads).forEach((function(t){return e.accumulatedGrads[t].dispose()})))},t}(r(757).Optimizer),t.AdadeltaOptimizer=s},1041:function(e,t,r){"use strict";var n,o,a,s,i,u=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),n=r(632),o=r(679),a=r(656),s=function(e){function t(t,r){void 0===r&&(r=.1);var n=e.call(this)||this;return n.learningRate=t,n.initialAccumulatorValue=r,n.accumulatedGrads={},n.c=o.keep(a.scalar(-t)),n.epsilon=o.keep(a.scalar(1e-8)),n}return u(t,e),t.prototype.applyGradients=function(e){var t,r=this,s=function(t){var s,u,c=n.ENV.engine.registeredVariables[t];null==i.accumulatedGrads[t]&&o.tidy((function(){r.accumulatedGrads[t]=a.fill(c.shape,r.initialAccumulatorValue).variable(!1)})),s=e[t],u=i.accumulatedGrads[t],o.tidy((function(){var e,n=u.add(s.square());r.accumulatedGrads[t].assign(n),e=r.c.mul(s.div(n.add(r.epsilon).sqrt())).add(c),c.assign(e)}))},i=this;for(t in e)s(t)},t.prototype.dispose=function(){var e=this;this.epsilon.dispose(),this.c.dispose(),null!=this.accumulatedGrads&&Object.keys(this.accumulatedGrads).forEach((function(t){return e.accumulatedGrads[t].dispose()}))},t}(r(757).Optimizer),t.AdagradOptimizer=s},1042:function(e,t,r){"use strict";var n,o,a,s,i,u=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),n=r(632),o=r(679),a=r(656),s=function(e){function t(t,r,n,s){void 0===s&&(s=1e-8);var i=e.call(this)||this;return i.learningRate=t,i.accumulatedFirstMoment={},i.accumulatedSecondMoment={},i.c=o.keep(a.scalar(-t)),i.eps=o.keep(a.scalar(s)),i.beta1=o.keep(a.scalar(r)),i.beta2=o.keep(a.scalar(n)),o.tidy((function(){i.accBeta1=a.scalar(r).variable(),i.accBeta2=a.scalar(n).variable()})),i.oneMinusBeta1=o.keep(a.scalar(1-r)),i.oneMinusBeta2=o.keep(a.scalar(1-n)),i.one=o.keep(a.scalar(1)),i}return u(t,e),t.prototype.applyGradients=function(e){var t=this;o.tidy((function(){var r,o,s,i,u,c,l,p,d,h,f,m=t.one.sub(t.accBeta1),g=t.one.sub(t.accBeta2);for(r in e)o=n.ENV.engine.registeredVariables[r],null==t.accumulatedFirstMoment[r]&&(s=!1,t.accumulatedFirstMoment[r]=a.zerosLike(o).variable(s)),null==t.accumulatedSecondMoment[r]&&(s=!1,t.accumulatedSecondMoment[r]=a.zerosLike(o).variable(s)),i=e[r],u=t.accumulatedFirstMoment[r],c=t.accumulatedSecondMoment[r],l=t.beta1.mul(u).add(t.oneMinusBeta1.mul(i)),p=t.beta2.mul(c).add(t.oneMinusBeta2.mul(i.square())),d=l.div(m),h=p.div(g),t.accumulatedFirstMoment[r].assign(l),t.accumulatedSecondMoment[r].assign(p),f=t.c.mul(d.div(t.eps.add(h.sqrt()))).add(o),o.assign(f);t.accBeta1.assign(t.accBeta1.mul(t.beta1)),t.accBeta2.assign(t.accBeta2.mul(t.beta2))}))},t.prototype.dispose=function(){var e=this;this.c.dispose(),this.eps.dispose(),this.beta1.dispose(),this.beta2.dispose(),this.accBeta1.dispose(),this.accBeta2.dispose(),this.oneMinusBeta1.dispose(),this.oneMinusBeta2.dispose(),this.one.dispose(),null!=this.accumulatedFirstMoment&&Object.keys(this.accumulatedFirstMoment).forEach((function(t){return e.accumulatedFirstMoment[t].dispose()})),null!=this.accumulatedSecondMoment&&Object.keys(this.accumulatedSecondMoment).forEach((function(t){return e.accumulatedSecondMoment[t].dispose()}))},t}(r(757).Optimizer),t.AdamOptimizer=s},1043:function(e,t,r){"use strict";var n,o,a,s,i,u=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),n=r(632),o=r(679),a=r(656),s=function(e){function t(t,r,n,s,i){void 0===s&&(s=1e-8),void 0===i&&(i=0);var u=e.call(this)||this;return u.learningRate=t,u.accumulatedFirstMoment={},u.accumulatedWeightedInfNorm={},u.c=o.keep(a.scalar(-t)),u.eps=o.keep(a.scalar(s)),u.beta1=o.keep(a.scalar(r)),u.beta2=o.keep(a.scalar(n)),u.decay=o.keep(a.scalar(i)),o.tidy((function(){u.iteration=a.scalar(0).variable(),u.accBeta1=a.scalar(r).variable()})),u.oneMinusBeta1=o.keep(a.scalar(1-r)),u.one=o.keep(a.scalar(1)),u}return u(t,e),t.prototype.applyGradients=function(e){var t=this;o.tidy((function(){var r,o,s,i,u,c,l,p,d,h,f,m=t.one.sub(t.accBeta1),g=t.c.div(t.one.add(t.decay.mul(t.iteration)));for(r in e)o=n.ENV.engine.registeredVariables[r],null==t.accumulatedFirstMoment[r]&&(s=!1,t.accumulatedFirstMoment[r]=a.zerosLike(o).variable(s)),null==t.accumulatedWeightedInfNorm[r]&&(s=!1,t.accumulatedWeightedInfNorm[r]=a.zerosLike(o).variable(s)),i=e[r],u=t.accumulatedFirstMoment[r],c=t.accumulatedWeightedInfNorm[r],l=t.beta1.mul(u).add(t.oneMinusBeta1.mul(i)),p=t.beta2.mul(c),d=i.abs(),h=p.maximum(d),t.accumulatedFirstMoment[r].assign(l),t.accumulatedWeightedInfNorm[r].assign(h),f=g.div(m).mul(l.div(t.eps.add(h))).add(o),o.assign(f);t.iteration.assign(t.iteration.add(t.one)),t.accBeta1.assign(t.accBeta1.mul(t.beta1))}))},t.prototype.dispose=function(){var e=this;this.c.dispose(),this.eps.dispose(),this.accBeta1.dispose(),this.beta1.dispose(),this.beta2.dispose(),this.oneMinusBeta1.dispose(),this.decay.dispose(),this.iteration.dispose(),this.one.dispose(),null!=this.accumulatedFirstMoment&&Object.keys(this.accumulatedFirstMoment).forEach((function(t){return e.accumulatedFirstMoment[t].dispose()})),null!=this.accumulatedWeightedInfNorm&&Object.keys(this.accumulatedWeightedInfNorm).forEach((function(t){return e.accumulatedWeightedInfNorm[t].dispose()}))},t}(r(757).Optimizer),t.AdamaxOptimizer=s},1044:function(e,t,r){"use strict";var n,o,a,s,i,u=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),n=r(632),o=r(679),a=r(656),s=function(e){function t(t,r,n){void 0===n&&(n=!1);var o=e.call(this,t)||this;return o.learningRate=t,o.momentum=r,o.useNesterov=n,o.m=a.scalar(o.momentum),o.accumulations={},o}return u(t,e),t.prototype.applyGradients=function(e){var t,r=this,s=function(t){var s,u,c=n.ENV.engine.registeredVariables[t];null==i.accumulations[t]&&o.tidy((function(){r.accumulations[t]=a.zerosLike(c).variable(!1)})),s=i.accumulations[t],u=e[t],o.tidy((function(){var e,n=r.m.mul(s).add(u);e=r.useNesterov?r.c.mul(u.add(n.mul(r.m))).add(c):r.c.mul(n).add(c),r.accumulations[t].assign(n),c.assign(e)}))},i=this;for(t in e)s(t)},t.prototype.dispose=function(){if(e.prototype.dispose.call(this),this.m.dispose(),null!=this.accumulations)for(var t in this.accumulations)this.accumulations[t].dispose()},t.prototype.setMomentum=function(e){this.momentum=e},t}(r(901).SGDOptimizer),t.MomentumOptimizer=s},1045:function(e,t,r){"use strict";var n,o,a,s,i,u=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),n=r(632),o=r(679),a=r(656),s=function(e){function t(t,r,n,s,i){void 0===r&&(r=.9),void 0===n&&(n=0),void 0===s&&(s=1e-8),void 0===i&&(i=!1);var u=e.call(this)||this;return u.learningRate=t,u.accumulatedMeanSquares={},u.accumulatedMeanGrads={},u.accumulatedMoments={},u.c=o.keep(a.scalar(t)),u.epsilon=o.keep(a.scalar(s)),u.decay=o.keep(a.scalar(r)),u.momentum=o.keep(a.scalar(n)),u.oneMinusDecay=o.keep(a.scalar(1-r)),u.centered=i,u}return u(t,e),t.prototype.applyGradients=function(e){var t,r=this,s=function(t){var s,u,c,l,p=n.ENV.engine.registeredVariables[t];null==i.accumulatedMeanSquares[t]&&o.tidy((function(){r.accumulatedMeanSquares[t]=a.zerosLike(p).variable(!1)})),null==i.accumulatedMeanGrads[t]&&i.centered&&o.tidy((function(){r.accumulatedMeanGrads[t]=a.zerosLike(p).variable(!1)})),null==i.accumulatedMoments[t]&&o.tidy((function(){r.accumulatedMoments[t]=a.zerosLike(p).variable(!1)})),s=i.accumulatedMeanSquares[t],u=i.accumulatedMeanGrads[t],c=i.accumulatedMoments[t],l=e[t],o.tidy((function(){var e,n,o,a,i=r.decay.mul(s).add(r.oneMinusDecay.mul(l.square()));r.centered?(e=r.decay.mul(u).add(r.oneMinusDecay.mul(l)),n=r.momentum.mul(c).add(r.c.mul(l).div(i.sub(e.square().add(r.epsilon)).sqrt())),r.accumulatedMeanSquares[t].assign(i),r.accumulatedMeanGrads[t].assign(e),r.accumulatedMoments[t].assign(n),o=p.sub(n),p.assign(o)):(a=r.decay.mul(s).add(r.oneMinusDecay.mul(l.square())),n=r.momentum.mul(c).add(r.c.mul(l).div(a.add(r.epsilon).sqrt())),r.accumulatedMeanSquares[t].assign(a),r.accumulatedMoments[t].assign(n),o=p.sub(n),p.assign(o))}))},i=this;for(t in e)s(t)},t.prototype.dispose=function(){var e=this;this.c.dispose(),this.epsilon.dispose(),this.decay.dispose(),this.momentum.dispose(),this.oneMinusDecay.dispose(),null!=this.accumulatedMeanSquares&&Object.keys(this.accumulatedMeanSquares).forEach((function(t){return e.accumulatedMeanSquares[t].dispose()})),null!=this.accumulatedMeanGrads&&this.centered&&Object.keys(this.accumulatedMeanGrads).forEach((function(t){return e.accumulatedMeanGrads[t].dispose()})),null!=this.accumulatedMoments&&Object.keys(this.accumulatedMoments).forEach((function(t){return e.accumulatedMoments[t].dispose()}))},t}(r(757).Optimizer),t.RMSPropOptimizer=s},1254:function(e,t,r){"use strict";function n(e,t){return a.rightPad(parseFloat(e.toFixed(u)).toString(),t)}function o(e,t,r,a,u){var c,l,p,d,h,f,m,g,y,b,v,O,k;if(void 0===u&&(u=!0),c=t[0],0===(l=t.length))return[e[0].toString()];if(1===l)return c>s?(p=Array.from(e.subarray(0,i)),d=Array.from(e.subarray(c-i,c)),["["+p.map((function(e,t){return n(e,a[t])})).join(", ")+", ..., "+d.map((function(e,t){return n(e,a[c-i+t])})).join(", ")+"]"]):["["+Array.from(e).map((function(e,t){return n(e,a[t])})).join(", ")+"]"];if(h=t.slice(1),f=r.slice(1),m=r[0],g=[],c>s){for(y=0;y<i;y++)v=(b=y*m)+m,g.push.apply(g,o(e.subarray(b,v),h,f,a,!1));for(g.push("..."),y=c-i;y<c;y++)v=(b=y*m)+m,g.push.apply(g,o(e.subarray(b,v),h,f,a,y===c-1))}else for(y=0;y<c;y++)v=(b=y*m)+m,g.push.apply(g,o(e.subarray(b,v),h,f,a,y===c-1));for(O=2===l?",":"",g[0]="["+g[0]+O,y=1;y<g.length-1;y++)g[y]=" "+g[y]+O;for(k=",\n",y=2;y<l;y++)k+="\n";return g[g.length-1]=" "+g[g.length-1]+"]"+(u?"":k),g}var a,s,i,u;Object.defineProperty(t,"__esModule",{value:!0}),a=r(630),s=20,i=3,u=7,t.tensorToString=function(e,t){var r=e.dataSync(),a=function(e){var t,r,o,a=e.dataSync(),s=e.size,i=e.strides[e.strides.length-1],u=Array(i).fill(0);if(e.rank>1)for(t=0;t<s/i;t++)for(r=t*i,o=0;o<i;o++)u[o]=Math.max(u[o],n(a[r+o],0).length);return u}(e),s=o(r,e.shape,e.strides,a),i=["Tensor"];return t&&(i.push("  dtype: "+e.dtype),i.push("  rank: "+e.rank),i.push("  shape: ["+e.shape+"]"),i.push("  values:")),i.push(s.map((function(e){return"    "+e})).join("\n")),i.join("\n")}},1255:function(e,t,r){"use strict";function n(e,t,r){var n,o,i,c,l,p,d,h,f;return u.assertParams(e.shape,t.shape,r),n=u.computeOutShape(e.shape,t.shape,r),o=e.as2D(-1,s.sizeFromShape(e.shape.slice(r))),i=t.as2D(-1,s.sizeFromShape(t.shape.slice(r))),c=u.computeGradientSliceShapes(o.shape,i.shape),l=c.aBegin,p=c.aSize,d=c.bBegin,h=c.bSize,f=function(e){return{a:function(){return e.slice(l,p)},b:function(){return e.slice(d,h)}}},a.ENV.engine.runKernel((function(e){return e.concat(o,i)}),{a:o,b:i},f).reshape(n)}var o,a,s,i,u,c,l,p=this&&this.__decorate||function(e,t,r,n){var o,a,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(t,"__esModule",{value:!0}),o=r(638),a=r(632),s=r(630),i=r(713),u=r(1038),c=r(660),l=function(){function e(){}return e.concat1d=function(t){return e.concat(t,0)},e.concat2d=function(t,r){return e.concat(t,r)},e.concat3d=function(t,r){return e.concat(t,r)},e.concat4d=function(t,r){return e.concat(t,r)},e.concat=function(e,t){var r,o,a;if(void 0===t&&(t=0),s.assert(e.length>=1,"Pass at least one tensor to concat"),s.assertArgumentsAreTensors({tensors:e},"concat"),r=e[0],1===e.length)return r;for(o=i.parseAxisParam(t,r.shape),a=1;a<e.length;++a)r=n(r,e[a],o[0]);return r},p([o.doc({heading:"Tensors",subheading:"Slicing and Joining"}),c.operation],e,"concat",null),e}(),t.ConcatOps=l},1257:function(e,t,r){"use strict";var n,o,a,s,i,u,c,l,p=this&&this.__decorate||function(e,t,r,n){var o,a,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(t,"__esModule",{value:!0}),n=r(638),o=r(632),a=r(756),s=r(630),i=r(731),u=r(660),c=r(656),l=function(){function e(){}return e.add=function(e,t){var r,n;return s.assertArgumentsAreTensors({a:e,b:t},"add"),s.assertTypesMatch(e,t),r=i.assertAndGetBroadcastShape(e.shape,t.shape),n=function(n){return{a:function(){var t=n,o=i.getReductionAxes(e.shape,r);return o.length>0&&(t=t.sum(o)),t.reshape(e.shape)},b:function(){var e=n,o=i.getReductionAxes(t.shape,r);return o.length>0&&(e=e.sum(o)),e.reshape(t.shape)}}},o.ENV.engine.runKernel((function(r){return r.add(e,t)}),{a:e,b:t},n)},e.addStrict=function(e,t){return s.assertShapesMatch(e.shape,t.shape,"Error in addStrict: "),e.add(t)},e.sub=function(e,t){var r,n;return s.assertArgumentsAreTensors({a:e,b:t},"sub"),s.assertTypesMatch(e,t),r=i.assertAndGetBroadcastShape(e.shape,t.shape),n=function(n){return{a:function(){var t=n,o=i.getReductionAxes(e.shape,r);return o.length>0&&(t=t.sum(o)),t.reshape(e.shape)},b:function(){var e=n,o=i.getReductionAxes(t.shape,r);return o.length>0&&(e=e.sum(o)),e.neg().reshape(t.shape)}}},o.ENV.engine.runKernel((function(r){return r.subtract(e,t)}),{a:e,b:t},n)},e.subStrict=function(e,t){return s.assertShapesMatch(e.shape,t.shape,"Error in subStrict: "),e.sub(t)},e.pow=function(e,t){var r,n;return s.assertArgumentsAreTensors({base:e,exp:t},"pow"),r=i.assertAndGetBroadcastShape(e.shape,t.shape),e=e.cast(a.upcastType(e.dtype,t.dtype)),t=t.cast(a.upcastType(e.dtype,t.dtype)),n=function(n,o){var a=o[0];return{base:function(){var o=n.mul(t.toFloat().mul(a.div(e))),s=i.getReductionAxes(e.shape,r);return s.length>0&&(o=o.sum(s)),o.reshape(e.shape)},exp:function(){var o=n.mul(a.mul(e.log()).toFloat()),s=i.getReductionAxes(t.shape,r);return s.length>0&&(o=o.sum(s)),o.reshape(t.shape)}}},o.ENV.engine.runKernel((function(r,n){return n(r.pow(e,t))}),{base:e,exp:t},n)},e.powStrict=function(e,t){return s.assertShapesMatch(e.shape,t.shape,"Error in powStrict: "),e.pow(t)},e.mul=function(e,t){var r,n;return s.assertArgumentsAreTensors({a:e,b:t},"mul"),s.assertTypesMatch(e,t),r=i.assertAndGetBroadcastShape(e.shape,t.shape),n=function(n){return{a:function(){var o=n.mul(t.toFloat()),a=i.getReductionAxes(e.shape,r);return a.length>0?o.sum(a).reshape(e.shape):o},b:function(){var o=n.mul(e.toFloat()),a=i.getReductionAxes(t.shape,r);return a.length>0?o.sum(a).reshape(t.shape):o}}},o.ENV.engine.runKernel((function(r){return r.multiply(e,t)}),{a:e,b:t},n)},e.mulStrict=function(e,t){return s.assertShapesMatch(e.shape,t.shape,"Error in multiplyStrict: "),e.mul(t)},e.div=function(e,t){var r,n;return s.assertArgumentsAreTensors({a:e,b:t},"div"),s.assertTypesMatch(e,t),r=i.assertAndGetBroadcastShape(e.shape,t.shape),n=function(n){return{a:function(){var o=n.div(t.toFloat()),a=i.getReductionAxes(e.shape,r);return a.length>0?o.sum(a).reshape(e.shape):o},b:function(){var o,a=n.mul(e.toFloat()),s=i.getReductionAxes(t.shape,r);return s.length>0&&(a=a.sum(s).reshape(t.shape)),o=t.square(),a.div(o.toFloat()).neg()}}},o.ENV.engine.runKernel((function(r){return r.divide(e,t)}),{a:e,b:t},n)},e.divStrict=function(e,t){return s.assertShapesMatch(e.shape,t.shape,"Error in divideStrict: "),e.div(t)},e.mod=function(e,t){var r,n;return s.assertArgumentsAreTensors({a:e,b:t},"mod"),s.assertTypesMatch(e,t),r=i.assertAndGetBroadcastShape(e.shape,t.shape),n=function(n){return{a:function(){var t=i.getReductionAxes(e.shape,r);return t.length>0?n.sum(t).reshape(e.shape):n},b:function(){var o=n.mul(e.div(t).floor().neg()),a=i.getReductionAxes(t.shape,r);return a.length>0?o.sum(a).reshape(t.shape):o}}},o.ENV.engine.runKernel((function(r){return r.mod(e,t)}),{a:e,b:t},n)},e.modStrict=function(e,t){return s.assertShapesMatch(e.shape,t.shape,"Error in modStrict: "),e.mod(t)},e.minimum=function(e,t){return s.assertArgumentsAreTensors({a:e,b:t},"minimum"),s.assertTypesMatch(e,t),"bool"===e.dtype&&(e=e.toInt()),"bool"===t.dtype&&(t=t.toInt()),i.assertAndGetBroadcastShape(e.shape,t.shape),o.ENV.engine.runKernel((function(r){return r.minimum(e,t)}),{a:e,b:t},(function(r){return{a:function(){return r.mul(e.lessEqual(t).toFloat())},b:function(){return r.mul(e.greater(t).toFloat())}}}))},e.minimumStrict=function(e,t){return s.assertShapesMatch(e.shape,t.shape,"Error in minimumStrict: "),e.minimum(t)},e.maximum=function(e,t){return s.assertArgumentsAreTensors({a:e,b:t},"maximum"),s.assertTypesMatch(e,t),"bool"===e.dtype&&(e=e.toInt()),"bool"===t.dtype&&(t=t.toInt()),i.assertAndGetBroadcastShape(e.shape,t.shape),o.ENV.engine.runKernel((function(r){return r.maximum(e,t)}),{a:e,b:t},(function(r){return{a:function(){return r.mul(e.greaterEqual(t).toFloat())},b:function(){return r.mul(e.less(t).toFloat())}}}))},e.maximumStrict=function(e,t){return s.assertShapesMatch(e.shape,t.shape,"Error in minimumStrict: "),e.maximum(t)},e.squaredDifference=function(e,t){return s.assertArgumentsAreTensors({a:e,b:t},"squaredDifference"),s.assertTypesMatch(e,t),i.assertAndGetBroadcastShape(e.shape,t.shape),o.ENV.engine.runKernel((function(r){return r.squaredDifference(e,t)}),{a:e,b:t},(function(r){var n=c.scalar(2);return{a:function(){return r.mul(e.sub(t).mul(n))},b:function(){return r.mul(t.sub(e).mul(n))}}}))},e.squaredDifferenceStrict=function(e,t){return s.assertShapesMatch(e.shape,t.shape,"Error in squaredDifferenceStrict: "),e.squaredDifference(t)},e.atan2=function(t,r){var n,a;return s.assertArgumentsAreTensors({a:t,b:r},"atan2"),s.assertTypesMatch(t,r),n=i.assertAndGetBroadcastShape(t.shape,r.shape),a=function(o){return{a:function(){var a=e.add(c.square(t),c.square(r)),s=o.mul(r.div(a)),u=i.getReductionAxes(t.shape,n);return u.length>0&&(s=s.sum(u)),s.reshape(t.shape)},b:function(){var a=e.add(c.square(t),c.square(r)),s=c.neg(o.mul(t.div(a))),u=i.getReductionAxes(r.shape,n);return u.length>0&&(s=s.sum(u)),s.reshape(r.shape)}}},o.ENV.engine.runKernel((function(e){return e.atan2(t,r)}),{a:t,b:r},a)},p([n.doc({heading:"Operations",subheading:"Arithmetic"}),u.operation],e,"add",null),p([u.operation],e,"addStrict",null),p([n.doc({heading:"Operations",subheading:"Arithmetic"}),u.operation],e,"sub",null),p([u.operation],e,"subStrict",null),p([n.doc({heading:"Operations",subheading:"Arithmetic"}),u.operation],e,"pow",null),p([u.operation],e,"powStrict",null),p([n.doc({heading:"Operations",subheading:"Arithmetic"}),u.operation],e,"mul",null),p([u.operation],e,"mulStrict",null),p([n.doc({heading:"Operations",subheading:"Arithmetic"}),u.operation],e,"div",null),p([u.operation],e,"divStrict",null),p([n.doc({heading:"Operations",subheading:"Arithmetic"}),u.operation],e,"mod",null),p([u.operation],e,"modStrict",null),p([n.doc({heading:"Operations",subheading:"Arithmetic"}),u.operation],e,"minimum",null),p([u.operation],e,"minimumStrict",null),p([n.doc({heading:"Operations",subheading:"Arithmetic"}),u.operation],e,"maximum",null),p([u.operation],e,"maximumStrict",null),p([n.doc({heading:"Operations",subheading:"Arithmetic"}),u.operation],e,"squaredDifference",null),p([u.operation],e,"squaredDifferenceStrict",null),p([u.operation],e,"atan2",null),e}(),t.BinaryOps=l},1258:function(e,t,r){"use strict";function n(e,t,r,n,c,l,p,d){var h,f,m,g,y,b,v,O,k,A,x,E,w,S,T,D,M,N,_;if(void 0===p&&(p=!1),void 0===d&&(d="channelsLast"),h=-1,f=-1,m=-1,g=-1,"channelsLast"===d)h=e[0],f=e[1],m=e[2],g=e[3];else{if("channelsFirst"!==d)throw Error("Unknown dataFormat "+d);h=e[0],g=e[1],f=e[2],m=e[3]}return y=t[0],b=t[1],v=t[3],k=(O=a(r))[0],A=O[1],E=(x=a(n))[0],w=x[1],S=function(e,t,r,n,a,s,c,l){var p,d,h,f,m,g,y,b;if("number"==typeof e)p={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"},f=function(e,t,r,n,a,s){var c,l,p;return null==a&&(a=o(e,t,n)),c=e[1],l=i((e[0]-t+2*a)/n+1,s),u.assert(u.isInt(l),"The output # of rows ("+l+") must be an integer. Change the stride and/or zero pad parameters"),p=i((c-t+2*a)/n+1,s),u.assert(u.isInt(p),"The output # of columns ("+p+") must be an integer. Change the stride and/or zero pad parameters"),[l,p,1]}([t,r,1],s,0,n,e,l),d=f[0],h=f[1];else if("same"===e)d=Math.ceil(t/n),g=((h=Math.ceil(r/a))-1)*a+c-r,p={top:y=Math.floor((m=(d-1)*n+s-t)/2),bottom:m-y,left:b=Math.floor(g/2),right:g-b,type:"SAME"};else{if("valid"!==e)throw Error("Unknown padding parameter: "+e);p={top:0,bottom:0,left:0,right:0,type:"VALID"},d=Math.ceil((t-s+1)/n),h=Math.ceil((r-c+1)/a)}return{padInfo:p,outHeight:d,outWidth:h}}(c,f,m,k,A,s(y,E),s(b,w),l),T=S.padInfo,D=S.outHeight,M=S.outWidth,N=p?v*g:v,"channelsFirst"===d?_=[h,N,D,M]:"channelsLast"===d&&(_=[h,D,M,N]),{batchSize:h,dataFormat:d,inHeight:f,inWidth:m,inChannels:g,outHeight:D,outWidth:M,outChannels:N,padInfo:T,strideHeight:k,strideWidth:A,filterHeight:y,filterWidth:b,dilationHeight:E,dilationWidth:w,inShape:e,outShape:_,filterShape:t}}function o(e,t,r,n){void 0===n&&(n=1);var o=s(t,n);return Math.floor((e[0]*(r-1)-r+o)/2)}function a(e){return"number"==typeof e?[e,e]:e}function s(e,t){return t<=1?e:e+(e-1)*(t-1)}function i(e,t){if(!t)return e;switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw Error("Unknown roundingMode "+t)}}Object.defineProperty(t,"__esModule",{value:!0});var u=r(630);t.computePool2DInfo=function(e,t,r,o,s,i){var u,c,l,p;if(void 0===i&&(i="channelsLast"),c=(u=a(t))[0],l=u[1],"channelsLast"===i)p=[c,l,e[3],e[3]];else{if("channelsFirst"!==i)throw Error("Unknown dataFormat "+i);p=[c,l,e[1],e[1]]}return n(e,p,r,1,o,s,!1,i)},t.computeConv2DInfo=n,t.computeDefaultPad=o},1259:function(e,t,r){"use strict";var n,o,a,s,i,u,c=this&&this.__decorate||function(e,t,r,n){var o,a,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(t,"__esModule",{value:!0}),n=r(638),o=r(630),a=r(660),s=r(656),function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(i=t.Reduction||(t.Reduction={})),u=function(){function e(){}return e.computeWeightedLoss=function(e,t,r){var n,a;if(void 0===r&&(r=i.SUM_BY_NONZERO_WEIGHTS),o.assertArgumentsAreTensors({losses:e},"computeWeightedLoss"),null!=t&&o.assertArgumentsAreTensors({weights:t},"computeWeightedLoss"),n=null==t?e:e.mul(t),r===i.NONE)return n;if(r===i.SUM)return n.sum();if(r===i.MEAN)return null==t?n.mean():n.sum().div(t.sum());if(r===i.SUM_BY_NONZERO_WEIGHTS)return null==t?n.sum().div(s.scalar(e.size)):(a=t.notEqual(s.scalar(0)).sum().toFloat(),n.sum().div(a));throw Error("Unknown reduction: "+r)},e.absoluteDifference=function(t,r,n,a){void 0===a&&(a=i.SUM_BY_NONZERO_WEIGHTS),o.assertArgumentsAreTensors({labels:t,predictions:r},"absoluteDifference"),null!=n&&o.assertArgumentsAreTensors({weights:n},"absoluteDifference"),o.assertShapesMatch(t.shape,r.shape,"Error in absoluteDifference: ");var s=t.sub(r).abs();return e.computeWeightedLoss(s,n,a)},c([n.doc({heading:"Training",subheading:"Losses",namespace:"losses"}),a.operation],e,"computeWeightedLoss",null),c([n.doc({heading:"Training",subheading:"Losses",namespace:"losses"}),a.operation],e,"absoluteDifference",null),e}(),t.LossOps=u},1264:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ERF_P=.3275911,t.ERF_A1=.254829592,t.ERF_A2=-.284496736,t.ERF_A3=1.421413741,t.ERF_A4=-1.453152027,t.ERF_A5=1.061405429},2138:function(e,t,r){"use strict";var n,o;Object.defineProperty(t,"__esModule",{value:!0}),n=r(1256),o=function(){function e(e,t,r,o,a){this.mean=e,this.stdDev=t,this.dtype=r,this.nextVal=NaN,this.truncated=o,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var s=a||Math.random();this.random=n.alea(s.toString())}return e.prototype.nextValue=function(){var e,t,r,n,o,a,s,i;if(!isNaN(this.nextVal))return e=this.nextVal,this.nextVal=NaN,e;for(n=!1;!n;){o=void 0,a=void 0,s=void 0;do{s=(o=2*this.random()-1)*o+(a=2*this.random()-1)*a}while(s>=1||0===s);i=Math.sqrt(-2*Math.log(s)/s),t=this.mean+this.stdDev*o*i,r=this.mean+this.stdDev*a*i,this.truncated&&!this.isValidTruncated(t)||(n=!0)}return this.truncated&&!this.isValidTruncated(r)||(this.nextVal=this.convertValue(r)),this.convertValue(t)},e.prototype.convertValue=function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)},e.prototype.isValidTruncated=function(e){return e<=this.upper&&e>=this.lower},e}(),t.MPRandGauss=o},2147:function(e,t,r){"use strict";function n(e){return null==e?null:0===e.rank?e.as1D():1===e.rank?e:2===e.rank?e.as4D(1,1,e.shape[0],e.shape[1]):3===e.rank?e.as4D(1,e.shape[0],e.shape[1],e.shape[2]):e}var o,a,s,i,u,c,l,p,d=this&&this.__decorate||function(e,t,r,n){var o,a,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(t,"__esModule",{value:!0}),o=r(638),a=r(632),s=r(630),i=r(899),u=r(731),c=r(660),l=r(656),p=function(){function e(){}return e.batchNormalization2d=function(t,r,n,o,a,i){return void 0===o&&(o=.001),s.assert(2===t.rank,"Error in batchNormalization3D: x must be rank 3 but got rank "+t.rank+"."),s.assert(2===r.rank||1===r.rank,"Error in batchNormalization2D: mean must be rank 2 or rank 1 but got rank "+r.rank+"."),s.assert(2===n.rank||1===n.rank,"Error in batchNormalization2D: variance must be rank 2 or rank 1 but got rank "+n.rank+"."),null!=a&&s.assert(2===a.rank||1===a.rank,"Error in batchNormalization2D: scale must be rank 2 or rank 1 but got rank "+a.rank+"."),null!=i&&s.assert(2===i.rank||1===i.rank,"Error in batchNormalization2D: offset must be rank 2 or rank 1 but got rank "+i.rank+"."),e.batchNormalization(t,r,n,o,a,i)},e.batchNormalization3d=function(t,r,n,o,a,i){return void 0===o&&(o=.001),s.assert(3===t.rank,"Error in batchNormalization3D: x must be rank 3 but got rank "+t.rank+"."),s.assert(3===r.rank||1===r.rank,"Error in batchNormalization3D: mean must be rank 3 or rank 1 but got rank "+r.rank+"."),s.assert(3===n.rank||1===n.rank,"Error in batchNormalization3D: variance must be rank 3 or rank 1 but got rank "+n.rank+"."),null!=a&&s.assert(3===a.rank||1===a.rank,"Error in batchNormalization3D: scale must be rank 3 or rank 1 but got rank "+a.rank+"."),null!=i&&s.assert(3===i.rank||1===i.rank,"Error in batchNormalization3D: offset must be rank 3 or rank 1 but got rank "+i.rank+"."),e.batchNormalization(t,r,n,o,a,i)},e.batchNormalization4d=function(t,r,n,o,a,i){return void 0===o&&(o=.001),s.assert(4===t.rank,"Error in batchNormalization4D: x must be rank 4 but got rank "+t.rank+"."),s.assert(4===r.rank||1===r.rank,"Error in batchNormalization4D: mean must be rank 4 or rank 1 but got rank "+r.rank+"."),s.assert(4===n.rank||1===n.rank,"Error in batchNormalization4D: variance must be rank 4 or rank 1 but got rank "+n.rank+"."),null!=a&&s.assert(4===a.rank||1===a.rank,"Error in batchNormalization4D: scale must be rank 4 or rank 1 but got rank "+a.rank+"."),null!=i&&s.assert(4===i.rank||1===i.rank,"Error in batchNormalization4D: offset must be rank 4 or rank 1 but got rank "+i.rank+"."),e.batchNormalization(t,r,n,o,a,i)},e.batchNormalization=function(e,t,r,o,c,p){var d,h;return void 0===o&&(o=.001),s.assertArgumentsAreTensors({x:e,mean:t,variance:r},"batchNormalization"),null!=c&&s.assertArgumentsAreTensors({scale:c},"batchNormalization"),null!=p&&s.assertArgumentsAreTensors({offset:p},"batchNormalization"),s.assert(t.rank===r.rank,"Batch normalization gradient requires mean and variance to have equal ranks."),s.assert(null==p||t.rank===p.rank,"Batch normalization gradient requires mean and offset to have equal ranks."),s.assert(null==c||t.rank===c.rank,"Batch normalization gradient requires mean and scale to have equal ranks."),d=0===e.rank||1===e.rank?e.as4D(1,1,1,e.size):2===e.rank?e.as4D(1,1,e.shape[0],e.shape[1]):3===e.rank?e.as4D(1,e.shape[0],e.shape[1],e.shape[2]):e,h=function(n){var a,s,p,h,f,m=null==c?i.ArrayOps.scalar(1):c,g=u.getReductionAxes(t.shape,d.shape),y=[];if(1===t.rank){for(a=0;a<d.shape.length-1;++a)y.push(d.shape[a]);y.push(1)}return s=e.sub(t),p=n.mul(m),h=l.rsqrt(r.add(i.ArrayOps.scalar(o))),f=h.mul(h).mul(h).mul(i.ArrayOps.scalar(-.5)),{x:function(){return 1===t.rank?n.mul(i.ArrayOps.tile(h.as4D(1,1,1,t.shape[0]),y)).mul(m).reshape(e.shape):n.mul(h).mul(m).reshape(e.shape)},mean:function(){var e=h.mul(i.ArrayOps.scalar(-1)).mul(p);return 1===t.rank&&(e=e.sum(g)),e.reshape(t.shape)},variance:function(){var e=f.mul(s).mul(p);return 1===t.rank&&(e=e.sum(g)),e.reshape(t.shape)},scale:function(){var e=s.mul(h),r=n.mul(e);return 1===t.rank&&(r=r.sum(g)),r.reshape(t.shape)},offset:function(){var e=n;return 1===t.rank&&(e=e.sum(g)),e.reshape(t.shape)}}},a.ENV.engine.runKernel((function(e){return e.batchNormalization(d,n(t),n(r),o,n(c),n(p))}),{x:e,mean:t,variance:r,scale:c,offset:p},h).reshape(e.shape)},d([c.operation],e,"batchNormalization2d",null),d([c.operation],e,"batchNormalization3d",null),d([c.operation],e,"batchNormalization4d",null),d([o.doc({heading:"Operations",subheading:"Normalization"})],e,"batchNormalization",null),e}(),t.BatchNormOps=p},2148:function(e,t,r){"use strict";var n,o,a,s,i,u,c=this&&this.__decorate||function(e,t,r,n){var o,a,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(t,"__esModule",{value:!0}),n=r(638),o=r(632),a=r(630),s=r(731),i=r(660),u=function(){function e(){}return e.notEqual=function(e,t){return a.assertArgumentsAreTensors({a:e,b:t},"notEqual"),a.assertTypesMatch(e,t),s.assertAndGetBroadcastShape(e.shape,t.shape),o.ENV.engine.runKernel((function(r){return r.notEqual(e,t)}),{a:e,b:t})},e.notEqualStrict=function(e,t){return a.assertShapesMatch(e.shape,t.shape,"Error in notEqualStrict: "),e.notEqual(t)},e.less=function(e,t){return a.assertArgumentsAreTensors({a:e,b:t},"less"),a.assertTypesMatch(e,t),s.assertAndGetBroadcastShape(e.shape,t.shape),o.ENV.engine.runKernel((function(r){return r.less(e,t)}),{a:e,b:t})},e.lessStrict=function(e,t){return a.assertShapesMatch(e.shape,t.shape,"Error in lessStrict: "),e.less(t)},e.equal=function(e,t){return a.assertArgumentsAreTensors({a:e,b:t},"equal"),a.assertTypesMatch(e,t),s.assertAndGetBroadcastShape(e.shape,t.shape),o.ENV.engine.runKernel((function(r){return r.equal(e,t)}),{a:e,b:t})},e.equalStrict=function(e,t){return a.assertShapesMatch(e.shape,t.shape,"Error in equalStrict: "),e.equal(t)},e.lessEqual=function(e,t){return a.assertArgumentsAreTensors({a:e,b:t},"lessEqual"),a.assertTypesMatch(e,t),s.assertAndGetBroadcastShape(e.shape,t.shape),o.ENV.engine.runKernel((function(r){return r.lessEqual(e,t)}),{a:e,b:t})},e.lessEqualStrict=function(e,t){return a.assertShapesMatch(e.shape,t.shape,"Error in lessEqualStrict: "),e.lessEqual(t)},e.greater=function(e,t){return a.assertArgumentsAreTensors({a:e,b:t},"greater"),a.assertTypesMatch(e,t),s.assertAndGetBroadcastShape(e.shape,t.shape),o.ENV.engine.runKernel((function(r){return r.greater(e,t)}),{a:e,b:t})},e.greaterStrict=function(e,t){return a.assertShapesMatch(e.shape,t.shape,"Error in greaterStrict: "),e.greater(t)},e.greaterEqual=function(e,t){return a.assertArgumentsAreTensors({a:e,b:t},"greaterEqual"),a.assertTypesMatch(e,t),s.assertAndGetBroadcastShape(e.shape,t.shape),o.ENV.engine.runKernel((function(r){return r.greaterEqual(e,t)}),{a:e,b:t})},e.greaterEqualStrict=function(e,t){return a.assertShapesMatch(e.shape,t.shape,"Error in greaterEqualStrict: "),e.greaterEqual(t)},c([n.doc({heading:"Operations",subheading:"Logical"}),i.operation],e,"notEqual",null),c([i.operation],e,"notEqualStrict",null),c([n.doc({heading:"Operations",subheading:"Logical"}),i.operation],e,"less",null),c([i.operation],e,"lessStrict",null),c([n.doc({heading:"Operations",subheading:"Logical"}),i.operation],e,"equal",null),c([i.operation],e,"equalStrict",null),c([n.doc({heading:"Operations",subheading:"Logical"}),i.operation],e,"lessEqual",null),c([i.operation],e,"lessEqualStrict",null),c([n.doc({heading:"Operations",subheading:"Logical"}),i.operation],e,"greater",null),c([i.operation],e,"greaterStrict",null),c([n.doc({heading:"Operations",subheading:"Logical"}),i.operation],e,"greaterEqual",null),c([i.operation],e,"greaterEqualStrict",null),e}(),t.CompareOps=u},2149:function(e,t,r){"use strict";function n(e){var t=function(e){return"number"==typeof e?[e,e]:e}(e),r=t[0],n=t[1];return 1===r&&1===n}function o(e,t){return n(e)||n(t)}var a,s,i,u,c,l,p=this&&this.__decorate||function(e,t,r,n){var o,a,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(t,"__esModule",{value:!0}),a=r(638),s=r(632),i=r(630),u=r(1258),c=r(660),l=function(){function e(){}return e.conv1d=function(t,r,n,a,s,u,c){var l,p,d,h,f,m,g;return void 0===s&&(s="NWC"),void 0===u&&(u=1),i.assertArgumentsAreTensors({x:t,filter:r},"conv1d"),l=t,p=!1,2===t.rank&&(p=!0,l=t.as3D(1,t.shape[0],t.shape[1])),i.assert(3===l.rank,"Error in conv1d: input must be rank 3, but got rank "+l.rank+"."),i.assert(3===r.rank,"Error in conv1d: filter must be rank 3, but got rank "+r.rank+"."),null!=c&&i.assert(i.isInt(a),"Error in conv1d: pad must be an integer when using, dimRoundingMode "+c+" but got pad "+a+"."),i.assert(l.shape[2]===r.shape[1],"Error in conv1d: depth of input ("+l.shape[2]+") must match  input depth for filter "+r.shape[1]+"."),i.assert(o(n,u),"Error in conv1D: Either stride or dilation must be 1.Got stride "+n+" and dilation '"+u+"'"),i.assert("NWC"===s,"Error in conv1d: got dataFormat of "+s+" but only NWC is currently supported."),d=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]),h=l.as4D(l.shape[0],1,l.shape[1],l.shape[2]),f=[1,n],m=[1,u],g=e.conv2d(h,d,f,a,"NHWC",m,c),p?g.as2D(g.shape[2],g.shape[3]):g.as3D(g.shape[0],g.shape[2],g.shape[3])},e.conv2d=function(t,r,a,c,l,p,d){var h,f,m,g,y;return void 0===l&&(l="NHWC"),void 0===p&&(p=[1,1]),i.assertArgumentsAreTensors({x:t,filter:r},"conv2d"),h=t,f=!1,3===t.rank&&(f=!0,h=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),i.assert(4===h.rank,"Error in conv2d: input must be rank 4, but got rank "+h.rank+"."),i.assert(4===r.rank,"Error in conv2d: filter must be rank 4, but got rank "+r.rank+"."),null!=d&&i.assert(i.isInt(c),"Error in conv2d: pad must be an integer when using, dimRoundingMode "+d+" but got pad "+c+"."),i.assert(h.shape[3]===r.shape[2],"Error in conv2d: depth of input ("+h.shape[3]+") must match  input depth for filter "+r.shape[2]+"."),i.assert(o(a,p),"Error in conv2D: Either strides or dilations must be 1.Got strides "+a+" and dilations '"+p+"'"),i.assert("NHWC"===l,"Error in conv2d: got dataFormat of "+l+" but only NHWC is currently supported."),m=u.computeConv2DInfo(h.shape,r.shape,a,p,c,d),g=function(t){return i.assert(n(p),"Error in gradient of conv2D: dilation rates greater than 1 are notyet supported in gradients. Got dilations '"+p+"'"),{x:function(){return e.conv2dDerInput(h.shape,t,r,a,c)},filter:function(){return e.conv2dDerFilter(h,t,r.shape,a,c)}}},y=s.ENV.engine.runKernel((function(e){return e.conv2d(h,r,m)}),{x:h,filter:r},g),f?y.as3D(y.shape[1],y.shape[2],y.shape[3]):y},e.conv2dDerInput=function(e,t,r,n,o,a){var c,l,p,d,h,f,m;return i.assertArgumentsAreTensors({dy:t,filter:r},"conv2dDerInput"),i.assert(e.length===t.rank,"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"),c=e,l=t,p=!1,3===t.rank&&(p=!0,l=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]),c=[1,e[0],e[1],e[2]]),d=c[3],h=l.shape[3],i.assert(4===c.length,"Error in conv2dDerInput: inShape must be length 4, but got length "+c.length+"."),i.assert(4===l.rank,"Error in conv2dDerInput: dy must be rank 4, but got rank "+l.rank),i.assert(4===r.rank,"Error in conv2dDerInput: filter must be rank 4, but got rank "+r.rank),i.assert(d===r.shape[2],"Error in conv2dDerInput: depth of input ("+d+") must match input depth for filter "+r.shape[2]+"."),i.assert(h===r.shape[3],"Error in conv2dDerInput: depth of output ("+h+") mustmatch output depth for filter "+r.shape[3]+"."),null!=a&&i.assert(i.isInt(o),"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+o+"."),f=u.computeConv2DInfo(c,r.shape,n,1,o,a),m=s.ENV.engine.runKernel((function(e){return e.conv2dDerInput(l,r,f)}),{dy4D:l}),p?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m},e.conv2dDerFilter=function(e,t,r,n,o,a){var c,l,p;return i.assertArgumentsAreTensors({x:e,dy:t},"conv2dDerFilter"),c=e,3===e.rank&&(c=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),3===(l=t).rank&&(l=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),i.assert(4===c.rank,"Error in conv2dDerFilter: input must be rank 4, but got shape "+c.shape+"."),i.assert(4===l.rank,"Error in conv2dDerFilter: dy must be rank 4, but got shape "+l.shape+"."),i.assert(4===r.length,"Error in conv2dDerFilter: filterShape must be length 4, but got "+r+"."),i.assert(c.shape[3]===r[2],"Error in conv2dDerFilter: depth of input "+c.shape[3]+") must match input depth in filter ("+r[2]+"."),i.assert(l.shape[3]===r[3],"Error in conv2dDerFilter: depth of dy ("+l.shape[3]+") must match output depth for filter ("+r[3]+")."),null!=a&&i.assert(i.isInt(o),"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+o+"."),p=u.computeConv2DInfo(c.shape,r,n,1,o,a),s.ENV.engine.runKernel((function(e){return e.conv2dDerFilter(c,l,p)}),{x4D:c,dy4D:l})},e.conv2dTranspose=function(t,r,n,o,a,s){return i.assertArgumentsAreTensors({x:t,filter:r},"conv2dTranspose"),e.conv2dDerInput(n,t,r,o,a,s)},e.depthwiseConv2d=function(e,t,r,n,a,c,l){var p,d,h,f;return void 0===a&&(a="NHWC"),void 0===c&&(c=[1,1]),i.assertArgumentsAreTensors({x:e,filter:t},"depthwiseConv2d"),p=e,d=!1,3===e.rank&&(d=!0,p=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),i.assert(4===p.rank,"Error in depthwiseConv2D: input must be rank 4, but got rank "+p.rank+"."),i.assert(4===t.rank,"Error in depthwiseConv2D: filter must be rank 4, but got rank "+t.rank+"."),i.assert(p.shape[3]===t.shape[2],"Error in depthwiseConv2D: number of input channels ("+p.shape[3]+") must match the inChannels dimension in filter "+t.shape[2]+"."),null==c&&(c=[1,1]),i.assert(o(r,c),"Error in depthwiseConv2d: Either strides or dilations must be 1.Got strides "+r+" and dilations '"+c+"'"),null!=l&&i.assert(i.isInt(n),"Error in depthwiseConv2D: pad must be an integer when using, dimRoundingMode "+l+" but got pad "+n+"."),h=u.computeConv2DInfo(p.shape,t.shape,r,c,n,l,!0),f=s.ENV.engine.runKernel((function(e){return e.depthwiseConv2D(p,t,h)}),{x4D:p,filter:t}),d?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f},e.separableConv2d=function(t,r,n,o,a,s,u){var c,l,p,d,h,f;if(void 0===s&&(s=[1,1]),void 0===u&&(u="NHWC"),i.assertArgumentsAreTensors({x:t,depthwiseFilter:r,pointwiseFilter:n},"separableConv2d"),c=t,l=!1,3===t.rank&&(l=!0,c=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),"NCHW"===u)throw Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");return i.assert(4===c.rank,"Error in separableConv2d: input must be rank 4, but got rank "+c.rank+"."),i.assert(4===r.rank,"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+r.rank+"."),i.assert(4===n.rank,"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+r.rank+"."),i.assert(1===n.shape[0],"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+n.shape[0]+"."),i.assert(1===n.shape[1],"Error in separableConv2d: the second dimension of pointwise filter  must be 1, but got "+n.shape[1]+"."),p=r.shape[2],d=r.shape[3],i.assert(n.shape[2]===p*d,"Error in separableConv2d: the third dimension of pointwise filter must be "+p*d+", but got "+n.shape[2]+"."),h=e.depthwiseConv2d(c,r,o,a,u,s),f=e.conv2d(h,n,1,"valid",u),l?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f},p([a.doc({heading:"Operations",subheading:"Convolution"}),c.operation],e,"conv1d",null),p([a.doc({heading:"Operations",subheading:"Convolution"}),c.operation],e,"conv2d",null),p([c.operation],e,"conv2dDerInput",null),p([c.operation],e,"conv2dDerFilter",null),p([a.doc({heading:"Operations",subheading:"Convolution"}),c.operation],e,"conv2dTranspose",null),p([a.doc({heading:"Operations",subheading:"Convolution"}),c.operation],e,"depthwiseConv2d",null),p([a.doc({heading:"Operations",subheading:"Convolution"}),c.operation],e,"separableConv2d",null),e}(),t.ConvOps=l},2150:function(e,t,r){"use strict";var n,o,a,s,i,u=this&&this.__decorate||function(e,t,r,n){var o,a,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(t,"__esModule",{value:!0}),n=r(638),o=r(632),a=r(630),s=r(660),i=function(){function e(){}return e.resizeBilinear=function(e,t,r){var n,s,i,u,c;return void 0===r&&(r=!1),a.assertArgumentsAreTensors({images:e},"resizeBilinear"),a.assert(3===e.rank||4===e.rank,"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+e.rank+"."),a.assert(2===t.length,"Error in resizeBilinear: new shape must 2D, but got shape "+t+"."),n=e,s=!1,3===e.rank&&(s=!0,n=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),i=t[0],u=t[1],c=o.ENV.engine.runKernel((function(e){return e.resizeBilinear(n,i,u,r)}),{batchImages:n}),s?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c},e.resizeNearestNeighbor=function(e,t,r){var n,s,i,u,c;return void 0===r&&(r=!1),a.assertArgumentsAreTensors({images:e},"resizeNearestNeighbor"),a.assert(3===e.rank||4===e.rank,"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+e.rank+"."),a.assert(2===t.length,"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+t+"."),a.assert("float32"===e.dtype||"int32"===e.dtype,"`images` must have `int32` or `float32` as dtype"),n=e,s=!1,3===e.rank&&(s=!0,n=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),i=t[0],u=t[1],c=o.ENV.engine.runKernel((function(e){return e.resizeNearestNeighbor(n,i,u,r)}),{batchImages:n}),s?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c},u([n.doc({heading:"Operations",subheading:"Images",namespace:"image"}),s.operation],e,"resizeBilinear",null),u([n.doc({heading:"Operations",subheading:"Images",namespace:"image"}),s.operation],e,"resizeNearestNeighbor",null),e}(),t.ImageOps=i},2151:function(e,t,r){"use strict";var n,o,a,s,i,u,c,l=this&&this.__decorate||function(e,t,r,n){var o,a,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(t,"__esModule",{value:!0}),n=r(638),o=r(632),a=r(756),s=r(630),i=r(731),u=r(660),c=function(){function e(){}return e.logicalNot=function(e){return s.assertArgumentsAreTensors({x:e},"logicalNot"),s.assert("bool"===e.dtype,"Error Array must be of type bool."),o.ENV.engine.runKernel((function(t){return t.logicalNot(e)}),{x:e})},e.logicalAnd=function(e,t){return s.assertArgumentsAreTensors({a:e,b:t},"logicalAnd"),s.assert("bool"===e.dtype&&"bool"===t.dtype,"Error Array must be of type bool."),i.assertAndGetBroadcastShape(e.shape,t.shape),o.ENV.engine.runKernel((function(r){return r.logicalAnd(e,t)}),{a:e,b:t})},e.logicalOr=function(e,t){return s.assertArgumentsAreTensors({a:e,b:t},"logicalOr"),s.assert("bool"===e.dtype&&"bool"===t.dtype,"Error Array must be of type bool."),i.assertAndGetBroadcastShape(e.shape,t.shape),o.ENV.engine.runKernel((function(r){return r.logicalOr(e,t)}),{a:e,b:t})},e.logicalXor=function(t,r){return s.assertArgumentsAreTensors({a:t,b:r},"logicalXor"),s.assert("bool"===t.dtype&&"bool"===r.dtype,"Error Array must be of type bool."),i.assertAndGetBroadcastShape(t.shape,r.shape),e.logicalOr(t,r).logicalAnd(e.logicalAnd(t,r).logicalNot())},e.where=function(e,t,r){s.assertArgumentsAreTensors({condition:e,a:t,b:r},"where"),s.assert("bool"===e.dtype||"bool"===t.dtype||"bool"===r.dtype,"Error Array must be of type bool."),s.assertShapesMatch(t.shape,r.shape,"Error in where: "),1===e.rank?s.assert(e.shape[0]===t.shape[0],"The first dimension of `a` must match the size of `condition`."):s.assertShapesMatch(e.shape,r.shape,"Error in where: ");var n=a.upcastType(t.dtype,r.dtype);return o.ENV.engine.runKernel((function(o){return o.where(e,t,r,n)}),{condition:e,a:t,b:r})},l([n.doc({heading:"Operations",subheading:"Logical"}),u.operation],e,"logicalNot",null),l([n.doc({heading:"Operations",subheading:"Logical"}),u.operation],e,"logicalAnd",null),l([n.doc({heading:"Operations",subheading:"Logical"}),u.operation],e,"logicalOr",null),l([n.doc({heading:"Operations",subheading:"Logical"}),u.operation],e,"logicalXor",null),l([n.doc({heading:"Operations",subheading:"Logical"}),u.operation],e,"where",null),e}(),t.LogicalOps=c},2152:function(e,t,r){"use strict";var n,o,a,s,i,u=this&&this.__decorate||function(e,t,r,n){var o,a,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(t,"__esModule",{value:!0}),n=r(638),o=r(632),a=r(630),s=r(660),i=function(){function e(){}return e.localResponseNormalization=function(e,t,r,n,s){var i,u,c;return void 0===t&&(t=5),void 0===r&&(r=1),void 0===n&&(n=1),void 0===s&&(s=.5),a.assertArgumentsAreTensors({x:e},"localResponseNormalization"),a.assert(4===e.rank||3===e.rank,"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank "+e.rank+"."),a.assert(a.isInt(t),"Error in localResponseNormalization3D: radius must be an integer\n                     but got radius "+t+"."),i=e,u=!1,3===e.rank&&(u=!0,i=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),c=o.ENV.engine.runKernel((function(e){return e.localResponseNormalization4D(i,t,r,n,s)}),{x4D:i}),u?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c},u([n.doc({heading:"Operations",subheading:"Normalization"}),s.operation],e,"localResponseNormalization",null),e}(),t.LRNOps=i},2153:function(e,t,r){"use strict";var n,o,a,s,i=this&&this.__decorate||function(e,t,r,n){var o,a,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(t,"__esModule",{value:!0}),n=r(638),o=r(630),a=r(660),s=function(){function e(){}return e.multiRNNCell=function(e,t,r,n){var a,s,i,u,c,l;for(o.assertArgumentsAreTensors({data:t,c:r,h:n},"multiRNNCell"),a=t,s=[],i=0;i<e.length;i++)u=e[i](a,r[i],n[i]),s.push(u[0]),s.push(u[1]),a=u[1];for(c=[],l=[],i=0;i<s.length;i+=2)c.push(s[i]),l.push(s[i+1]);return[c,l]},e.basicLSTMCell=function(e,t,r,n,a,s){var i,u,c,l,p,d,h,f,m;return o.assertArgumentsAreTensors({forgetBias:e,lstmKernel:t,lstmBias:r,data:n,c:a,h:s},"basicLSTMCell"),c=[(i=n.concat(s,1).matMul(t).add(r)).shape[0],u=i.shape[1]/4],l=i.slice([0,0],c),p=i.slice([0,u],c),d=i.slice([0,2*u],c),h=i.slice([0,3*u],c),m=(f=l.sigmoid().mulStrict(p.tanh()).addStrict(a.mulStrict(e.add(d).sigmoid()))).tanh().mulStrict(h.sigmoid()),[f,m]},i([n.doc({heading:"Operations",subheading:"RNN"}),a.operation],e,"multiRNNCell",null),i([n.doc({heading:"Operations",subheading:"RNN"}),a.operation],e,"basicLSTMCell",null),e}(),t.LSTMOps=s},2154:function(e,t,r){"use strict";var n,o,a,s,i,u=this&&this.__decorate||function(e,t,r,n){var o,a,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(t,"__esModule",{value:!0}),n=r(638),o=r(632),a=r(630),s=r(660),i=function(){function e(){}return e.matMul=function(e,t,r,n){var s,i,u;return void 0===r&&(r=!1),void 0===n&&(n=!1),a.assertArgumentsAreTensors({a:e,b:t},"matMul"),s=r?e.shape[0]:e.shape[1],i=n?t.shape[1]:t.shape[0],a.assert(2===e.rank&&2===t.rank,"Error in matMul: inputs must be rank 2, got ranks "+e.rank+" and "+t.rank+"."),a.assert(s===i,"Error in matMul: inner shapes ("+s+") and ("+i+") of Tensors with shapes "+e.shape+" and "+t.shape+" and transposeA="+r+" and transposeB="+n+" must match."),u=function(o){return r||n?!r&&n?{a:function(){return o.matMul(t.toFloat(),!1,!1)},b:function(){return o.matMul(e.toFloat(),!0,!1)}}:r&&!n?{a:function(){return t.toFloat().matMul(o,!1,!0)},b:function(){return e.toFloat().matMul(o,!1,!1)}}:{a:function(){return t.toFloat().matMul(o,!0,!0)},b:function(){return o.matMul(e.toFloat(),!0,!0)}}:{a:function(){return o.matMul(t.toFloat(),!1,!0)},b:function(){return e.toFloat().matMul(o,!0,!1)}}},o.ENV.engine.runKernel((function(o){return o.matMul(e,t,r,n)}),{a:e,b:t},u)},e.vectorTimesMatrix=function(e,t){return a.assert(1===e.rank,"Error in vectorTimesMatrix: first input must be rank 1, but got rank "+e.rank+"."),a.assert(2===t.rank,"Error in vectorTimesMatrix: second input must be rank 2, but got rank "+t.rank+"."),a.assert(e.size===t.shape[0],"Error in vectorTimesMatrix: size of vector ("+e.size+") must match first dimension of matrix ("+t.shape[0]+")"),e.as2D(1,-1).matMul(t).as1D()},e.matrixTimesVector=function(e,t){return a.assert(1===t.rank,"Error in matrixTimesVector: second input must rank 1, but got rank "+t.rank+"."),a.assert(2===e.rank,"Error in matrixTimesVector: first input must be a rank 2, but got rank "+e.rank+"."),a.assert(t.size===e.shape[1],"Error in matrixTimesVector: size of first rank 1 input "+t.size+" must match inner dimension of second rank 2 input, but got shape "+e.shape+"."),e.matMul(t.as2D(-1,1)).as1D()},e.dotProduct=function(e,t){return a.assert(1===e.rank&&1===t.rank,"Error in dotProduct: inputs must be rank 1, but got ranks "+e.rank+" and "+t.rank+"."),a.assert(e.size===t.size,"Error in dotProduct: size of inputs ("+e.size+") and ("+t.size+") must match."),e.as2D(1,-1).matMul(t.as2D(-1,1)).asScalar()},e.outerProduct=function(e,t){return a.assert(1===e.rank&&1===t.rank,"Error in outerProduct: inputs must be rank 1, but got ranks "+e.rank+" and "+t.rank+"."),e.as2D(-1,1).matMul(t.as2D(1,-1))},u([n.doc({heading:"Operations",subheading:"Matrices"}),s.operation],e,"matMul",null),u([s.operation],e,"vectorTimesMatrix",null),u([s.operation],e,"matrixTimesVector",null),u([s.operation],e,"dotProduct",null),u([n.doc({heading:"Operations",subheading:"Matrices"}),s.operation],e,"outerProduct",null),e}(),t.MatmulOps=i},2155:function(e,t,r){"use strict";var n,o,a,s,i,u,c=this&&this.__decorate||function(e,t,r,n){var o,a,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(t,"__esModule",{value:!0}),n=r(638),o=r(630),a=r(899),s=r(1257),i=r(660),u=function(){function e(){}return e.movingAverage=function(e,t,r,n,i){var u,c,l;return void 0===i&&(i=!0),o.assertArgumentsAreTensors({v:e,x:t},"movingAverage"),o.assertTypesMatch(e,t),o.assert(o.arraysEqual(e.shape,t.shape),"Shape mismatch in v and x"),u=a.ArrayOps.scalar(1),r="number"==typeof r?a.ArrayOps.scalar(r):r,c=u.sub(r),l=t.sub(e).mul(c),i&&(o.assert(null!=n,"When using zeroDebias: true, step is required."),n="number"==typeof n?a.ArrayOps.scalar(n):n,l=l.div(u.sub(s.BinaryOps.pow(r,n)))),e.add(l)},c([n.doc({heading:"Operations",subheading:"Moving Average"}),i.operation],e,"movingAverage",null),e}(),t.MovingAverageOps=u},2156:function(e,t,r){"use strict";function n(e,t,r){if(void 0===r&&(r=null),0===e.rank)return e.abs();if(1!==e.rank&&null===r)return n(e.reshape([-1]),t,r);if(1===e.rank||"number"==typeof r||r instanceof Array&&1===r.length){if(1===t)return e.abs().sum(r);if(t===1/0)return e.abs().max(r);if(t===-1/0)return e.abs().min(r);if("euclidean"===t||2===t)return e.abs().pow(u.scalar(2,"int32")).sum(r).sqrt();throw Error("Error in norm: invalid ord value: "+t)}if(r instanceof Array&&2===r.length){if(1===t)return e.abs().sum(r[0]).max(r[1]-1);if(t===1/0)return e.abs().sum(r[1]).max(r[0]);if(t===-1/0)return e.abs().sum(r[1]).min(r[0]);if("fro"===t||"euclidean"===t)return e.square().sum(r).sqrt();throw Error("Error in norm: invalid ord value: "+t)}throw Error("Error in norm: invalid axis: "+r)}var o,a,s,i,u,c,l=this&&this.__decorate||function(e,t,r,n){var o,a,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(t,"__esModule",{value:!0}),o=r(638),a=r(630),s=r(713),i=r(660),u=r(656),c=function(){function e(){}return e.norm=function(e,t,r,o){var i,u,c;return void 0===t&&(t="euclidean"),void 0===r&&(r=null),void 0===o&&(o=!1),a.assertArgumentsAreTensors({x:e},"norm"),u=(i=n(e,t,r)).shape,o&&(c=s.parseAxisParam(r,e.shape),u=s.expandShapeToKeepDim(i.shape,c)),i.reshape(u)},l([o.doc({heading:"Operations",subheading:"Matrices"}),i.operation],e,"norm",null),e}(),t.NormOps=c},2157:function(e,t,r){"use strict";var n,o,a,s,i,u,c=this&&this.__decorate||function(e,t,r,n){var o,a,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(t,"__esModule",{value:!0}),n=r(638),o=r(632),a=r(630),s=r(1258),i=r(660),u=function(){function e(){}return e.maxPool=function(t,r,n,i,u){var c,l,p,d,h;return a.assertArgumentsAreTensors({x:t},"maxPool"),c=t,l=!1,3===t.rank&&(l=!0,c=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),a.assert(4===c.rank,"Error in maxPool: input must be rank 4 but got rank "+c.rank+"."),null!=u&&a.assert(a.isInt(i),"Error in maxPool: pad must be an integer when using, dimRoundingMode "+u+" but got pad "+i+"."),p=s.computePool2DInfo(c.shape,r,n,i,u),d=function(t,o){var a=o[0];return{x:function(){return e.maxPoolBackprop(t,c,a,r,n,i)}}},h=o.ENV.engine.runKernel((function(e,t){return t(e.maxPool(c,p))}),{x:c},d),l?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h},e.maxPoolBackprop=function(e,t,r,n,i,u,c){var l;return a.assertArgumentsAreTensors({dy:e,input:t,output:r},"maxPoolBackprop"),a.assert(t.rank===e.rank,"Rank of input ("+t.rank+") does not match rank of dy ("+e.rank+")"),a.assert(4===e.rank,"Error in maxPoolBackprop: dy must be rank 4 but got rank "+e.rank+"."),a.assert(4===t.rank,"Error in maxPoolBackprop: input must be rank 4 but got rank "+t.rank+"."),null!=c&&a.assert(a.isInt(u),"Error in maxPoolBackprop: pad must be an integer when using, dimRoundingMode "+c+" but got pad "+u+"."),l=s.computePool2DInfo(t.shape,n,i,u,c),o.ENV.engine.runKernel((function(n){return n.maxPoolBackprop(e,t,r,l)}),{dy:e,input:t})},e.avgPool=function(t,r,n,i,u){var c,l,p,d,h;return a.assertArgumentsAreTensors({x:t},"avgPool"),a.assert("float32"===t.dtype,"The input dtype to avgPool must be float32"),c=t,l=!1,3===t.rank&&(l=!0,c=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),a.assert(4===c.rank,"Error in avgPool: x must be rank 4 but got rank "+c.rank+"."),null!=u&&a.assert(a.isInt(i),"Error in avgPool: pad must be an integer when using, dimRoundingMode "+u+" but got pad "+i+"."),p=s.computePool2DInfo(c.shape,r,n,i),d=function(t){return{x:function(){return e.avgPoolBackprop(t,c,r,n,i)}}},h=(h=o.ENV.engine.runKernel((function(e){return e.avgPool(c,p)}),{x:c},d)).cast(t.dtype),l?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h},e.avgPoolBackprop=function(e,t,r,n,i){var u,c,l,p,d;return a.assertArgumentsAreTensors({dy:e,input:t},"avgPoolBackprop"),a.assert(t.rank===e.rank,"Rank of input ("+t.rank+") does not match rank of dy ("+e.rank+")"),u=t,c=e,l=!1,3===t.rank&&(l=!0,u=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]),c=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),a.assert(4===c.rank,"Error in avgPoolBackprop: dy must be rank 4 but got rank "+c.rank+"."),a.assert(4===u.rank,"Error in avgPoolBackprop: input must be rank 4 but got rank "+u.rank+"."),p=s.computePool2DInfo(u.shape,r,n,i),d=o.ENV.engine.runKernel((function(e){return e.avgPoolBackprop(c,u,p)}),{dy4D:c,input4D:u}),l?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d},c([n.doc({heading:"Operations",subheading:"Convolution"}),i.operation],e,"maxPool",null),c([i.operation],e,"maxPoolBackprop",null),c([n.doc({heading:"Operations",subheading:"Convolution"}),i.operation],e,"avgPool",null),c([i.operation],e,"avgPoolBackprop",null),e}(),t.PoolOps=u},2158:function(e,t,r){"use strict";var n,o,a,s,i,u,c,l,p=this&&this.__decorate||function(e,t,r,n){var o,a,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(t,"__esModule",{value:!0}),n=r(638),o=r(632),a=r(679),s=r(630),i=r(713),u=r(660),c=r(656),l=function(){function e(){}return e.logSumExp=function(e,t,r){var n,o,a,u,c;return void 0===t&&(t=null),void 0===r&&(r=!1),s.assertArgumentsAreTensors({x:e},"logSumExp"),n=i.parseAxisParam(t,e.shape),o=e.max(n,!0),a=e.sub(o).exp().sum(n).log(),u=o.reshape(a.shape).add(a),r?(c=i.expandShapeToKeepDim(u.shape,n),u.reshape(c)):u},e.sum=function(e,t,r){var n,u;return void 0===t&&(t=null),void 0===r&&(r=!1),s.assertArgumentsAreTensors({x:e},"sum"),"bool"===e.dtype&&(e=e.toInt()),n=i.parseAxisParam(t,e.shape),u=a.customGrad((function(e){var t,a,s,u=i.getAxesPermutation(n,e.rank),l=n,p=e;return null!=u&&(p=e.transpose(u),l=i.getInnerMostAxes(l.length,e.rank)),t=o.ENV.engine.runKernel((function(e){return e.sum(p,l)}),{permutedX:p}),r&&(a=i.expandShapeToKeepDim(t.shape,n),t=t.reshape(a)),s=function(t){var r=e.shape.slice();return n.forEach((function(e){r[e]=1})),t.reshape(r).mul(c.ones(e.shape,"float32"))},{value:t,gradFunc:s}})),u(e)},e.mean=function(e,t,r){var n,o,u,l;return void 0===t&&(t=null),void 0===r&&(r=!1),s.assertArgumentsAreTensors({x:e},"mean"),n=i.parseAxisParam(t,e.shape),o=i.computeOutAndReduceShapes(e.shape,n)[1],u=s.sizeFromShape(o),l=a.customGrad((function(e){var o=c.scalar(u);return{value:(o.dtype===e.dtype?e:e.cast(o.dtype)).div(o).sum(t,r),gradFunc:function(t){var r=e.shape.slice();return n.forEach((function(e){r[e]=1})),t.reshape(r).mul(c.ones(e.shape,"float32")).div(o)}}})),l(e)},e.min=function(e,t,r){var n,a,u,c,l;return void 0===t&&(t=null),void 0===r&&(r=!1),s.assertArgumentsAreTensors({x:e},"min"),n=i.parseAxisParam(t,e.shape),a=n,null!=(u=i.getAxesPermutation(a,e.rank))&&(e=e.transpose(u),a=i.getInnerMostAxes(a.length,e.rank)),c=o.ENV.engine.runKernel((function(t){return t.min(e,a)}),{x:e}),r?(l=i.expandShapeToKeepDim(c.shape,n),c.reshape(l)):c},e.max=function(e,t,r){var n,a,u,c,l;return void 0===t&&(t=null),void 0===r&&(r=!1),s.assertArgumentsAreTensors({x:e},"max"),n=i.parseAxisParam(t,e.shape),a=n,null!=(u=i.getAxesPermutation(a,e.rank))&&(e=e.transpose(u),a=i.getInnerMostAxes(a.length,e.rank)),c=o.ENV.engine.runKernel((function(t){return t.max(e,a)}),{x:e}),r?(l=i.expandShapeToKeepDim(c.shape,n),c.reshape(l)):c},e.argMin=function(e,t){var r,n;return void 0===t&&(t=0),s.assertArgumentsAreTensors({x:e},"argMin"),null==t&&(t=0),r=i.parseAxisParam(t,e.shape),null!=(n=i.getAxesPermutation(r,e.rank))&&(e=e.transpose(n),r=i.getInnerMostAxes(r.length,e.rank)),o.ENV.engine.runKernel((function(t){return t.argMin(e,r[0])}),{x:e})},e.argMax=function(e,t){var r,n;return void 0===t&&(t=0),s.assertArgumentsAreTensors({x:e},"argMax"),null==t&&(t=0),r=i.parseAxisParam(t,e.shape),null!=(n=i.getAxesPermutation(r,e.rank))&&(e=e.transpose(n),r=i.getInnerMostAxes(r.length,e.rank)),o.ENV.engine.runKernel((function(t){return t.argMax(e,r[0])}),{x:e})},e.moments=function(e,t,r){var n,o,a,u;return void 0===t&&(t=null),void 0===r&&(r=!1),s.assertArgumentsAreTensors({x:e},"moments"),n=i.parseAxisParam(t,e.shape),a=(o=e.mean(n,r)).shape,r||(a=i.expandShapeToKeepDim(o.shape,n)),u=e.toFloat().sub(o.reshape(a)).square(),{mean:o,variance:u.mean(n,r)}},p([n.doc({heading:"Operations",subheading:"Reduction"}),u.operation],e,"logSumExp",null),p([n.doc({heading:"Operations",subheading:"Reduction"}),u.operation],e,"sum",null),p([n.doc({heading:"Operations",subheading:"Reduction"}),u.operation],e,"mean",null),p([n.doc({heading:"Operations",subheading:"Reduction"}),u.operation],e,"min",null),p([n.doc({heading:"Operations",subheading:"Reduction"}),u.operation],e,"max",null),p([n.doc({heading:"Operations",subheading:"Reduction"}),u.operation],e,"argMin",null),p([n.doc({heading:"Operations",subheading:"Reduction"}),u.operation],e,"argMax",null),p([n.doc({heading:"Operations",subheading:"Normalization"}),u.operation],e,"moments",null),e}(),t.ReductionOps=l},2159:function(e,t,r){"use strict";var n,o,a,s,i,u,c=this&&this.__decorate||function(e,t,r,n){var o,a,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(t,"__esModule",{value:!0}),n=r(638),o=r(632),a=r(630),s=r(713),i=r(660),u=function(){function e(){}return e.reverse1d=function(t){return a.assert(1===t.rank,"Error in reverse1D: x must be rank 1 but got\n             rank "+t.rank+"."),e.reverse(t,0)},e.reverse2d=function(t,r){return a.assert(2===t.rank,"Error in reverse2D: x must be rank 2 but got\n             rank "+t.rank+"."),e.reverse(t,r)},e.reverse3d=function(t,r){return a.assert(3===t.rank,"Error in reverse3D: x must be rank 3 but got\n             rank "+t.rank+"."),e.reverse(t,r)},e.reverse4d=function(t,r){return a.assert(4===t.rank,"Error in reverse4D: x must be rank 4 but got\n             rank "+t.rank+"."),e.reverse(t,r)},e.reverse=function(e,t){var r,n;return a.assertArgumentsAreTensors({x:e},"reverse"),0===e.rank?e.clone():(r=s.parseAxisParam(t,e.shape),n=function(e){return{x:function(){return e.reverse(r)}}},o.ENV.engine.runKernel((function(t){return t.reverse(e,r)}),{x:e},n).reshapeAs(e))},c([n.doc({heading:"Tensors",subheading:"Slicing and Joining"}),i.operation],e,"reverse",null),e}(),t.ReverseOps=u},2160:function(e,t,r){"use strict";var n,o,a,s,i,u,c=this&&this.__decorate||function(e,t,r,n){var o,a,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(t,"__esModule",{value:!0}),n=r(638),o=r(632),a=r(630),s=r(660),i=r(2161),u=function(){function e(){}return e.slice1d=function(t,r,n){return a.assert(1===t.rank,"slice1d expects a rank-1 tensor, but got a rank-"+t.rank+" tensor"),e.slice(t,[r],[n])},e.slice2d=function(t,r,n){return a.assert(2===t.rank,"slice1d expects a rank-2 tensor, but got a rank-"+t.rank+" tensor"),e.slice(t,r,n)},e.slice3d=function(t,r,n){return a.assert(3===t.rank,"slice1d expects a rank-3 tensor, but got a rank-"+t.rank+" tensor"),e.slice(t,r,n)},e.slice4d=function(t,r,n){return a.assert(4===t.rank,"slice1d expects a rank-4 tensor, but got a rank-"+t.rank+" tensor"),e.slice(t,r,n)},e.slice=function(e,t,r){var n,s,u,c;if(a.assertArgumentsAreTensors({x:e},"slice"),0===e.rank)throw Error("Slicing scalar is not possible");return n="number"==typeof t?[t].concat(Array(e.rank-1).fill(0)):t.length<e.rank?t.concat(Array(e.rank-t.length).fill(0)):t,s=(s=null==r?Array(e.rank).fill(-1):"number"==typeof r?[r].concat(Array(e.rank-1).fill(-1)):r.length<e.rank?r.concat(Array(e.rank-r.length).fill(-1)):r).map((function(t,r){return t>=0?t:(a.assert(-1===t,"Bad value in size"),e.shape[r]-n[r])})),i.assertParamsValid(e,n,s),u=e.shape,c=function(e){var t,r=[];for(t=0;t<e.rank;t++)r.push([n[t],u[t]-n[t]-s[t]]);return{x:function(){return e.pad(r)}}},o.ENV.engine.runKernel((function(t){return t.slice(e,n,s)}),{x:e},c)},c([n.doc({heading:"Tensors",subheading:"Slicing and Joining"}),s.operation],e,"slice",null),e}(),t.SliceOps=u},2161:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(630);t.assertParamsValid=function(e,t,r){n.assert(e.rank===t.length,"Error in slice"+e.rank+"D: Length of begin "+t+" must match the rank of the array ("+e.rank+")."),n.assert(e.rank===r.length,"Error in slice"+e.rank+"D: Length of size "+r+" must match the rank of the array ("+e.rank+").");for(var o=0;o<e.rank;++o)n.assert(t[o]+r[o]<=e.shape[o],"Error in slice"+e.rank+"D: begin["+o+"] + size["+o+"] ("+(t[o]+r[o])+") would overflow input.shape["+o+"] ("+e.shape[o]+")")}},2162:function(e,t,r){"use strict";var n,o,a,s,i,u,c,l=this&&this.__decorate||function(e,t,r,n){var o,a,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(t,"__esModule",{value:!0}),n=r(638),o=r(679),a=r(630),s=r(713),i=r(660),u=r(656),c=function(){function e(){}return e.softmax=function(e,t){if(void 0===t&&(t=-1),a.assertArgumentsAreTensors({logits:e},"softmax"),-1===t&&(t=e.rank-1),t!==e.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+e.rank+" and dim was "+t);var r=o.customGrad((function(e){var r=e.logSumExp([t],!0),n=e.toFloat().sub(r).exp();return{value:n,gradFunc:function(e){var r=e.mul(n);return r.sub(r.sum([t],!0).mul(n))}}}));return r(e)},e.softmaxCrossEntropy=function(e,t,r){if(void 0===r&&(r=-1),a.assertArgumentsAreTensors({labels:e,logits:t},"softmaxCrossEntropy"),a.assertShapesMatch(e.shape,t.shape,"Error in softmaxCrossEntropy: "),-1===r&&(r=t.rank-1),r!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+t.rank+" and dim was "+r);var n=o.customGrad((function(e,t){var n=t.softmax(r);return{value:u.scalar(1e-5).add(n).log().mul(e).neg().sum([r]),gradFunc:function(t){var o=s.expandShapeToKeepDim(t.shape,[r]);return[t.reshape(o).mul(e.toFloat().sub(n)),t.reshape(o).mul(n.sub(e.toFloat()))]}}}));return n(e,t)},l([n.doc({heading:"Operations",subheading:"Normalization"}),i.operation],e,"softmax",null),l([n.doc({heading:"Training",subheading:"Losses",namespace:"losses"}),i.operation],e,"softmaxCrossEntropy",null),e}(),t.SoftmaxOps=c},2163:function(e,t,r){"use strict";var n,o,a,s,i,u,c=this&&this.__decorate||function(e,t,r,n){var o,a,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(t,"__esModule",{value:!0}),n=r(638),o=r(632),a=r(630),s=r(713),i=r(660),u=function(){function e(){}return e.transpose=function(e,t){return a.assertArgumentsAreTensors({x:e},"transpose"),null==t&&(t=e.shape.map((function(e,t){return t})).reverse()),a.assert(e.rank===t.length,"Error in transpose: rank of input "+e.rank+" must match length of perm "+t+"."),o.ENV.engine.runKernel((function(r){return r.transpose(e,t)}),{x:e},(function(e){var r=s.getUndoAxesPermutation(t);return{x:function(){return e.transpose(r)}}}))},c([n.doc({heading:"Operations",subheading:"Matrices"}),i.operation],e,"transpose",null),e}(),t.TransposeOps=u},2164:function(e,t,r){"use strict";var n,o,a,s,i,u,c,l,p=this&&this.__decorate||function(e,t,r,n){var o,a,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(t,"__esModule",{value:!0}),n=r(638),o=r(632),a=r(630),s=r(660),i=r(656),u=r(656),c=r(1039),l=function(){function e(){}return e.neg=function(e){return a.assertArgumentsAreTensors({x:e},"neg"),o.ENV.engine.runKernel((function(t){return t.neg(e)}),{x:e},(function(e){return{x:function(){return e.neg()}}}))},e.ceil=function(e){return a.assertArgumentsAreTensors({x:e},"ceil"),o.ENV.engine.runKernel((function(t){return t.ceil(e)}),{x:e},(function(e){return{x:function(){return i.zerosLike(e)}}}))},e.floor=function(e){return a.assertArgumentsAreTensors({x:e},"floor"),o.ENV.engine.runKernel((function(t){return t.floor(e)}),{x:e},(function(e){return{x:function(){return i.zerosLike(e)}}}))},e.sign=function(e){return a.assertArgumentsAreTensors({x:e},"sign"),o.ENV.engine.runKernel((function(t){return t.sign(e)}),{x:e},(function(e){return{x:function(){return i.zerosLike(e)}}}))},e.round=function(e){return a.assertArgumentsAreTensors({x:e},"round"),o.ENV.engine.runKernel((function(t){return t.round(e)}),{x:e},(function(e){return{x:function(){return i.zerosLike(e)}}}))},e.exp=function(e){return a.assertArgumentsAreTensors({x:e},"exp"),o.ENV.engine.runKernel((function(t,r){return r(t.exp(e))}),{x:e},(function(e,t){var r=t[0];return{x:function(){return e.mulStrict(r)}}}))},e.expm1=function(e){return a.assertArgumentsAreTensors({x:e},"expm1"),o.ENV.engine.runKernel((function(t){return t.expm1(e)}),{x:e},(function(t){return{x:function(){return t.mulStrict(e.exp())}}}))},e.log=function(e){return a.assertArgumentsAreTensors({x:e},"log"),o.ENV.engine.runKernel((function(t){return t.log(e)}),{x:e},(function(t){return{x:function(){return t.divStrict(e.toFloat())}}}))},e.log1p=function(e){return a.assertArgumentsAreTensors({x:e},"log1p"),o.ENV.engine.runKernel((function(t){return t.log1p(e)}),{x:e},(function(t){return{x:function(){return t.divStrict(e.add(i.scalar(1)))}}}))},e.sqrt=function(e){return a.assertArgumentsAreTensors({x:e},"sqrt"),o.ENV.engine.runKernel((function(t){return t.sqrt(e)}),{x:e},(function(t){return{x:function(){return t.divStrict(e.toFloat().sqrt().mul(i.scalar(2)))}}}))},e.rsqrt=function(e){return a.assertArgumentsAreTensors({x:e},"rsqrt"),o.ENV.engine.runKernel((function(t){return t.rsqrt(e)}),{x:e},(function(t){return{x:function(){return t.divStrict(e.pow(i.scalar(1.5)).mul(i.scalar(2))).neg()}}}))},e.square=function(e){return a.assertArgumentsAreTensors({x:e},"square"),o.ENV.engine.runKernel((function(t){return t.square(e)}),{x:e},(function(t){return{x:function(){return t.mulStrict(e.toFloat().mul(i.scalar(2)))}}}))},e.reciprocal=function(e){return a.assertArgumentsAreTensors({x:e},"reciprocal"),o.ENV.engine.runKernel((function(t){return t.reciprocal(e)}),{x:e},(function(t){return{x:function(){return t.divStrict(e.square().neg())}}}))},e.abs=function(e){return a.assertArgumentsAreTensors({x:e},"abs"),o.ENV.engine.runKernel((function(t){return t.abs(e)}),{x:e},(function(t){return{x:function(){return t.mulStrict(e.toFloat().step(-1))}}}))},e.clipByValue=function(e,t,r){return a.assertArgumentsAreTensors({x:e},"clipByValue"),a.assert(t<=r,"Error in clip: min ("+t+") must be less than or equal to max ("+r+")."),o.ENV.engine.runKernel((function(n){return n.clip(e,t,r)}),{x:e},(function(n){return{x:function(){return n.where(e.greater(i.scalar(t)).logicalAnd(e.less(i.scalar(r))),u.zerosLike(n))}}}))},e.relu=function(e){return a.assertArgumentsAreTensors({x:e},"relu"),"bool"===e.dtype?e.toInt():o.ENV.engine.runKernel((function(t){return t.relu(e)}),{x:e},(function(t){var r=e.step();return{x:function(){return t.mulStrict(r.toFloat())}}}))},e.elu=function(e){return a.assertArgumentsAreTensors({x:e},"elu"),o.ENV.engine.runKernel((function(t,r){return r(t.elu(e))}),{x:e},(function(e,t){var r=t[0];return{x:function(){return o.ENV.engine.runKernel((function(t){return t.eluDer(e,r)}),{dy:e,y:r})}}}))},e.selu=function(e){return a.assertArgumentsAreTensors({x:e},"selu"),o.ENV.engine.runKernel((function(t){return t.selu(e)}),{x:e},(function(t){return{x:function(){var r=e.greater(i.scalar(0)),n=i.scalar(c.SELU_SCALEALPHA),o=i.scalar(c.SELU_SCALE),a=t.mul(o),s=t.mul(n).mul(e.toFloat().exp());return i.where(r,a,s)}}}))},e.leakyRelu=function(e,t){return void 0===t&&(t=.2),a.assertArgumentsAreTensors({x:e},"leakyRelu"),i.maximum(i.scalar(t).mul(e),e)},e.prelu=function(e,t){a.assertArgumentsAreTensors({x:e,alpha:t},"prelu");var r=i.scalar(0);return i.maximum(r,e).add(t.mul(i.minimum(r,e)))},e.sigmoid=function(e){return a.assertArgumentsAreTensors({x:e},"sigmoid"),o.ENV.engine.runKernel((function(t,r){return r(t.sigmoid(e))}),{x:e},(function(e,t){var r=t[0];return{x:function(){return e.mulStrict(r.mul(i.scalar(1).sub(r)))}}}))},e.logSigmoid=function(e){return a.assertArgumentsAreTensors({x:e},"logSigmoid"),o.ENV.engine.runKernel((function(t){return t.softplus(e.neg()).neg()}),{x:e},(function(t){return{x:function(){return t.mulStrict(e.neg().sigmoid())}}}))},e.softplus=function(e){return a.assertArgumentsAreTensors({x:e},"softplus"),o.ENV.engine.runKernel((function(t){return t.softplus(e)}),{x:e},(function(t){return{x:function(){return t.mulStrict(e.sigmoid())}}}))},e.sin=function(e){return a.assertArgumentsAreTensors({x:e},"sin"),o.ENV.engine.runKernel((function(t){return t.sin(e)}),{x:e},(function(t){return{x:function(){return e.toFloat().cos().mulStrict(t)}}}))},e.cos=function(e){return a.assertArgumentsAreTensors({x:e},"cos"),o.ENV.engine.runKernel((function(t){return t.cos(e)}),{x:e},(function(t){return{x:function(){return e.toFloat().sin().neg().mulStrict(t)}}}))},e.tan=function(e){return a.assertArgumentsAreTensors({x:e},"tan"),o.ENV.engine.runKernel((function(t){return t.tan(e)}),{x:e},(function(t){return{x:function(){return t.divStrict(e.cos().square())}}}))},e.asin=function(t){return a.assertArgumentsAreTensors({x:t},"asin"),o.ENV.engine.runKernel((function(e){return e.asin(t)}),{x:t},(function(r){return{x:function(){return r.divStrict(e.sqrt(i.scalar(1).sub(t.toFloat().square())))}}}))},e.acos=function(t){return a.assertArgumentsAreTensors({x:t},"acos"),o.ENV.engine.runKernel((function(e){return e.acos(t)}),{x:t},(function(r){return{x:function(){return r.divStrict(e.sqrt(i.scalar(1).sub(t.toFloat().square()))).neg()}}}))},e.atan=function(e){return a.assertArgumentsAreTensors({x:e},"atan"),o.ENV.engine.runKernel((function(t){return t.atan(e)}),{x:e},(function(t){return{x:function(){return t.divStrict(i.scalar(1).add(e.toFloat().square()))}}}))},e.sinh=function(e){return a.assertArgumentsAreTensors({x:e},"sinh"),o.ENV.engine.runKernel((function(t){return t.sinh(e)}),{x:e},(function(t){return{x:function(){return e.toFloat().cosh().mulStrict(t)}}}))},e.cosh=function(e){return a.assertArgumentsAreTensors({x:e},"cosh"),o.ENV.engine.runKernel((function(t){return t.cosh(e)}),{x:e},(function(t){return{x:function(){return e.toFloat().sinh().mulStrict(t)}}}))},e.tanh=function(e){return a.assertArgumentsAreTensors({x:e},"tanh"),o.ENV.engine.runKernel((function(t,r){return r(t.tanh(e))}),{x:e},(function(e,t){var r=t[0];return{x:function(){return i.scalar(1).sub(r.square()).mulStrict(e)}}}))},e.asinh=function(t){return a.assertArgumentsAreTensors({x:t},"asinh"),o.ENV.engine.runKernel((function(e){return e.asinh(t)}),{x:t},(function(r){return{x:function(){return r.divStrict(e.sqrt(i.scalar(1).add(t.toFloat().square())))}}}))},e.acosh=function(t){return a.assertArgumentsAreTensors({x:t},"acosh"),o.ENV.engine.runKernel((function(e){return e.acosh(t)}),{x:t},(function(r){return{x:function(){return r.divStrict(e.sqrt(t.toFloat().square().sub(i.scalar(1))))}}}))},e.atanh=function(e){return a.assertArgumentsAreTensors({x:e},"atanh"),o.ENV.engine.runKernel((function(t){return t.atanh(e)}),{x:e},(function(t){return{x:function(){return t.divStrict(i.scalar(1).sub(e.toFloat().square()))}}}))},e.erf=function(e){return a.assert("int32"===e.dtype||"float32"===e.dtype,"Input dtype must be `int32` or `float32`."),"int32"===e.dtype&&(e=e.toFloat()),o.ENV.engine.runKernel((function(t){return t.erf(e)}),{x:e},(function(t){return{x:function(){return t.mulStrict(i.scalar(1.1283791670955126).mul(e.square().neg().exp()))}}}))},e.step=function(e,t){return void 0===t&&(t=0),a.assertArgumentsAreTensors({x:e},"step"),o.ENV.engine.runKernel((function(r){return r.step(e,t)}),{x:e},(function(e){return{x:function(){return i.zerosLike(e)}}}))},p([n.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"neg",null),p([n.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"ceil",null),p([n.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"floor",null),p([n.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"sign",null),p([n.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"round",null),p([n.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"exp",null),p([n.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"expm1",null),p([n.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"log",null),p([n.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"log1p",null),p([n.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"sqrt",null),p([n.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"rsqrt",null),p([n.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"square",null),p([n.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"reciprocal",null),p([n.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"abs",null),p([n.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"clipByValue",null),p([n.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"relu",null),p([n.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"elu",null),p([n.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"selu",null),p([n.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"leakyRelu",null),p([n.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"prelu",null),p([n.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"sigmoid",null),p([n.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"logSigmoid",null),p([n.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"softplus",null),p([n.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"sin",null),p([n.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"cos",null),p([n.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"tan",null),p([n.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"asin",null),p([n.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"acos",null),p([n.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"atan",null),p([n.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"sinh",null),p([n.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"cosh",null),p([n.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"tanh",null),p([n.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"asinh",null),p([n.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"acosh",null),p([n.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"atanh",null),p([n.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"erf",null),p([n.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"step",null),e}(),t.UnaryOps=l},2165:function(e,t,r){"use strict";var n,o,a,s,i=this&&this.__decorate||function(e,t,r,n){var o,a,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(t,"__esModule",{value:!0}),n=r(638),o=r(632),a=r(630),s=function(){function e(){}return e.tidy=function(e,t,r){var n,a;if(void 0===r&&(r=!1),n=null,null==t){if("function"!=typeof e)throw Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw Error("When calling with two arguments, the 2nd argument to tidy() must be a function");n=e}return o.ENV.engine.startScope(n,r),(a=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),o.ENV.engine.endScope(a,r),a},e.dispose=function(e){a.extractTensorsFromAny(e).forEach((function(e){return e.dispose()}))},e.keep=function(e){return o.ENV.engine.keep(e)},e.time=function(e){return o.ENV.engine.time(e)},i([n.doc({heading:"Performance",subheading:"Memory"})],e,"tidy",null),i([n.doc({heading:"Performance",subheading:"Memory"})],e,"keep",null),i([n.doc({heading:"Performance",subheading:"Timing"})],e,"time",null),e}(),t.Tracking=s},2166:function(e,t,r){"use strict";var n,o,a;Object.defineProperty(t,"__esModule",{value:!0}),n=r(630),o=function(){function e(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new a)}return e.prototype.profileKernel=function(e,t){var r,o=this,a=this.backendTimer.time((function(){r=t()})),s=r.dataSync();return n.checkForNaN(s,r.dtype,e),a.then((function(t){o.logger.logKernelProfile(e,r,s,t.kernelMs)})),r},e}(),t.Profiler=o,a=function(){function e(){}return e.prototype.logKernelProfile=function(e,t,r,o){var a=n.rightPad(o+"ms",9),s=n.rightPad(e,25),i=t.rank,u=t.size,c=n.rightPad(t.shape.toString(),14);console.log("%c"+s+"\t%c"+a+"\t%c"+i+"D "+c+"\t%c"+u,"font-weight:bold","color:red","color:blue","color: orange")},e}(),t.Logger=a},2167:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(630);t.getFilteredNodesXToY=function(e,t,r){var n,o,a,s,i,u,c,l,p,d,h,f,m,g,y={},b={};for(n=0;n<t.length;n++)y[t[n].id]=!0;for(n=0;n<e.length;n++)for(s in a=(o=e[n]).inputs){for(i=a[s],u=!1,c=0;c<t.length;c++)if(y[i.id]){y[o.output.id]=!0,u=!0,b[o.id]=!0;break}if(u)break}for((l={})[r.id]=!0,p={},n=e.length-1;n>=0;n--)for(a=(o=e[n]).inputs,(d=[]).push(o.output),c=0;c<d.length;c++)if(l[d[c].id]){for(s in a)l[a[s].id]=!0,p[o.id]=!0;break}for(h=[],n=0;n<e.length;n++)if(b[(o=e[n]).id]&&p[o.id]){for(s in f={},o.inputs)y[(m=o.inputs[s]).id]&&(f[s]=m);(g=Object.assign({},o)).inputs=f,g.output=o.output,h.push(g)}return h},t.backpropagateGradients=function(e,t){var r,o,a,s,i,u,c,l;for(r=t.length-1;r>=0;r--){if(a=e[(o=t[r]).output.id],null==o.gradient)throw Error("Cannot compute gradient: gradient function not found for "+o.name+".");for(i in s=o.gradient(a),o.inputs){if(!(i in s))throw Error("Cannot backprop through input "+i+". Available gradients found: "+Object.keys(s)+".");if(u=s[i](),c=o.inputs[i],!n.arraysEqual(u.shape,c.shape))throw Error("Error in gradient for op "+o.name+". The gradient of input '"+i+"' has shape '"+u.shape+"', which does not match the shape of the input '"+c.shape+"'");null==e[c.id]?e[c.id]=u:(l=e[c.id],e[c.id]=l.add(u),l.dispose())}}}},2168:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PARALLELIZE_THRESHOLD=30,t.computeOptimalWindowSize=function(e){return e<=t.PARALLELIZE_THRESHOLD?e:function(e,t){for(var r=t;r<e;++r)if(e%r==0)return r;return e}(e,Math.floor(Math.sqrt(e)))}},2199:function(e,t,r){"use strict";function n(e,r,n){var i,u,c,l,p,d,h;if(void 0===n&&(n=t.TEST_EPSILON),e instanceof a.Tensor||r instanceof a.Tensor){if(e instanceof a.Tensor&&r instanceof a.Tensor){if(e.dtype!==r.dtype)throw Error("Arrays are of different type actual: "+e.dtype+" vs expected: "+r.dtype+".");if(!s.arraysEqual(e.shape,r.shape))throw Error("Arrays are of different shape actual: "+e.shape+" vs expected: "+r.shape+".")}}else if((i=e.constructor.name)!==(u=r.constructor.name))throw Error("Arrays are of different type actual: "+i+" vs expected: "+u);if(c=e instanceof a.Tensor?e.dataSync():e,l=r instanceof a.Tensor?r.dataSync():r,c.length!==l.length)throw Error("Arrays have different lengths actual: "+c.length+" vs expected: "+l.length+".\nActual:   "+c+".\nExpected: "+l+".");for(p=0;p<l.length;++p)if(d=c[p],h=l[p],!o(d,Number(h),n))throw Error("Arrays differ: actual["+p+"] = "+d+", expected["+p+"] = "+h+".\nActual:   "+c+".\nExpected: "+l+".")}function o(e,t,r){return!(!isNaN(e)||!isNaN(t))||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>r)}var a,s;Object.defineProperty(t,"__esModule",{value:!0}),a=r(712),s=r(630),t.WEBGL_ENVS={BACKEND:"test-webgl"},t.CPU_ENVS={BACKEND:"test-cpu"},t.ALL_ENVS={},t.TEST_EPSILON=.001,t.expectArraysClose=n,t.expectPromiseToFail=function(e,t){e().then((function(){return t.fail()}),(function(){return t()}))},t.expectArraysEqual=function(e,t){return n(e,t,0)},t.expectNumbersClose=function(e,r,n){if(void 0===n&&(n=t.TEST_EPSILON),!o(e,r,n))throw Error("Numbers differ: actual === "+e+", expected === "+r)},t.expectValuesInRange=function(e,t,r){var n,o;for(n=e instanceof a.Tensor?e.dataSync():e,o=0;o<n.length;o++)if(n[o]<t||n[o]>r)throw Error("Value out of range:"+n[o]+" low: "+t+", high: "+r)}},2200:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version="0.8.4"},2201:function(e,t,r){"use strict";var n,o,a,s=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function s(e){try{u(n.next(e))}catch(t){a(t)}}function i(e){try{u(n.throw(e))}catch(t){a(t)}}function u(e){e.done?o(e.value):new r((function(t){t(e.value)})).then(s,i)}u((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){function r(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(a=o[2&r[0]?"return":r[0]?"throw":"next"])&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[0,a.value]),r[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,o=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==r[0]&&2!==r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(s){r=[6,s],o=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}var n,o,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0}),n=r(656),o=r(630),a={float32:4,int32:4},t.loadWeights=function(e,t,r,u){return void 0===t&&(t=""),s(this,void 0,void 0,(function(){var s,c,l,p,d,h,f,m,g,y,b;return i(this,(function(i){switch(i.label){case 0:if(s=e.map((function(){return!1})),c={},l=null!=r?r.map((function(){return!1})):[],p=[],e.forEach((function(e,t){var n=0;e.weights.forEach((function(e){var i=a[e.dtype]*o.sizeFromShape(e.shape),u=function(){s[t]=!0,null==c[t]&&(c[t]=[]),c[t].push({manifestEntry:e,groupOffset:n,sizeBytes:i})};null!=r?r.forEach((function(t,r){t===e.name&&(u(),l[r]=!0)})):u(),p.push(e.name),n+=i}))})),!l.every((function(e){return e})))throw d=r.filter((function(e,t){return!l[t]})),Error("Could not find weights in manifest with names: "+d.join(", ")+". \nManifest JSON has weights with names: "+p.join(", ")+".");return h=s.reduce((function(e,t,r){return t&&e.push(r),e}),[]),f=[],h.forEach((function(r){e[r].paths.forEach((function(e){var r=t+(t.endsWith("/")?"":"/")+e;f.push(fetch(r,u))}))})),[4,Promise.all(f)];case 1:return m=i.sent(),[4,Promise.all(m.map((function(e){return e.arrayBuffer()})))];case 2:return g=i.sent(),y={},b=0,h.forEach((function(t){var r,o,a,s,i,u,l=e[t].paths.length,p=0;for(r=0;r<l;r++)p+=g[b+r].byteLength;for(o=new ArrayBuffer(p),a=new Uint8Array(o),s=0,i=0;i<l;i++)u=new Uint8Array(g[b+i]),a.set(u,s),s+=u.byteLength;c[t].forEach((function(e){var t,r,a=o.slice(e.groupOffset,e.groupOffset+e.sizeBytes);if("float32"===e.manifestEntry.dtype)t=new Float32Array(a);else{if("int32"!==e.manifestEntry.dtype)throw Error("Weight "+e.manifestEntry.name+" has unknown dtype "+e.manifestEntry.dtype+".");t=new Int32Array(a)}if(r=e.manifestEntry.name,null!=y[r])throw Error("Duplicate weight with name "+r+". Please make sure weights names are unique in the manifest JSON.");y[r]=n.tensor(t,e.manifestEntry.shape,e.manifestEntry.dtype)})),b+=l})),[2,y]}}))}))}},2202:function(e,t,r){"use strict";var n,o,a,s,i,u,c,l;Object.defineProperty(t,"__esModule",{value:!0}),n=r(1040),o=r(1041),a=r(1042),s=r(1043),i=r(1044),u=r(2203),c=r(1045),l=r(901),i.MomentumOptimizer,l.SGDOptimizer,n.AdadeltaOptimizer,o.AdagradOptimizer,c.RMSPropOptimizer,s.AdamaxOptimizer,a.AdamOptimizer,t.train={sgd:u.OptimizerConstructors.sgd,momentum:u.OptimizerConstructors.momentum,adadelta:u.OptimizerConstructors.adadelta,adagrad:u.OptimizerConstructors.adagrad,rmsprop:u.OptimizerConstructors.rmsprop,adamax:u.OptimizerConstructors.adamax,adam:u.OptimizerConstructors.adam}},2203:function(e,t,r){"use strict";var n,o,a,s,i,u,c,l,p,d=this&&this.__decorate||function(e,t,r,n){var o,a,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(t,"__esModule",{value:!0}),n=r(638),o=r(1040),a=r(1041),s=r(1042),i=r(1043),u=r(1044),c=r(1045),l=r(901),p=function(){function e(){}return e.sgd=function(e){return new l.SGDOptimizer(e)},e.momentum=function(e,t,r){return void 0===r&&(r=!1),new u.MomentumOptimizer(e,t,r)},e.rmsprop=function(e,t,r,n,o){return void 0===t&&(t=.9),void 0===r&&(r=0),void 0===n&&(n=1e-8),void 0===o&&(o=!1),new c.RMSPropOptimizer(e,t,r,n,o)},e.adam=function(e,t,r,n){return void 0===e&&(e=.001),void 0===t&&(t=.9),void 0===r&&(r=.999),void 0===n&&(n=1e-8),new s.AdamOptimizer(e,t,r,n)},e.adadelta=function(e,t,r){return void 0===e&&(e=.001),void 0===t&&(t=.95),void 0===r&&(r=1e-8),new o.AdadeltaOptimizer(e,t,r)},e.adamax=function(e,t,r,n,o){return void 0===e&&(e=.002),void 0===t&&(t=.9),void 0===r&&(r=.999),void 0===n&&(n=1e-8),void 0===o&&(o=0),new i.AdamaxOptimizer(e,t,r,n,o)},e.adagrad=function(e,t){return void 0===t&&(t=.1),new a.AdagradOptimizer(e,t)},d([n.doc({heading:"Training",subheading:"Optimizers",namespace:"train"})],e,"sgd",null),d([n.doc({heading:"Training",subheading:"Optimizers",namespace:"train"})],e,"momentum",null),d([n.doc({heading:"Training",subheading:"Optimizers",namespace:"train"})],e,"rmsprop",null),d([n.doc({heading:"Training",subheading:"Optimizers",namespace:"train"})],e,"adam",null),d([n.doc({heading:"Training",subheading:"Optimizers",namespace:"train"})],e,"adadelta",null),d([n.doc({heading:"Training",subheading:"Optimizers",namespace:"train"})],e,"adamax",null),d([n.doc({heading:"Training",subheading:"Optimizers",namespace:"train"})],e,"adagrad",null),e}(),t.OptimizerConstructors=p},630:function(e,t,r){"use strict";function n(e,t,r){a(e instanceof l.Tensor,"Argument '"+t+"' passed to '"+r+"' must be a Tensor, but got "+typeof e+".")}function o(e){for(var t=e.length,r=0,n=0;t>0;)n=Math.random()*t|0,r=e[--t],e[t]=e[n],e[n]=r}function a(e,t){if(!e)throw Error(t)}function s(e,t){if(void 0===t&&(t=[]),Array.isArray(e))for(var r=0;r<e.length;++r)s(e[r],t);else t.push(e);return t}function i(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function u(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function c(e){var t,r,n,o,a;if(null==e)return[];if(e instanceof l.Tensor)return[e];if(t=[],!Array.isArray(a=r=e)&&"object"!=typeof a)return[];for(n in r)o=s(r[n]).filter((function(e){return e instanceof l.Tensor})),t.push.apply(t,o);return t}Object.defineProperty(t,"__esModule",{value:!0});var l=r(712);t.assertArgumentsAreTensors=function(e,t){var r,o=function(r){var o=e[r];Array.isArray(o)?o.forEach((function(e,o){n(e,r+"["+o+"]",t)})):n(o,r,t)};for(r in e)o(r)},t.shuffle=o,t.clamp=function(e,t,r){return Math.max(e,Math.min(t,r))},t.randUniform=function(e,t){return Math.random()*(t-e)+e},t.distSquared=function(e,t){var r,n,o=0;for(r=0;r<e.length;r++)o+=(n=Number(e[r])-Number(t[r]))*n;return o},t.assert=a,t.assertShapesMatch=function(e,t,r){void 0===r&&(r=""),a(i(e,t),r+" Shapes "+e+" and "+t+" must match")},t.assertTypesMatch=function(e,t){a(e.dtype===t.dtype," The dtypes of the first("+e.dtype+") and second("+t.dtype+") input must match")},t.flatten=s,t.inferShape=function(e){if(u(e))return[e.length];if(!Array.isArray(e))return[];for(var t=[];e instanceof Array;)t.push(e.length),e=e[0];return t},t.sizeFromShape=function(e){var t,r;if(0===e.length)return 1;for(t=e[0],r=1;r<e.length;r++)t*=e[r];return t},t.isScalarShape=function(e){return 0===e.length},t.arraysEqual=i,t.isInt=function(e){return e%1==0},t.tanh=function(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)},t.sizeToSquarishShape=function(e){for(var t=Math.floor(Math.sqrt(e));t>1;--t)if(e%t==0)return[t,e/t];return[1,e]},t.createShuffledIndices=function(e){var t,r=new Uint32Array(e);for(t=0;t<e;++t)r[t]=t;return o(r),r},t.rightPad=function(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)},t.repeatedTry=function(e,t,r){return void 0===t&&(t=function(e){return 0}),new Promise((function(n,o){var a=0,s=function(){if(e())n();else{a++;var i=t(a);null!=r&&a>=r?o():setTimeout(s,i)}};setTimeout(s,0)}))},t.getQueryParams=function(e){var t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){var r,n=[];for(r=1;r<arguments.length;r++)n[r-1]=arguments[r];return function(e,t,r){e[decodeURIComponent(t)]=decodeURIComponent(r||"")}(t,n[0],n[1]),n.join("=")})),t},t.inferFromImplicitShape=function(e,t){var r,n,o=1,a=-1;for(r=0;r<e.length;++r)if(e[r]>0)o*=e[r];else if(-1===e[r]){if(-1!==a)throw Error("Shapes can only have 1 implicit size. Found - 1 at dim "+a+" and dim "+r);a=r}else if(e[r]<=0)throw Error("Shapes can not be <= 0. Found "+e[r]+" at dim "+r);if(-1===a){if(t>0&&t!==o)throw Error("Size("+t+") must match the product of shape "+e);return e}if(t%o!=0)throw Error("The implicit shape can't be a fractional number. Got "+t+" / "+o);return(n=e.slice())[a]=t/o,n},t.squeezeShape=function(e,t){var r,n=[],o=[],a=0;for(r=0;r<e.length;++r){if(null!=t){if(t[a]===r&&e[r]>1)throw Error("Can't squeeze axis "+r+" since its dim '"+e[r]+"' is not 1");(null==t[a]||t[a]>r)&&1===e[r]&&(n.push(e[r]),o.push(r)),t[a]<=r&&a++}e[r]>1&&(n.push(e[r]),o.push(r))}return{newShape:n,keptDims:o}},t.getTypedArrayFromDType=function(e,t){var r=null;if(null==e||"float32"===e)r=new Float32Array(t);else if("int32"===e)r=new Int32Array(t);else{if("bool"!==e)throw Error("Unknown data type "+e);r=new Uint8Array(t)}return r},t.isTensorInList=function(e,t){for(var r=0;r<t.length;r++)if(t[r].id===e.id)return!0;return!1},t.checkForNaN=function(e,t,r){if("float32"===t)for(var n=0;n<e.length;n++)if(isNaN(e[n]))throw Error("The result of the '"+r+"' has NaNs.")},t.flattenNameArrayMap=function(e,t){var r,n,o=[];if(e instanceof l.Tensor)o.push(e);else for(r=e,n=0;n<t.length;n++)o.push(r[t[n]]);return o},t.unflattenToNameArrayMap=function(e,t){var r,n;if(e.length!==t.length)throw Error("Cannot unflatten Tensor[], keys and arrays are not of same length.");for(r={},n=0;n<e.length;n++)r[e[n]]=t[n];return r},t.hasEncodingLoss=function(e,t){return!("float32"===t||"int32"===t&&"float32"!==e||"bool"===t&&"bool"===e)},t.copyTypedArray=function(e,t){var r,n;if(null==t||"float32"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(r=new Uint8Array(e.length),n=0;n<r.length;++n)0!==Math.round(e[n])&&(r[n]=1);return r}throw Error("Unknown data type "+t)},t.isTypedArray=u,t.bytesPerElement=function(e){if("float32"===e||"int32"===e)return 4;if("bool"===e)return 1;throw Error("Unknown dtype "+e)},t.isFunction=function(e){return!!(e&&e.constructor&&e.call&&e.apply)},t.extractTensorsFromContainer=function(e){return c(e)},t.extractTensorsFromAny=c},656:function(e,t,r){"use strict";var n,o,a,s,i,u,c,l,p,d,h,f,m,g,y,b,v,O,k,A,x,E,w;Object.defineProperty(t,"__esModule",{value:!0}),n=r(899),o=r(2147),a=r(1257),s=r(2148),i=r(1255),u=r(2149),c=r(2150),l=r(2151),p=r(1259),d=r(2152),h=r(2153),f=r(2154),m=r(2155),g=r(2156),y=r(2157),b=r(2158),v=r(2159),O=r(2160),k=r(2162),A=r(2163),x=r(2164),t.batchNormalization=o.BatchNormOps.batchNormalization,t.batchNormalization2d=o.BatchNormOps.batchNormalization2d,t.batchNormalization3d=o.BatchNormOps.batchNormalization3d,t.batchNormalization4d=o.BatchNormOps.batchNormalization4d,t.concat=i.ConcatOps.concat,t.concat1d=i.ConcatOps.concat1d,t.concat2d=i.ConcatOps.concat2d,t.concat3d=i.ConcatOps.concat3d,t.concat4d=i.ConcatOps.concat4d,t.conv1d=u.ConvOps.conv1d,t.conv2d=u.ConvOps.conv2d,t.conv2dTranspose=u.ConvOps.conv2dTranspose,t.depthwiseConv2d=u.ConvOps.depthwiseConv2d,t.separableConv2d=u.ConvOps.separableConv2d,t.matMul=f.MatmulOps.matMul,t.matrixTimesVector=f.MatmulOps.matrixTimesVector,t.outerProduct=f.MatmulOps.outerProduct,t.vectorTimesMatrix=f.MatmulOps.vectorTimesMatrix,t.avgPool=y.PoolOps.avgPool,t.maxPool=y.PoolOps.maxPool,t.transpose=A.TransposeOps.transpose,t.reverse=v.ReverseOps.reverse,t.reverse1d=v.ReverseOps.reverse1d,t.reverse2d=v.ReverseOps.reverse2d,t.reverse3d=v.ReverseOps.reverse3d,t.reverse4d=v.ReverseOps.reverse4d,t.slice=O.SliceOps.slice,t.slice1d=O.SliceOps.slice1d,t.slice2d=O.SliceOps.slice2d,t.slice3d=O.SliceOps.slice3d,t.slice4d=O.SliceOps.slice4d,t.argMax=b.ReductionOps.argMax,t.argMin=b.ReductionOps.argMin,t.logSumExp=b.ReductionOps.logSumExp,t.max=b.ReductionOps.max,t.mean=b.ReductionOps.mean,t.min=b.ReductionOps.min,t.moments=b.ReductionOps.moments,t.sum=b.ReductionOps.sum,t.equal=s.CompareOps.equal,t.equalStrict=s.CompareOps.equalStrict,t.greater=s.CompareOps.greater,t.greaterStrict=s.CompareOps.greaterStrict,t.greaterEqual=s.CompareOps.greaterEqual,t.greaterEqualStrict=s.CompareOps.greaterEqualStrict,t.less=s.CompareOps.less,t.lessStrict=s.CompareOps.lessStrict,t.lessEqual=s.CompareOps.lessEqual,t.lessEqualStrict=s.CompareOps.lessEqualStrict,t.notEqual=s.CompareOps.notEqual,t.notEqualStrict=s.CompareOps.notEqualStrict,t.logicalNot=l.LogicalOps.logicalNot,t.logicalAnd=l.LogicalOps.logicalAnd,t.logicalOr=l.LogicalOps.logicalOr,t.logicalXor=l.LogicalOps.logicalXor,t.where=l.LogicalOps.where,t.abs=x.UnaryOps.abs,t.acos=x.UnaryOps.acos,t.acosh=x.UnaryOps.acosh,t.asin=x.UnaryOps.asin,t.asinh=x.UnaryOps.asinh,t.atan=x.UnaryOps.atan,t.atanh=x.UnaryOps.atanh,t.ceil=x.UnaryOps.ceil,t.clipByValue=x.UnaryOps.clipByValue,t.cos=x.UnaryOps.cos,t.cosh=x.UnaryOps.cosh,t.elu=x.UnaryOps.elu,t.exp=x.UnaryOps.exp,t.expm1=x.UnaryOps.expm1,t.floor=x.UnaryOps.floor,t.sign=x.UnaryOps.sign,t.leakyRelu=x.UnaryOps.leakyRelu,t.log=x.UnaryOps.log,t.log1p=x.UnaryOps.log1p,t.logSigmoid=x.UnaryOps.logSigmoid,t.neg=x.UnaryOps.neg,t.prelu=x.UnaryOps.prelu,t.relu=x.UnaryOps.relu,t.reciprocal=x.UnaryOps.reciprocal,t.round=x.UnaryOps.round,t.selu=x.UnaryOps.selu,t.sigmoid=x.UnaryOps.sigmoid,t.sin=x.UnaryOps.sin,t.sinh=x.UnaryOps.sinh,t.softplus=x.UnaryOps.softplus,t.sqrt=x.UnaryOps.sqrt,t.rsqrt=x.UnaryOps.rsqrt,t.square=x.UnaryOps.square,t.step=x.UnaryOps.step,t.tan=x.UnaryOps.tan,t.tanh=x.UnaryOps.tanh,t.erf=x.UnaryOps.erf,t.add=a.BinaryOps.add,t.addStrict=a.BinaryOps.addStrict,t.atan2=a.BinaryOps.atan2,t.div=a.BinaryOps.div,t.divStrict=a.BinaryOps.divStrict,t.maximum=a.BinaryOps.maximum,t.maximumStrict=a.BinaryOps.maximumStrict,t.minimum=a.BinaryOps.minimum,t.minimumStrict=a.BinaryOps.minimumStrict,t.mod=a.BinaryOps.mod,t.modStrict=a.BinaryOps.modStrict,t.mul=a.BinaryOps.mul,t.mulStrict=a.BinaryOps.mulStrict,t.pow=a.BinaryOps.pow,t.powStrict=a.BinaryOps.powStrict,t.sub=a.BinaryOps.sub,t.subStrict=a.BinaryOps.subStrict,t.squaredDifference=a.BinaryOps.squaredDifference,t.squaredDifferenceStrict=a.BinaryOps.squaredDifferenceStrict,t.norm=g.NormOps.norm,t.cast=n.ArrayOps.cast,t.clone=n.ArrayOps.clone,t.fromPixels=n.ArrayOps.fromPixels,t.toPixels=n.ArrayOps.toPixels,t.ones=n.ArrayOps.ones,t.onesLike=n.ArrayOps.onesLike,t.zeros=n.ArrayOps.zeros,t.zerosLike=n.ArrayOps.zerosLike,t.rand=n.ArrayOps.rand,t.randomNormal=n.ArrayOps.randomNormal,t.truncatedNormal=n.ArrayOps.truncatedNormal,t.randomUniform=n.ArrayOps.randomUniform,t.multinomial=n.ArrayOps.multinomial,t.reshape=n.ArrayOps.reshape,t.squeeze=n.ArrayOps.squeeze,t.tile=n.ArrayOps.tile,t.gather=n.ArrayOps.gather,t.oneHot=n.ArrayOps.oneHot,t.linspace=n.ArrayOps.linspace,t.range=n.ArrayOps.range,t.buffer=n.ArrayOps.buffer,t.fill=n.ArrayOps.fill,t.tensor=n.ArrayOps.tensor,t.scalar=n.ArrayOps.scalar,t.tensor1d=n.ArrayOps.tensor1d,t.tensor2d=n.ArrayOps.tensor2d,t.tensor3d=n.ArrayOps.tensor3d,t.tensor4d=n.ArrayOps.tensor4d,t.print=n.ArrayOps.print,t.expandDims=n.ArrayOps.expandDims,t.stack=n.ArrayOps.stack,t.split=n.ArrayOps.split,t.pad=n.ArrayOps.pad,t.pad1d=n.ArrayOps.pad1d,t.pad2d=n.ArrayOps.pad2d,t.pad3d=n.ArrayOps.pad3d,t.pad4d=n.ArrayOps.pad4d,t.movingAverage=m.MovingAverageOps.movingAverage,t.basicLSTMCell=h.LSTMOps.basicLSTMCell,t.multiRNNCell=h.LSTMOps.multiRNNCell,t.softmax=k.SoftmaxOps.softmax,t.localResponseNormalization=d.LRNOps.localResponseNormalization,E=r(712),w=r(756),E.Tensor,w.Rank,p.Reduction,t.losses={softmaxCrossEntropy:k.SoftmaxOps.softmaxCrossEntropy,absoluteDifference:p.LossOps.absoluteDifference,computeWeightedLoss:p.LossOps.computeWeightedLoss},t.image={resizeBilinear:c.ImageOps.resizeBilinear,resizeNearestNeighbor:c.ImageOps.resizeNearestNeighbor}},660:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(679);t.operation=function(e,t,r){var o=r.value;return r.value=function(){var e,r=[];for(e=0;e<arguments.length;e++)r[e]=arguments[e];return n.tidy(t,(function(){return o.apply(void 0,r)}))},r}},712:function(e,t,r){"use strict";function n(e){var t,r,n=e.length;if(n<2)return[];for((t=Array(n-1))[n-2]=e[n-1],r=n-3;r>=0;--r)t[r]=t[r+1]*e[r+1];return t}var o,a,s,i,u,c,l,p,d,h,f=this&&this.__extends||(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}h(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),m=this&&this.__decorate||function(e,t,r,n){var o,a,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i},g=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function s(e){try{u(n.next(e))}catch(t){a(t)}}function i(e){try{u(n.throw(e))}catch(t){a(t)}}function u(e){e.done?o(e.value):new r((function(t){t(e.value)})).then(s,i)}u((n=n.apply(e,t||[])).next())}))},y=this&&this.__generator||function(e,t){function r(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(a=o[2&r[0]?"return":r[0]?"throw":"next"])&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[0,a.value]),r[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,o=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==r[0]&&2!==r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(s){r=[6,s],o=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}var n,o,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0}),o=r(638),a=r(632),s=r(656),i=r(1254),u=r(630),c=function(){function e(e,t,r){var o,a;this.dtype=t,null!=r&&(o=r.length,a=u.sizeFromShape(e),u.assert(o===a,"Length of values '"+o+"' does not match the size inferred by the shape '"+a+"'")),this.shape=e.slice(),this.values=r||u.getTypedArrayFromDType(t,u.sizeFromShape(e)),this.strides=n(e),this.size=u.sizeFromShape(e)}return e.prototype.set=function(e){var t,r,n=[];for(t=1;t<arguments.length;t++)n[t-1]=arguments[t];0===n.length&&(n=[0]),u.assert(n.length===this.rank,"The number of provided coordinates ("+n.length+") must match the rank ("+this.rank+")"),r=this.locToIndex(n),this.values[r]=e},e.prototype.get=function(){var e,t,r,n=[];for(e=0;e<arguments.length;e++)n[e]=arguments[e];for(0===n.length&&(n=[0]),t=n[n.length-1],r=0;r<n.length-1;++r)t+=this.strides[r]*n[r];return this.values[t]},e.prototype.locToIndex=function(e){var t,r;if(0===this.rank)return 0;if(1===this.rank)return e[0];for(t=e[e.length-1],r=0;r<e.length-1;++r)t+=this.strides[r]*e[r];return t},e.prototype.indexToLoc=function(e){var t,r;if(0===this.rank)return[];if(1===this.rank)return[e];for(t=Array(this.shape.length),r=0;r<t.length-1;++r)t[r]=Math.floor(e/this.strides[r]),e-=t[r]*this.strides[r];return t[t.length-1]=e,t},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.toTensor=function(){return l.make(this.shape,{values:this.values},this.dtype)},m([o.doc({heading:"Tensors",subheading:"Creation"})],e.prototype,"set",null),m([o.doc({heading:"Tensors",subheading:"Creation"})],e.prototype,"get",null),m([o.doc({heading:"Tensors",subheading:"Creation"})],e.prototype,"toTensor",null),m([o.doc({heading:"Tensors",subheading:"Classes"})],e)}(),t.TensorBuffer=c,l=function(){function e(e,r,o,s){this.isDisposed=!1,this.size=u.sizeFromShape(e),null!=o&&u.assert(this.size===o.length,"Constructing tensor of shape ("+this.size+") should match the length of values ("+o.length+")"),this.shape=e.slice(),this.dtype=r||"float32",this.strides=n(e),this.dataId=null!=s?s:{},this.id=t.nextId++,this.rankType=this.rank<5?this.rank.toString():"higher",a.ENV.engine.registerTensor(this),null!=o&&a.ENV.engine.write(this.dataId,o)}return t=e,e.make=function(e,r,n){return new t(e,n,r.values,r.dataId)},e.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},e.prototype.asScalar=function(){return this.throwIfDisposed(),u.assert(1===this.size,"The array must have only 1 element."),this.reshape([])},e.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},e.prototype.as2D=function(e,t){return this.throwIfDisposed(),this.reshape([e,t])},e.prototype.as3D=function(e,t,r){return this.throwIfDisposed(),this.reshape([e,t,r])},e.prototype.as4D=function(e,t,r,n){return this.throwIfDisposed(),this.reshape([e,t,r,n])},e.prototype.asType=function(e){return this.throwIfDisposed(),s.cast(this,e)},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.get=function(){var e,t,r,n=[];for(e=0;e<arguments.length;e++)n[e]=arguments[e];for(u.assert(n.length===this.rank,"Number of coordinates in get() must match the rank of the tensor"),this.throwIfDisposed(),0===n.length&&(n=[0]),t=n[n.length-1],r=0;r<n.length-1;++r)t+=this.strides[r]*n[r];return this.dataSync()[t]},e.prototype.buffer=function(){return s.buffer(this.shape,this.dtype,this.dataSync())},e.prototype.data=function(){return g(this,void 0,void 0,(function(){return y(this,(function(e){return this.throwIfDisposed(),[2,a.ENV.engine.read(this.dataId)]}))}))},e.prototype.dataSync=function(){return this.throwIfDisposed(),a.ENV.engine.readSync(this.dataId)},e.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,a.ENV.engine.disposeTensor(this))},e.prototype.throwIfDisposed=function(){if(this.isDisposed)throw Error("Tensor is disposed.")},e.prototype.toFloat=function(){return this.asType("float32")},e.prototype.toInt=function(){return this.asType("int32")},e.prototype.toBool=function(){return this.asType("bool")},e.prototype.print=function(e){return void 0===e&&(e=!1),s.print(this,e)},e.prototype.reshape=function(e){return this.throwIfDisposed(),s.reshape(this,e)},e.prototype.reshapeAs=function(e){return this.throwIfDisposed(),this.reshape(e.shape)},e.prototype.expandDims=function(e){return void 0===e&&(e=0),s.expandDims(this,e)},e.prototype.squeeze=function(e){return this.throwIfDisposed(),s.squeeze(this,e)},e.prototype.clone=function(){return this.throwIfDisposed(),s.clone(this)},e.prototype.toString=function(e){return void 0===e&&(e=!1),i.tensorToString(this,e)},e.prototype.tile=function(e){return this.throwIfDisposed(),s.tile(this,e)},e.prototype.gather=function(e,t){return void 0===t&&(t=0),this.throwIfDisposed(),s.gather(this,e,t)},e.prototype.matMul=function(e,t,r){return void 0===t&&(t=!1),void 0===r&&(r=!1),this.throwIfDisposed(),s.matMul(this,e,t,r)},e.prototype.norm=function(e,t,r){return void 0===e&&(e="euclidean"),void 0===t&&(t=null),void 0===r&&(r=!1),this.throwIfDisposed(),s.norm(this,e,t,r)},e.prototype.slice=function(e,t){return this.throwIfDisposed(),s.slice(this,e,t)},e.prototype.reverse=function(e){return this.throwIfDisposed(),s.reverse(this,e)},e.prototype.concat=function(e,t){return void 0===t&&(t=0),this.throwIfDisposed(),s.concat([this,e],t)},e.prototype.stack=function(e,t){return void 0===t&&(t=0),s.stack([this,e],t)},e.prototype.pad=function(e,t){return void 0===t&&(t=0),s.pad(this,e,t)},e.prototype.batchNormalization=function(e,t,r,n,o){return void 0===r&&(r=.001),this.throwIfDisposed(),s.batchNormalization(this,e,t,r,n,o)},e.prototype.logSumExp=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),s.logSumExp(this,e,t)},e.prototype.sum=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),s.sum(this,e,t)},e.prototype.mean=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),s.mean(this,e,t)},e.prototype.min=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),s.min(this,e,t)},e.prototype.max=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),s.max(this,e,t)},e.prototype.argMin=function(e){return void 0===e&&(e=null),this.throwIfDisposed(),s.argMin(this,e)},e.prototype.argMax=function(e){return void 0===e&&(e=null),this.throwIfDisposed(),s.argMax(this,e)},e.prototype.cast=function(e){return this.throwIfDisposed(),s.cast(this,e)},e.prototype.add=function(e){return this.throwIfDisposed(),s.add(this,e)},e.prototype.addStrict=function(e){return this.throwIfDisposed(),s.addStrict(this,e)},e.prototype.sub=function(e){return this.throwIfDisposed(),s.sub(this,e)},e.prototype.subStrict=function(e){return this.throwIfDisposed(),s.subStrict(this,e)},e.prototype.pow=function(e){return this.throwIfDisposed(),s.pow(this,e)},e.prototype.powStrict=function(e){return this.throwIfDisposed(),s.powStrict(this,e)},e.prototype.mul=function(e){return this.throwIfDisposed(),s.mul(this,e)},e.prototype.mulStrict=function(e){return this.throwIfDisposed(),s.mulStrict(this,e)},e.prototype.div=function(e){return this.throwIfDisposed(),s.div(this,e)},e.prototype.divStrict=function(e){return this.throwIfDisposed(),s.divStrict(this,e)},e.prototype.minimum=function(e){return this.throwIfDisposed(),s.minimum(this,e)},e.prototype.minimumStrict=function(e){return this.throwIfDisposed(),s.minimumStrict(this,e)},e.prototype.maximum=function(e){return this.throwIfDisposed(),s.maximum(this,e)},e.prototype.maximumStrict=function(e){return this.throwIfDisposed(),s.maximumStrict(this,e)},e.prototype.mod=function(e){return this.throwIfDisposed(),s.mod(this,e)},e.prototype.modStrict=function(e){return this.throwIfDisposed(),s.modStrict(this,e)},e.prototype.squaredDifference=function(e){return this.throwIfDisposed(),s.squaredDifference(this,e)},e.prototype.squaredDifferenceStrict=function(e){return this.throwIfDisposed(),s.squaredDifferenceStrict(this,e)},e.prototype.transpose=function(e){return this.throwIfDisposed(),s.transpose(this,e)},e.prototype.notEqual=function(e){return this.throwIfDisposed(),s.notEqual(this,e)},e.prototype.notEqualStrict=function(e){return this.throwIfDisposed(),s.notEqualStrict(this,e)},e.prototype.less=function(e){return this.throwIfDisposed(),s.less(this,e)},e.prototype.lessStrict=function(e){return this.throwIfDisposed(),s.lessStrict(this,e)},e.prototype.equal=function(e){return this.throwIfDisposed(),s.equal(this,e)},e.prototype.equalStrict=function(e){return this.throwIfDisposed(),s.equalStrict(this,e)},e.prototype.lessEqual=function(e){return this.throwIfDisposed(),s.lessEqual(this,e)},e.prototype.lessEqualStrict=function(e){return this.throwIfDisposed(),s.lessEqualStrict(this,e)},e.prototype.greater=function(e){return this.throwIfDisposed(),s.greater(this,e)},e.prototype.greaterStrict=function(e){return this.throwIfDisposed(),s.greaterStrict(this,e)},e.prototype.greaterEqual=function(e){return this.throwIfDisposed(),s.greaterEqual(this,e)},e.prototype.greaterEqualStrict=function(e){return this.throwIfDisposed(),s.greaterEqualStrict(this,e)},e.prototype.logicalAnd=function(e){return this.throwIfDisposed(),s.logicalAnd(this,e)},e.prototype.logicalOr=function(e){return this.throwIfDisposed(),s.logicalOr(this,e)},e.prototype.logicalNot=function(){return this.throwIfDisposed(),s.logicalNot(this)},e.prototype.logicalXor=function(e){return this.throwIfDisposed(),s.logicalXor(this,e)},e.prototype.where=function(e,t){return this.throwIfDisposed(),s.where(e,this,t)},e.prototype.neg=function(){return this.throwIfDisposed(),s.neg(this)},e.prototype.ceil=function(){return this.throwIfDisposed(),s.ceil(this)},e.prototype.floor=function(){return this.throwIfDisposed(),s.floor(this)},e.prototype.sign=function(){return this.throwIfDisposed(),s.sign(this)},e.prototype.exp=function(){return this.throwIfDisposed(),s.exp(this)},e.prototype.expm1=function(){return this.throwIfDisposed(),s.expm1(this)},e.prototype.log=function(){return this.throwIfDisposed(),s.log(this)},e.prototype.log1p=function(){return this.throwIfDisposed(),s.log1p(this)},e.prototype.sqrt=function(){return this.throwIfDisposed(),s.sqrt(this)},e.prototype.rsqrt=function(){return this.throwIfDisposed(),s.rsqrt(this)},e.prototype.square=function(){return this.throwIfDisposed(),s.square(this)},e.prototype.reciprocal=function(){return this.throwIfDisposed(),s.reciprocal(this)},e.prototype.abs=function(){return this.throwIfDisposed(),s.abs(this)},e.prototype.clipByValue=function(e,t){return this.throwIfDisposed(),s.clipByValue(this,e,t)},e.prototype.relu=function(){return this.throwIfDisposed(),s.relu(this)},e.prototype.elu=function(){return this.throwIfDisposed(),s.elu(this)},e.prototype.selu=function(){return this.throwIfDisposed(),s.selu(this)},e.prototype.leakyRelu=function(e){return void 0===e&&(e=.2),this.throwIfDisposed(),s.leakyRelu(this,e)},e.prototype.prelu=function(e){return this.throwIfDisposed(),s.prelu(this,e)},e.prototype.sigmoid=function(){return this.throwIfDisposed(),s.sigmoid(this)},e.prototype.logSigmoid=function(){return this.throwIfDisposed(),s.logSigmoid(this)},e.prototype.softplus=function(){return this.throwIfDisposed(),s.softplus(this)},e.prototype.sin=function(){return this.throwIfDisposed(),s.sin(this)},e.prototype.cos=function(){return this.throwIfDisposed(),s.cos(this)},e.prototype.tan=function(){return this.throwIfDisposed(),s.tan(this)},e.prototype.asin=function(){return this.throwIfDisposed(),s.asin(this)},e.prototype.acos=function(){return this.throwIfDisposed(),s.acos(this)},e.prototype.atan=function(){return this.throwIfDisposed(),s.atan(this)},e.prototype.sinh=function(){return this.throwIfDisposed(),s.sinh(this)},e.prototype.cosh=function(){return this.throwIfDisposed(),s.cosh(this)},e.prototype.tanh=function(){return this.throwIfDisposed(),s.tanh(this)},e.prototype.asinh=function(){return this.throwIfDisposed(),s.asinh(this)},e.prototype.acosh=function(){return this.throwIfDisposed(),s.acosh(this)},e.prototype.atanh=function(){return this.throwIfDisposed(),s.atanh(this)},e.prototype.erf=function(){return this.throwIfDisposed(),s.erf(this)},e.prototype.step=function(e){return void 0===e&&(e=0),this.throwIfDisposed(),s.step(this,e)},e.prototype.softmax=function(e){return void 0===e&&(e=-1),this.throwIfDisposed(),s.softmax(this,e)},e.prototype.resizeBilinear=function(e,t){return void 0===t&&(t=!1),this.throwIfDisposed(),s.image.resizeBilinear(this,e,t)},e.prototype.resizeNearestNeighbor=function(e,t){return void 0===t&&(t=!1),this.throwIfDisposed(),s.image.resizeNearestNeighbor(this,e,t)},e.prototype.conv1d=function(e,t,r,n,o,a){return void 0===n&&(n="NWC"),void 0===o&&(o=1),this.throwIfDisposed(),s.conv1d(this,e,t,r,n,o,a)},e.prototype.conv2d=function(e,t,r,n,o,a){return void 0===n&&(n="NHWC"),void 0===o&&(o=[1,1]),this.throwIfDisposed(),s.conv2d(this,e,t,r,n,o,a)},e.prototype.conv2dTranspose=function(e,t,r,n,o){return this.throwIfDisposed(),s.conv2dTranspose(this,e,t,r,n,o)},e.prototype.depthwiseConv2D=function(e,t,r,n,o,a){return void 0===n&&(n="NHWC"),void 0===o&&(o=[1,1]),this.throwIfDisposed(),s.depthwiseConv2d(this,e,t,r,n,o,a)},e.prototype.avgPool=function(e,t,r,n){return this.throwIfDisposed(),s.avgPool(this,e,t,r,n)},e.prototype.maxPool=function(e,t,r,n){return this.throwIfDisposed(),s.maxPool(this,e,t,r,n)},e.prototype.localResponseNormalization=function(e,t,r,n){return void 0===e&&(e=5),void 0===t&&(t=1),void 0===r&&(r=1),void 0===n&&(n=.5),s.localResponseNormalization(this,e,t,r,n)},e.prototype.variable=function(e,t,r){return void 0===e&&(e=!0),this.throwIfDisposed(),p.variable(this,e,t,r)},e.nextId=0,m([o.doc({heading:"Tensors",subheading:"Classes"})],e.prototype,"flatten",null),m([o.doc({heading:"Tensors",subheading:"Classes"})],e.prototype,"asScalar",null),m([o.doc({heading:"Tensors",subheading:"Classes"})],e.prototype,"as1D",null),m([o.doc({heading:"Tensors",subheading:"Classes"})],e.prototype,"as2D",null),m([o.doc({heading:"Tensors",subheading:"Classes"})],e.prototype,"as3D",null),m([o.doc({heading:"Tensors",subheading:"Classes"})],e.prototype,"as4D",null),m([o.doc({heading:"Tensors",subheading:"Classes"})],e.prototype,"asType",null),m([o.doc({heading:"Tensors",subheading:"Classes"})],e.prototype,"buffer",null),m([o.doc({heading:"Tensors",subheading:"Classes"})],e.prototype,"data",null),m([o.doc({heading:"Tensors",subheading:"Classes"})],e.prototype,"dataSync",null),m([o.doc({heading:"Tensors",subheading:"Classes"})],e.prototype,"dispose",null),m([o.doc({heading:"Tensors",subheading:"Classes"})],e.prototype,"toFloat",null),m([o.doc({heading:"Tensors",subheading:"Classes"})],e.prototype,"toInt",null),m([o.doc({heading:"Tensors",subheading:"Classes"})],e.prototype,"toBool",null),m([o.doc({heading:"Tensors",subheading:"Classes"})],e.prototype,"print",null),m([o.doc({heading:"Tensors",subheading:"Classes"})],e.prototype,"reshape",null),m([o.doc({heading:"Tensors",subheading:"Classes"})],e.prototype,"reshapeAs",null),m([o.doc({heading:"Tensors",subheading:"Classes"})],e.prototype,"expandDims",null),m([o.doc({heading:"Tensors",subheading:"Classes"})],e.prototype,"squeeze",null),m([o.doc({heading:"Tensors",subheading:"Classes"})],e.prototype,"clone",null),m([o.doc({heading:"Tensors",subheading:"Classes"})],e.prototype,"toString",null),t=m([o.doc({heading:"Tensors",subheading:"Classes"})],e);var t}(),t.Tensor=l,p=function(e){function t(t,n,o){void 0===n&&(n=!0);var s=e.call(this,t.shape,t.dtype,null,t.dataId)||this;return s.trainable=n,s.name=o,null==s.name&&(s.name=r.nextVarId.toString(),r.nextVarId++),a.ENV.engine.registerVariable(s),s}return f(t,e),r=t,t.variable=function(e,t,n,o){return void 0===t&&(t=!0),null!=o&&o!==e.dtype&&(e=e.asType(o)),new r(e,t,n)},t.prototype.assign=function(e){if(e.dtype!==this.dtype)throw Error("dtype of the new value ("+e.dtype+") and previous value ("+this.dtype+") must match");if(!u.arraysEqual(e.shape,this.shape))throw Error("shape of the new value ("+e.shape+") and previous value ("+this.shape+") must match");a.ENV.engine.disposeTensor(this),this.dataId=e.dataId,a.ENV.engine.registerTensor(this)},t.nextVarId=0,m([o.doc({heading:"Tensors",subheading:"Classes"})],t.prototype,"assign",null),m([o.doc({heading:"Tensors",subheading:"Creation"})],t,"variable",null),r=m([o.doc({heading:"Tensors",subheading:"Classes"})],t);var r}(l),t.Variable=p,d=p.variable,t.variable=d},713:function(e,t,r){"use strict";function n(e,t){for(var r=0;r<e.length;++r)if(e[e.length-r-1]!==t-1-r)return!1;return!0}function o(e,t,r){var n,o=e.length+t.length,a=[],s=0,i=0;for(n=0;n<o;n++)-1===r.indexOf(n)?a.push(e[s++]):a.push(t[i++]);return a}Object.defineProperty(t,"__esModule",{value:!0});var a=r(630);t.axesAreInnerMostDims=n,t.combineLocations=o,t.computeOutAndReduceShapes=function(e,t){var r,n,o=[],a=e.length;for(r=0;r<a;r++)-1===t.indexOf(r)&&o.push(e[r]);return n=t.map((function(t){return e[t]})),[o,n]},t.expandShapeToKeepDim=function(e,t){return o(e,t.map((function(e){return 1})),t)},t.parseAxisParam=function(e,t){var r=t.length;return e=null==e?t.map((function(e,t){return t})):[].concat(e),a.assert(e.every((function(e){return e>=-r&&e<r})),"All values in axis param must be in range [-"+r+", "+r+") but got axis "+e),a.assert(e.every((function(e){return a.isInt(e)})),"All values in axis param must be integers but got axis "+e),e.map((function(e){return e<0?r+e:e}))},t.assertAxesAreInnerMostDims=function(e,t,r){a.assert(n(t,r),e+" supports only inner-most axes for now. Got axes "+t+" and rank-"+r+" input.")},t.getAxesPermutation=function(e,t){var r,o;if(n(e,t))return null;for(r=[],o=0;o<t;++o)-1===e.indexOf(o)&&r.push(o);return e.forEach((function(e){return r.push(e)})),r},t.getUndoAxesPermutation=function(e){return e.map((function(e,t){return[t,e]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))},t.getInnerMostAxes=function(e,t){var r,n=[];for(r=t-e;r<t;++r)n.push(r);return n}},731:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBroadcastDims=function(e,t){var r,n,o,a=e.length,s=[];for(r=0;r<a;r++)o=e[n=a-1-r]||1,(t[t.length-1-r]||1)>1&&1===o&&s.unshift(n);return s},t.getReductionAxes=function(e,t){var r,n,o,a,s=[];for(r=0;r<t.length;r++)n=e[e.length-r-1],a=t[o=t.length-r-1],(null==n||1===n&&a>1)&&s.unshift(o);return s},t.broadcastDimsAreOuter=function(e){for(var t=0;t<e.length;t++)if(e[t]!==t)return!1;return!0},t.assertAndGetBroadcastShape=function(e,t){var r,n,o,a=[],s="Operands could not be broadcast together with shapes "+e+" and "+t+".",i=Math.max(e.length,t.length);for(r=0;r<i;r++){if(n=e[e.length-r-1]||1,o=t[t.length-r-1]||1,n>1&&o>1&&n!==o)throw Error(s);a.unshift(Math.max(n,o))}return a}},756:function(e,t,r){"use strict";function n(e,t){return i[e][t]}var o,a,s,i,u,c;Object.defineProperty(t,"__esModule",{value:!0}),(c=t.DType||(t.DType={})).float32="float32",c.int32="int32",c.bool="bool",(u=t.Rank||(t.Rank={})).R0="R0",u.R1="R1",u.R2="R2",u.R3="R3",u.R4="R4",function(e){e.float32="float32",e.int32="int32",e.bool="int32"}(o||(o={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool"}(a||(a={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32"}(s||(s={})),i={float32:s,int32:o,bool:a},t.upcastType=n,t.sumOutType=function(e){return n(e,"int32")}},757:function(e,t,r){"use strict";var n,o,a,s=this&&this.__decorate||function(e,t,r,n){var o,a,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(t,"__esModule",{value:!0}),n=r(638),o=r(679),a=function(){function e(){}return e.prototype.minimize=function(e,t,r){var n,o,a;return void 0===t&&(t=!1),o=(n=this.computeGradients(e,r)).value,a=n.grads,this.applyGradients(a),Object.keys(a).forEach((function(e){return a[e].dispose()})),t?o:(o.dispose(),null)},e.prototype.computeGradients=function(e,t){return o.variableGrads(e,t)},s([n.doc({heading:"Training",subheading:"Optimizers"})],e.prototype,"minimize",null),s([n.doc({heading:"Training",subheading:"Classes",namespace:"train"})],e)}(),t.Optimizer=a},899:function(e,t,r){"use strict";function n(e,t){if(null==t||"float32"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw Error("Unknown data type $ {dtype}")}function o(e,t){return function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t)?e:(Array.isArray(e)&&(e=c.flatten(e)),c.copyTypedArray(e,t))}var a,s,i,u,c,l,p,d,h,f,m=this&&this.__decorate||function(e,t,r,n){var o,a,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i},g=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function s(e){try{u(n.next(e))}catch(t){a(t)}}function i(e){try{u(n.throw(e))}catch(t){a(t)}}function u(e){e.done?o(e.value):new r((function(t){t(e.value)})).then(s,i)}u((n=n.apply(e,t||[])).next())}))},y=this&&this.__generator||function(e,t){function r(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(a=o[2&r[0]?"return":r[0]?"throw":"next"])&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[0,a.value]),r[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,o=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==r[0]&&2!==r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(s){r=[6,s],o=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}var n,o,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0}),a=r(638),s=r(632),i=r(712),u=r(1254),c=r(630),l=r(713),p=r(1255),d=r(660),h=r(2138),f=function(){function e(){}return e.tensor=function(e,t,r){void 0===r&&(r="float32");var n=c.inferShape(e);return null!=t&&1!==n.length&&c.assertShapesMatch(t,n,"Error creating a new Tensor. Inferred shape ("+n+") does not match the provided shape ("+t+"). "),c.isTypedArray(e)||Array.isArray(e)||(e=[e]),t=t||n,i.Tensor.make(t,{values:o(e,r)},r)},e.scalar=function(t,r){if(void 0===r&&(r="float32"),c.isTypedArray(t)||Array.isArray(t))throw Error("Error creating a new Scalar: value must be a primitive (number|boolean)");return e.tensor(t,[],r)},e.tensor1d=function(t,r){void 0===r&&(r="float32");var n=c.inferShape(t);if(1!==n.length)throw Error("tensor1d() requires values to be a flat/TypedArray");return e.tensor(t,n,r)},e.tensor2d=function(t,r,n){void 0===n&&(n="float32");var o=c.inferShape(t);if(2!==o.length&&1!==o.length)throw Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===o.length&&null==r)throw Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return r=r||o,e.tensor(t,r,n)},e.tensor3d=function(t,r,n){void 0===n&&(n="float32");var o=c.inferShape(t);if(3!==o.length&&1!==o.length)throw Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===o.length&&null==r)throw Error("tensor3d() requires shape to be provided when `values` are a flat array");return r=r||o,e.tensor(t,r,n)},e.tensor4d=function(t,r,n){void 0===n&&(n="float32");var o=c.inferShape(t);if(4!==o.length&&1!==o.length)throw Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===o.length&&null==r)throw Error("tensor4d() requires shape to be provided when `values` are a flat array");return r=r||o,e.tensor(t,r,n)},e.ones=function(e,t){void 0===t&&(t="float32");var r=function(e,t){var r,o=n(e,t);for(r=0;r<o.length;r++)o[r]=1;return o}(c.sizeFromShape(e),t);return i.Tensor.make(e,{values:r},t)},e.zeros=function(e,t){void 0===t&&(t="float32");var r=n(c.sizeFromShape(e),t);return i.Tensor.make(e,{values:r},t)},e.fill=function(e,t,r){void 0===r&&(r="float32");var n=c.getTypedArrayFromDType(r,c.sizeFromShape(e));return n.fill(t),i.Tensor.make(e,{values:n},r)},e.onesLike=function(t){return c.assertArgumentsAreTensors({x:t},"onesLike"),e.ones(t.shape,t.dtype)},e.zerosLike=function(t){return c.assertArgumentsAreTensors({x:t},"zerosLike"),e.zeros(t.shape,t.dtype)},e.clone=function(e){return c.assertArgumentsAreTensors({x:e},"clone"),s.ENV.engine.runKernel((function(t){return i.Tensor.make(e.shape,{dataId:e.dataId},e.dtype)}),{x:e},(function(e){return{x:function(){return e.toFloat()}}}))},e.randomNormal=function(t,r,n,o,a){var s,i,u;if(void 0===r&&(r=0),void 0===n&&(n=1),null!=o&&"bool"===o)throw Error("Unsupported data type "+o);for(s=new h.MPRandGauss(r,n,o,!1,a),i=e.buffer(t,o),u=0;u<i.values.length;u++)i.values[u]=s.nextValue();return i.toTensor()},e.truncatedNormal=function(t,r,n,o,a){var s,i,u;if(void 0===r&&(r=0),void 0===n&&(n=1),null!=o&&"bool"===o)throw Error("Unsupported data type "+o);for(s=new h.MPRandGauss(r,n,o,!0,a),i=e.buffer(t,o),u=0;u<i.values.length;u++)i.values[u]=s.nextValue();return i.toTensor()},e.randomUniform=function(t,r,n,o){var a,s;for(void 0===r&&(r=0),void 0===n&&(n=1),void 0===o&&(o="float32"),a=e.buffer(t,o),s=0;s<a.values.length;s++)a.values[s]=c.randUniform(r,n);return a.toTensor()},e.rand=function(e,t,r){var n,o=c.sizeFromShape(e),a=null;if(null==r||"float32"===r)a=new Float32Array(o);else if("int32"===r)a=new Int32Array(o);else{if("bool"!==r)throw Error("Unknown data type "+r);a=new Uint8Array(o)}for(n=0;n<o;n++)a[n]=t();return i.Tensor.make(e,{values:a},r)},e.multinomial=function(e,t,r,n){var o,a,i,u;if(void 0===n&&(n=!1),c.assertArgumentsAreTensors({logits:e},"multinomial"),o=e.size,a=e.rank,o<2)throw Error("Error in multinomial: you need at least 2 outcomes, but got "+o+".");if(a>2)throw Error("Rank of probabilities must be 1 or 2, but is "+a);return r=r||Math.random(),i=1===a?e.as2D(1,-1):e,u=s.ENV.engine.runKernel((function(e){return e.multinomial(i,n,t,r)}),{logits2D:i}),1===a?u.as1D():u},e.oneHot=function(e,t,r,n){if(void 0===r&&(r=1),void 0===n&&(n=0),c.assert("int32"===e.dtype,"Indices must be of dtype `int32`"),t<2)throw Error("Error in oneHot: depth must be >=2, but it is "+t);return s.ENV.engine.runKernel((function(o){return o.oneHot(e,t,r,n)}),{indices:e})},e.fromPixels=function(e,t){if(void 0===t&&(t=3),t>4)throw Error("Cannot construct Tensor with more than 4 channels from pixels.");return s.ENV.engine.fromPixels(e,t)},e.toPixels=function(e,t){return g(this,void 0,void 0,(function(){var r,n,o,a,s,i,u,l,p,d,h,f,m,g,b,v,O;return y(this,(function(y){switch(y.label){case 0:if(c.assertArgumentsAreTensors({img:e},"toPixels"),2!==e.rank&&3!==e.rank)throw Error("toPixels only supports rank 2 or 3 tensors, got rank "+e.rank+".");if(r=e.shape.slice(0,2),n=r[0],o=r[1],(a=2===e.rank?1:e.shape[2])>4||2===a)throw Error("toPixels only supports depth of size 1, 3 or 4 but got "+a);return[4,e.min().data()];case 1:return s=y.sent()[0],[4,e.max().data()];case 2:if(i=y.sent()[0],"float32"===e.dtype){if(s<0||i>1)throw Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+s+" - "+i+"].")}else{if("int32"!==e.dtype)throw Error("Unsupported type for toPixels: "+e.dtype+". Please use float32 or int32 tensors.");if(s<0||i>255)throw Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+s+" - "+i+"].")}return[4,e.data()];case 3:for(u=y.sent(),l="float32"===e.dtype?255:1,p=new Uint8ClampedArray(o*n*4),d=0;d<n*o;++d)h=void 0,f=void 0,m=void 0,g=void 0,1===a?(h=u[d]*l,f=u[d]*l,m=u[d]*l,g=255):3===a?(h=u[3*d]*l,f=u[3*d+1]*l,m=u[3*d+2]*l,g=255):4===a&&(h=u[4*d]*l,f=u[4*d+1]*l,m=u[4*d+2]*l,g=u[4*d+3]*l),p[0+(b=4*d)]=Math.round(h),p[b+1]=Math.round(f),p[b+2]=Math.round(m),p[b+3]=Math.round(g);return null!=t&&(t.width=o,t.height=n,v=t.getContext("2d"),O=new ImageData(p,o,n),v.putImageData(O,0,0)),[2,p]}}))}))},e.reshape=function(e,t){return c.assertArgumentsAreTensors({x:e},"reshape"),t=c.inferFromImplicitShape(t,e.size),c.assert(e.size===c.sizeFromShape(t),"new shape and old shape must have the same number of elements."),s.ENV.engine.runKernel((function(r){return r.reshape(e,t)}),{x:e},(function(t){return{x:function(){return t.reshape(e.shape)}}}))},e.squeeze=function(t,r){return c.assertArgumentsAreTensors({x:t},"squeeze"),e.reshape(t,c.squeezeShape(t.shape,r).newShape)},e.cast=function(e,t){return c.assertArgumentsAreTensors({x:e},"cast"),s.ENV.engine.runKernel((function(r){return r.cast(e,t)}),{x:e},(function(e){return{x:function(){return e.clone()}}}))},e.tile=function(t,r){return c.assertArgumentsAreTensors({x:t},"tile"),c.assert(t.rank===r.length,"Error in transpose: rank of input "+t.rank+" must match length of reps "+r+"."),s.ENV.engine.runKernel((function(e){return e.tile(t,r)}),{x:t},(function(n){return{x:function(){var o,a,s,i,u=e.zerosLike(t);if(1===t.rank)for(o=0;o<r[0];++o)u=u.add(n.slice([o*t.shape[0]],[t.shape[0]]));else if(2===t.rank)for(o=0;o<r[0];++o)for(a=0;a<r[1];++a)u=u.add(n.slice([o*t.shape[0],a*t.shape[1]],[t.shape[0],t.shape[1]]));else if(3===t.rank)for(o=0;o<r[0];++o)for(a=0;a<r[1];++a)for(s=0;s<r[2];++s)u=u.add(n.slice([o*t.shape[0],a*t.shape[1],s*t.shape[2]],[t.shape[0],t.shape[1],t.shape[2]]));else{if(4!==t.rank)throw Error("Gradient for tile operation is not implemented for rank-"+t.rank+" tensors yet.");for(o=0;o<r[0];++o)for(a=0;a<r[1];++a)for(s=0;s<r[2];++s)for(i=0;i<r[3];++i)u=u.add(n.slice([o*t.shape[0],a*t.shape[1],s*t.shape[2],i*t.shape[3]],[t.shape[0],t.shape[1],t.shape[2],t.shape[3]]))}return u}}}))},e.gather=function(e,t,r){void 0===r&&(r=0),c.assertArgumentsAreTensors({x:e,indices:t},"gather"),c.assert("int32"===t.dtype,"Indices must be of dtype `int32`");var n=l.parseAxisParam(r,e.shape);return s.ENV.engine.runKernel((function(r){return r.gather(e,t,n[0])}),{x:e,indices:t})},e.pad1d=function(t,r,n){return void 0===n&&(n=0),c.assert(2===r.length,"Invalid number of paddings. Must be length of 2."),e.pad(t,[r],n)},e.pad2d=function(t,r,n){return void 0===n&&(n=0),c.assert(2===r.length&&2===r[0].length&&2===r[1].length,"Invalid number of paddings. Must be length of 2 each."),e.pad(t,r,n)},e.pad3d=function(t,r,n){return void 0===n&&(n=0),c.assert(3===r.length&&2===r[0].length&&2===r[1].length&&2===r[2].length,"Invalid number of paddings. Must be length of 2 each."),e.pad(t,r,n)},e.pad4d=function(t,r,n){return void 0===n&&(n=0),c.assert(4===r.length&&2===r[0].length&&2===r[1].length&&2===r[2].length&&2===r[3].length,"Invalid number of paddings. Must be length of 2 each."),e.pad(t,r,n)},e.pad=function(e,t,r){var n,o;if(void 0===r&&(r=0),c.assertArgumentsAreTensors({x:e},"pad"),0===e.rank)throw Error("pad(scalar) is not defined. Pass non-scalar to pad");return n=t.map((function(e){return e[0]})),o=function(t){return{x:function(){return t.slice(n,e.shape)}}},s.ENV.engine.runKernel((function(n){return n.pad(e,t,r)}),{x:e},o)},e.stack=function(e,t){var r,n,o,a;return void 0===t&&(t=0),c.assertArgumentsAreTensors({tensors:e},"stack"),c.assert(e.length>=1,"Pass at least one tensor to tf.stack"),1===e.length?e[0].expandDims(t):(r=e[0].rank,n=e[0].shape,o=e[0].dtype,c.assert(t<=r,"Axis must be <= rank of the tensor"),e.forEach((function(e){c.assertShapesMatch(n,e.shape,"All tensors passed to stack must have matching shapes")})),e.forEach((function(e){c.assert(o===e.dtype,"All tensors passed to stack must have matching dtypes")})),a=e.map((function(e){return e.expandDims(t)})),p.ConcatOps.concat(a,t))},e.split=function(e,t,r){var n,o,a;return void 0===r&&(r=0),c.assertArgumentsAreTensors({x:e},"split"),r=l.parseAxisParam(r,e.shape)[0],"number"==typeof t?(c.assert(e.shape[r]%t==0,"Number of splits must evenly divide the axis."),n=Array(t).fill(e.shape[r]/t)):(c.assert(e.shape[r]===t.reduce((function(e,t){return e+t})),"The sum of sizes must match the size of the axis dimension."),n=t),o=Array(e.rank).fill(0),a=e.shape.slice(),n.map((function(t){a[r]=t;var n=e.slice(o,a);return o[r]+=t,n}))},e.expandDims=function(t,r){void 0===r&&(r=0),c.assertArgumentsAreTensors({x:t},"expandDims"),c.assert(r<=t.rank,"Axis must be <= rank of the tensor");var n=t.shape.slice();return n.splice(r,0,1),e.reshape(t,n)},e.linspace=function(t,r,o){var a,s,i;if(0===o)throw Error("Cannot request zero samples");for(a=(r-t)/(o-1),(s=n(o,"float32"))[0]=t,i=1;i<s.length;i++)s[i]=s[i-1]+a;return e.tensor1d(s,"float32")},e.range=function(t,r,o,a){var s,i,u;if(void 0===o&&(o=1),void 0===a&&(a="float32"),0===o)throw Error("Cannot have a step of zero");if(t===r||t<r&&o<0||r<t&&o>1)return e.zeros([0],a);for(s=Math.abs(Math.ceil((r-t)/o)),r<t&&1===o&&(o=-1),(i=n(s,a))[0]=t,u=1;u<i.length;u++)i[u]=i[u-1]+o;return e.tensor1d(i,a)},e.buffer=function(e,t,r){return void 0===t&&(t="float32"),new i.TensorBuffer(e,t,r)},e.print=function(e,t){void 0===t&&(t=!1),console.log(u.tensorToString(e,t))},m([a.doc({heading:"Tensors",subheading:"Creation"})],e,"tensor",null),m([a.doc({heading:"Tensors",subheading:"Creation"})],e,"scalar",null),m([a.doc({heading:"Tensors",subheading:"Creation"})],e,"tensor1d",null),m([a.doc({heading:"Tensors",subheading:"Creation"})],e,"tensor2d",null),m([a.doc({heading:"Tensors",subheading:"Creation"})],e,"tensor3d",null),m([a.doc({heading:"Tensors",subheading:"Creation"})],e,"tensor4d",null),m([a.doc({heading:"Tensors",subheading:"Creation"}),d.operation],e,"ones",null),m([a.doc({heading:"Tensors",subheading:"Creation"}),d.operation],e,"zeros",null),m([a.doc({heading:"Tensors",subheading:"Creation"}),d.operation],e,"fill",null),m([a.doc({heading:"Tensors",subheading:"Creation"}),d.operation],e,"onesLike",null),m([a.doc({heading:"Tensors",subheading:"Creation"}),d.operation],e,"zerosLike",null),m([a.doc({heading:"Tensors",subheading:"Creation"}),d.operation],e,"clone",null),m([a.doc({heading:"Tensors",subheading:"Creation"}),d.operation],e,"randomNormal",null),m([a.doc({heading:"Tensors",subheading:"Creation"}),d.operation],e,"truncatedNormal",null),m([a.doc({heading:"Tensors",subheading:"Creation"}),d.operation],e,"randomUniform",null),m([d.operation],e,"rand",null),m([d.operation],e,"multinomial",null),m([a.doc({heading:"Tensors",subheading:"Creation"}),d.operation],e,"oneHot",null),m([a.doc({heading:"Tensors",subheading:"Creation"}),d.operation],e,"fromPixels",null),m([a.doc({heading:"Visualization"})],e,"toPixels",null),m([a.doc({heading:"Tensors",subheading:"Transformations"}),d.operation],e,"reshape",null),m([a.doc({heading:"Tensors",subheading:"Transformations"})],e,"squeeze",null),m([a.doc({heading:"Tensors",subheading:"Transformations"}),d.operation],e,"cast",null),m([a.doc({heading:"Tensors",subheading:"Slicing and Joining"}),d.operation],e,"tile",null),m([a.doc({heading:"Tensors",subheading:"Slicing and Joining"}),d.operation],e,"gather",null),m([a.doc({heading:"Tensors",subheading:"Transformations"}),d.operation],e,"pad",null),m([a.doc({heading:"Tensors",subheading:"Slicing and Joining"}),d.operation],e,"stack",null),m([a.doc({heading:"Tensors",subheading:"Slicing and Joining"}),d.operation],e,"split",null),m([a.doc({heading:"Tensors",subheading:"Transformations"}),d.operation],e,"expandDims",null),m([d.operation,a.doc({heading:"Tensors",subheading:"Creation"})],e,"linspace",null),m([d.operation,a.doc({heading:"Tensors",subheading:"Creation"})],e,"range",null),m([a.doc({heading:"Tensors",subheading:"Creation"})],e,"buffer",null),m([a.doc({heading:"Tensors",subheading:"Creation"})],e,"print",null),e}(),t.ArrayOps=f},901:function(e,t,r){"use strict";var n,o,a,s,i,u=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),n=r(632),o=r(679),a=r(656),s=function(e){function t(t){var r=e.call(this)||this;return r.learningRate=t,r.setLearningRate(t),r}return u(t,e),t.prototype.applyGradients=function(e){var t=this;Object.keys(e).forEach((function(r){var a=e[r],s=n.ENV.engine.registeredVariables[r];o.tidy((function(){var e=t.c.mul(a).add(s);s.assign(e)}))}))},t.prototype.setLearningRate=function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=o.keep(a.scalar(-e))},t.prototype.dispose=function(){this.c.dispose()},t}(r(757).Optimizer),t.SGDOptimizer=s}}]);