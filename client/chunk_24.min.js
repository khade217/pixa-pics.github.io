(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{597:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,a){return function n(o,i){var r,l;try{l=(r=t[o](i)).value}catch(s){return void a(s)}if(!r.done)return Promise.resolve(l).then((function(e){n("next",e)}),(function(e){n("throw",e)}));e(l)}("next")}))}}function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var r,l,s,_,u,c,d,m,p,f,h,g,v,b,y,w,x,k,E,C,S,T,I,N,P,R,z,O,A,D,L,j,M,B,U,F,q,H,K,Y,W,X,J,V,G,Q,Z,$,ee,te,ae,ne,oe,ie,re,le,se,_e,ue,ce,de,me,pe,fe,he,ge,ve,be,ye,we,xe,ke,Ee,Ce,Se,Te,Ie,Ne,Pe,Re,ze,Oe,Ae,De,Le,je,Me,Be,Ue,Fe,qe,He,Ke,Ye,We,Xe,Je,Ve,Ge,Qe,Ze,$e,et,tt,at,nt,ot,it,rt,lt,st,_t,ut,ct,dt,mt,pt,ft,ht,gt,vt,bt,yt,wt,xt,kt,Et,Ct,St,Tt,It,Nt,Pt,Rt,zt,Ot,At,Dt,Lt,jt,Mt,Bt,Ut,Ft,qt,Ht,Kt,Yt;Object.defineProperty(t,"__esModule",{value:!0}),r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a,n,o=[],i=!0,r=!1,l=void 0;try{for(a=e[Symbol.iterator]();!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(s){r=!0,l=s}finally{try{!i&&a.return&&a.return()}finally{if(r)throw l}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},l=Object.assign||function(e){var t,a,n;for(t=1;t<arguments.length;t++)for(n in a=arguments[t])Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);return e},s=function(){function e(e,t){var a,n;for(a=0;a<t.length;a++)(n=t[a]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),_=a(689),u=n(_),c=a(690),d=a(155),m=n(d),p=a(0),f=n(p),h=a(259),g=n(h),v=a(281),b=n(v),y=a(76),w=n(y),x=a(54),k=n(x),E=n(a(52)),C=a(654),S=n(C),T=a(112),I=n(T),N=a(53),P=n(N),R=a(89),z=n(R),O=a(258),A=n(O),D=a(165),L=n(D),j=a(166),M=n(j),B=a(162),U=n(B),F=a(161),q=n(F),H=a(156),K=n(H),Y=a(260),W=n(Y),X=a(111),J=n(X),V=a(110),G=n(V),Q=a(691),Z=n(Q),$=a(77),ee=a(71),te=n(ee),ae=a(693),ne=n(ae),oe=a(743),ie=n(oe),re=a(420),le=n(re),se=a(744),_e=n(se),ue=a(417),ce=n(ue),de=a(745),me=n(de),pe=a(816),fe=n(pe),he=a(163),ge=n(he),ve=a(708),be=n(ve),ye=a(710),we=n(ye),xe=a(709),ke=n(xe),Ee=a(704),Ce=n(Ee),Se=a(702),Te=n(Se),Ie=a(701),Ne=n(Ie),Pe=a(706),Re=n(Pe),ze=a(415),Oe=n(ze),Ae=a(818),De=n(Ae),Le=a(707),je=n(Le),Me=a(673),Be=n(Me),Ue=a(700),Fe=n(Ue),qe=a(698),He=n(qe),Ke=a(699),Ye=n(Ke),We=a(819),Xe=n(We),Je=a(705),Ve=n(Je),Ge=a(703),Qe=n(Ge),Ze=a(820),$e=n(Ze),et=a(821),tt=n(et),at=a(422),nt=n(at),ot=a(822),it=n(ot),rt=a(823),lt=a(666),st=a(825),_t=a(827),ut=n(_t),ct=a(828),dt=n(ct),mt=a(829),pt=n(mt),ft=a(697),ht=n(ft),gt=a(830),vt=n(gt),bt=a(831),yt=n(bt),wt=a(832),xt=n(wt),kt=a(667),Et=a(684),Ct=n(Et),St=a(660),Tt=n(St),It=a(154),Nt=a(833),Pt=n(Nt),Rt=a(834),zt=n(Rt),Ot=a(835),At=n(Ot),Dt=a(645),Lt=a(711),jt=n(Lt),Mt=a(665),window.mobileAndTabletCheck=function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t},Bt=window.mobileAndTabletCheck(),Ut=f.default.lazy((function(){return Promise.all([a.e(17),a.e(16)]).then(a.t.bind(null,924,7))})),Ft=(0,Dt.SIMDopeCreate)({create:{new_of:!0,new_hex:!0},properties:{hsla:!0,hex:!0,rgb:!0}}),qt=Ft.Color,Ht=function(e){var t,a,n,o,r,l,s,_,u,c,d,m,p;return{green:{color:_e.default[700]},red:{color:ce.default[500]},root:(t={contain:"layout size style paint",contentVisibility:"auto",width:"100%",height:"100%",position:"relative",paddingBottom:72},i(t,e.breakpoints.up("lg"),{paddingBottom:0}),i(t,"background","border-box"),t),contentInner:{height:"100%",width:"100%",maxHeight:"100%",position:"relative",display:"flex",contain:"paint style size layout"},contentCanvas:{width:"100%",height:"100%",maxHeight:"100%",display:"inline-block",contain:"paint style size layout !important"},contentDrawer:i({overscrollBehavior:"none",display:"flex",zIndex:1400},e.breakpoints.up("lg"),{display:"none"}),drawerHeader:(a={},i(a,e.breakpoints.down("md"),{padding:"16px 24px 8px 24px"}),i(a,"padding","36px 24px 8px 24px"),i(a,"position","relative"),i(a,"zIndex",-1),i(a,"background","#fff"),a),desktopintrovideowrapper:{cursor:"pointer",margin:"12px 24px",position:"absolute",right:0,top:0,"&:active, &:hover, &:active > video, &:hover > video":{height:96,width:96,transform:"scale(2)",zIndex:1},height:56,width:56,"&::after":{content:"''",background:"#fff !important",position:"absolute",right:0,top:0,width:"10%",height:"15%"}},desktopintrovideo:{position:"absolute",right:0,top:0,height:56,width:56},mobileintrovideowrapper:{zIndex:1,cursor:"pointer",margin:"16px 56px",position:"absolute",right:0,top:0,height:32,width:32,"&::after":{content:"''",background:"#fff !important",position:"absolute",right:0,top:0,width:"10%",height:"15%"}},mobileintrovideo:{position:"absolute",right:0,top:0,height:32,width:32},effectSliderText:{color:"#050c4c",fontWeight:"bold",textTransform:"uppercase"},effectSlider:{color:"#3729c1",padding:"16px 0px","& > .MuiSlider-track":{height:4}},coordinate:{padding:"6px 8px 6px 8px",display:"block",position:"absolute",top:0,left:"50%",transform:"translate(-50%, 0%)",borderRadius:"0px 0px 4px 4px",backgroundColor:"#ededffff",color:"#050c4c",boxShadow:"inset 0px 3px 6px #050c4c4d",whiteSpace:"nowrap"},drawerModalBackdropRoot:{contain:"layout size style paint"},drawerModal:{transform:"translateY(-32px)",marginTop:32,contain:"size layout style",overflow:"hidden"},contentDrawerFixed:(n={zIndex:20,contain:"style size paint layout",boxShadow:"-2px 0px 4px 0px rgb(0 0 0 / 20%), -4px 0px 5px 0px rgb(0 0 0 / 14%), -6px 0px 10px 0px rgb(0 0 0 / 12%)",maxHeight:"100%",height:"100%"},i(n,e.breakpoints.down("md"),{display:"none"}),i(n,"width",480),i(n,"overscrollBehavior","none"),i(n,"display","inline-block"),i(n,"animationFillMode","both"),i(n,"animationName","$drawer"),i(n,"animationDuration","250ms"),i(n,"animationTimingFunction","cubic-bezier(0.4, 0, 0.2, 1)"),i(n,"animationDirection","alternate"),i(n,"animationIterationCount","1"),i(n,"animationDelay","0ms"),i(n,"& > div",{animationFillMode:"both",animationName:"$opacity",animationDuration:"125ms",animationTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",animationDirection:"alternate",animationIterationCount:"1",animationDelay:"150ms"}),n),"@keyframes drawer":{"0%":{transform:"translateX(100%)"},"190%":{transform:"translateX(0%)"}},"@keyframes opacity":{"0%":{filter:"opacity(0)"},"190%":{filter:"opacity(1)"}},"@keyframes menu":{"0%":{transform:"translateY(100%)"},"190%":{transform:"translateY(0%)"}},drawerPaper:{width:480,overflowX:"overlay",background:"#fafafa",contain:"layout paint size style"},swipeableDrawerPaper:{maxWidth:"100%",overscrollBehavior:"none",overflow:"hidden",paddingBottom:"48px",borderBox:"content-box",height:"100%",contain:"layout paint size style"},drawerContainer:(r={transform:"translateZ(10px)",scrollBehavior:"smooth",contain:"size style paint layout",height:"100% !important",overflow:"overlay"},i(r,e.breakpoints.down("md"),{height:"calc(100vh - 180px) !important"}),i(r,e.breakpoints.up("lg"),{overflowX:"hidden"}),i(r,"& > div",{overflowX:"hidden !important",overflowY:"overlay !important",display:"inline !important",width:"100% !important",height:"100% !important",contain:"size style paint layout !important"}),i(r,"& div .react-swipeable-view-container > div",i({overflow:"initial !important",alignItems:"normal",contain:"size style !important",height:"100%"},e.breakpoints.down("md"),{height:"100% !important",paddingBottom:"24px",boxSizing:"border-box"})),i(r,"& div .react-swipeable-view-container > div[aria-hidden=true]",i({},e.breakpoints.up("lg"),{height:"16px"})),i(r,"& div .react-swipeable-view-container > div[aria-hidden=false]  > ul",i({},e.breakpoints.down("md"),{paddingBottom:0})),i(r,"& > div > .react-swipeable-view-container",(o={display:"flex !important",filter:"inherit !important",WebkitFilter:"inherit",willChange:"none !important",height:"100% !important"},i(o,e.breakpoints.up("lg"),{width:480}),i(o,e.breakpoints.down("md"),{width:"100%"}),o)),r),tabs:{contain:"paint size style layout",animationFillMode:"both",animationName:"$menu",animationDuration:"175ms",animationTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",animationDirection:"alternate",animationIterationCount:"1",animationDelay:"0ms",height:72,display:"grid","& .MuiTabs-scroller":{overflowY:"hidden"},"& .MuiTab-root":{minWidth:"auto",flex:"auto"},"& .MuiTabs-indicator":{backgroundColor:"#050c4c"}},"@keyframes bounce":{"0%":{transform:"translate3d(0, 0px, 0) scaleY(1.00)"},"20%":{transform:"translate3d(0, 2px, 0) scaleY(0.95)"},"40%":{transform:"translate3d(0, 0px, 0) scaleY(1.00)"},"70%":{transform:"translate3d(0, -2px, 0) scaleY(1.10)"},"80%":{transform:"translate3d(0, 1px, 0) scaleY(0.95)"},"90%":{transform:"translate3d(0, 0px, 0) scaleY(1.00)"}},tab:{backgroundColor:"#fafafa",color:"#050c4c",transition:"color, background-color cubic-bezier(0.4, 0, 0.2, 1) .275s","&.Mui-selected":{fontWeight:"bold",backgroundColor:"#dfddf2",color:"#050c4c",transition:"color, background-color cubic-bezier(0.4, 0, 0.2, 1) .175s",borderRadius:"4px 4px 0px 0px","& .MuiTab-wrapper":{animationDuration:"375ms",animationTimingFunction:"linear",animationName:"$bounce",transformOrigin:"center bottom"}},"&:hover":{fontWeight:"bold",backgroundColor:"#e8e6f5",color:"#050c4c",transition:"color, background-color cubic-bezier(0.4, 0, 0.2, 1) .175s",borderRadius:"4px 4px 0px 0px","& .MuiTab-wrapper":{animationDuration:"375ms",animationTimingFunction:"linear",animationName:"$bounce",transformOrigin:"center bottom"}},"&:first-child":{borderRadius:"0px 4px 0px 0px"},"&:last-child":{borderRadius:"4px 0px 0px 0px"},"& .MuiTab-wrapper":{fontSize:"11px"},"& .MuiTab-wrapper svg":{width:32,height:32,contentVisibility:"auto"}},tabNoIcon:{backgroundColor:"white",color:"#050c4c",transition:"color, background-color ease-in .175s","&.Mui-selected":{fontWeight:"bold",backgroundColor:"#dfddf2",color:"#050c4c",borderRadius:"4px 4px 0px 0px"},"&.MuiTab-labelIcon":{minHeight:36},"& .MuiTab-wrapper":{fontSize:"11px"},"& .MuiTab-wrapper svg":{width:32,height:32,display:"none",color:"#181063"}},"@keyframes backdropanim":{"0%":{filter:"drop-shadow(0px, 0px, 20px, 20px, #131c955c)"}},backdrop:{zIndex:2e3,color:"#fff",filter:"brightness(1.1) contrast(1.2) drop-shadow(0 0 12px #070b32)",background:"radial-gradient(farthest-corner, #001856d1 20%, #636eff52 80%, #474e9b2b)",contain:"layout paint size style",userSelect:"none",animation:"$backdropanim 16s linear infinite both"},backdropTextContent:{display:"block",textAlign:"center"},fatabs:(l={transition:"transform 45ms cubic-bezier(0.4, 0, 0.2, 1) 5ms",backgroundColor:"#fafafa",boxShadow:"0px 2px 4px -1px rgb(0 0 0 / 20%), 0px 4px 5px 0px rgb(0 0 0 / 14%), 0px 1px 10px 0px rgb(0 0 0 / 12%)",contain:"paint size style layout"},i(l,e.breakpoints.up("lg"),{display:"none"}),i(l,e.breakpoints.up("md"),{width:"100%"}),i(l,"zIndex",1300),i(l,"position","fixed"),i(l,"bottom",0),i(l,"right",0),i(l,"width","100%"),i(l,"height",72),l),listOfTools:(s={paddingTop:0},i(s,e.breakpoints.down("md"),{width:"100%"}),i(s,"width",360),s),contextMenuSubheader:{lineHeight:"24px",backgroundColor:"#eee",color:e.palette.secondary.light},contextMenuFuckYouActive:{cursor:'url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAApCAYAAAAiT5m3AAABXklEQVRYR+2XSxKCMAyGYSXqCdiJev8TqbjjBCqucMJMnDSk6QOKM0hXzPTxNemfB3n2o5GP4Z4OVYf7r/c66KygxfSSCL3Ut+xcHfupEPgoMEBxAHwFa/pZXe0dXaDqVVzLCyeaIkEMs7wxTZEAhUyVHMyhs4KpdTYwj0VNbF6Za7cpukf7Ms7lruaXcVWsZGC8iM3qHszVyhfHWIxg6qamabLnu+2ZXzC+IbqIFvZYsOb+AZgWdviGW5ZlaYSOLaG73p263wqWlEuBEkS6kC3eVbAG97FOi/fkYO4F7M0MVfMkQd/bNucq4KqrYbOk3NnAoF5edbjKYy2n50CeGGQu3tK4XBk6b7wx3ZwSTPO3aLHN3aHW8fX7YmumTL4gldX/A5YKj1iPaZkcGz62uqw2AlO9tfQLmxQsuRiF7ARjTeY9l09oaT/r0T3XssEgMmiBQgcUHbXLDD1wivUfqwJ8Oe4e4FEAAAAASUVORK5CYII=") 17 28, auto',"& .MuiList-padding":{padding:0}},contextMenuFuckYouDisable:{"& .MuiList-padding":{padding:0}},ripple:{contain:"layout paint size style",pointerEvents:"none",contentVisibility:"auto",mixBlendMode:"dodge"},infoIcon:{position:"absolute"},blueCenter:{color:e.palette.secondary.lighter,textAlign:"center",minWidth:"100%"},perspectiveButton:{position:"absolute",left:16,top:16,animationFillMode:"both",animationName:"$fadein",animationDuration:"225ms",animationTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",animationDirection:"alternate",animationIterationCount:"1",animationDelay:"175ms"},saveButton:(_={backgroundColor:"#0037ff14 !important",position:"absolute",right:496,top:16},i(_,e.breakpoints.down("md"),{right:16}),i(_,"animationFillMode","both"),i(_,"animationName","$fadein"),i(_,"animationDuration","225ms"),i(_,"animationTimingFunction","cubic-bezier(0.4, 0, 0.2, 1)"),i(_,"animationDirection","alternate"),i(_,"animationIterationCount","1"),i(_,"animationDelay","175ms"),_),confirmImportButton:(u={position:"absolute",left:16,bottom:16},i(u,e.breakpoints.down("md"),{bottom:88}),i(u,"animationFillMode","both"),i(u,"animationName","$fadein"),i(u,"animationDuration","225ms"),i(u,"animationTimingFunction","cubic-bezier(0.4, 0, 0.2, 1)"),i(u,"animationDirection","alternate"),i(u,"animationIterationCount","1"),i(u,"animationDelay","175ms"),u),zoomInButton:(c={position:"absolute",left:16,bottom:104},i(c,e.breakpoints.down("md"),{bottom:176}),i(c,"animationFillMode","both"),i(c,"animationName","$fadein"),i(c,"animationDuration","225ms"),i(c,"animationTimingFunction","cubic-bezier(0.4, 0, 0.2, 1)"),i(c,"animationDirection","alternate"),i(c,"animationIterationCount","1"),i(c,"animationDelay","175ms"),c),zoomOutButton:(d={position:"absolute",left:16,bottom:60},i(d,e.breakpoints.down("md"),{bottom:132}),i(d,"animationFillMode","both"),i(d,"animationName","$fadein"),i(d,"animationDuration","225ms"),i(d,"animationTimingFunction","cubic-bezier(0.4, 0, 0.2, 1)"),i(d,"animationDirection","alternate"),i(d,"animationIterationCount","1"),i(d,"animationDelay","175ms"),d),redoButton:(m={backgroundColor:"#0037ff14 !important",position:"absolute",right:496,bottom:60},i(m,e.breakpoints.down("md"),{right:16,bottom:132}),i(m,"animationFillMode","both"),i(m,"animationName","$fadein"),i(m,"animationDuration","225ms"),i(m,"animationTimingFunction","cubic-bezier(0.4, 0, 0.2, 1)"),i(m,"animationDirection","alternate"),i(m,"animationIterationCount","1"),i(m,"animationDelay","175ms"),m),undoButton:(p={backgroundColor:"#0037ff14 !important",position:"absolute",right:496,bottom:16},i(p,e.breakpoints.down("md"),{right:16,bottom:88}),i(p,"animationFillMode","both"),i(p,"animationName","$fadein"),i(p,"animationDuration","225ms"),i(p,"animationTimingFunction","cubic-bezier(0.4, 0, 0.2, 1)"),i(p,"animationDirection","alternate"),i(p,"animationIterationCount","1"),i(p,"animationDelay","175ms"),p),"@keyframes fadein":{"0%":{filter:"opacity(0)"},"190%":{filter:"opacity(1)"}},imageBackdrop:{filter:"brightness(1.5) contrast(0.75) drop-shadow(2px 4px 6px black)",width:"min(75vw, 75vh)"}}},Kt=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Yt.call(a),a.st4te={classes:e.classes,load_with:e.load_with+"",_history:$.HISTORY,_perspective:!1,_library_dialog_open:!1,_library:{},_library_type:"open",_view_name_index:1,_handle_wheel_timestamp:Date.now(),_view_name_sub_index:0,_previous_view_name_index:1,_view_names:["palette","image","layers","tools","selection","effects","filters"],_canvas:null,_loading:!1,_loading_process:"",_can_undo:0,_can_redo:0,_current_color:"#ffffffff",_second_color:"#000000ff",_pxl_current_opacity:1,_width:32,_height:32,_import_size:"192",_import_colorize:"0",_hue:360,_slider_value:.25,_slider_value_width:192,_slider_value_height:96,_game_ended:!1,_tool:Bt?"MOVE":"PENCIL",_memory_tool:Bt?"MOVE":"PENCIL",_previous_tool_timestamp:1/0,_select_mode:"REPLACE",_pencil_mirror_mode:"NONE",_filters:[],_x:-1,_y:-1,_drag_file:!1,_is_something_selected:!1,_hide_canvas_content:!1,_show_original_image_in_background:!1,_show_transparent_image_in_background:!0,_is_image_import_mode:!1,_layers:[],_layer_index:0,_previous_layer_index:0,_mine_player_direction:"UP",_is_edit_drawer_open:!1,_kb:0,_saved_at:Date.now(),_fps:0,_prev_fps:0,_menu_mouse_y:null,_menu_mouse_x:null,_menu_data:{},_menu_event:null,_ripple:null,_ripple_color:"#ffffffff",_ripple_opacity:1,_is_pixel_dialog_post_edit_open:!1,_is_dialog_info_open:!1,_base64_url:"",_logged_account:{},_less_than_1280w:!1,_is_pixel_dialog_create_open:!1,_attachment_previews:{},_swipeable_drawer_handle_filters_thumbnail_change:function(){},_swipeable_drawer_set_props:function(){},_toolbox_container_ref:{},_files_waiting_download:[],_time_ago_initiated:!1,_fps_el:{},_xy_el:{},_settings:g.default.unpack(e.settings)},a.sraf=Object.create(jt.default).init(),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"setSt4te",value:function(e,t){var a,n=Object.keys(e),o=0|n.length,i="";for(a=0;(0|a)<(0|o);a=(a+1|0)>>>0)i=n[a],this.st4te[i]=e[i];"function"==typeof t&&t()}},{key:"componentWillMount",value:function(){te.default.trigger_loading_update(0),te.default.trigger_page_render_complete(),setTimeout((function(){te.default.trigger_loading_update(100)}),300)}},{key:"componentDidMount",value:function(){var e=this;te.default.trigger_snackbar("Awesome buddy! Welcome back to the laboratory.",3500),(0,It.l)(null,(function(){e._compute_menu_drawer(),e.setSt4te({_time_ago_initiated:!0})}),!0),setTimeout((function(){e.st4te._is_pixel_dialog_create_open&&(te.default.trigger_snackbar("Right here! Let's upload a picture now to create a new artwork.",6e3),setTimeout((function(){e.st4te._is_pixel_dialog_create_open&&(te.default.trigger_snackbar("By the way, ...",1e3),setTimeout((function(){e.st4te._is_pixel_dialog_create_open&&(te.default.trigger_snackbar("Huh, let me take my breath! ...",1500),setTimeout((function(){e.st4te._is_pixel_dialog_create_open&&te.default.trigger_snackbar("You can set the size of your artwork before uploading your picture.",1e4)}),3e3))}),1500))}),8500))}),9e3),te.default.jamy_update("happy"),window.addEventListener("resize",this._updated_dimensions),window.addEventListener("wheel",this._prevent_ctrl_zoom,{passive:!1}),document.addEventListener("keydown",this._handle_keydown),document.addEventListener("keyup",this._handle_keyup);try{document.getElementById("tabs-desktop").addEventListener("wheel",this._handle_wheel,{passive:!1})}catch(t){}b.default.register(this._handle_events.bind(this)),this.setSt4te({_h_svg:(0,kt.createLocalBlob)((0,Tt.default)(f.default.createElement(Ct.default,{color:"#e5e5e5"}))),_h_svg_size:"100px 115px"}),(0,m.default)((function(){return a.e(42).then(a.t.bind(null,939,7))})).then((function(t){e.setSt4te({_library:t})})),this._set_saved_at_element(),this._try_load_with_payload(this.st4te.load_with),setTimeout((function(){e._request_force_update(!1,!0).then((function(){e._updated_dimensions()}))}),1e3)}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.load_with!==this.st4te.load_with?this.setSt4te(l({_settings:g.default.unpack(e.settings)},e),(function(){t._compute_menu_drawer(),t._request_force_update().then((function(){t._try_load_with_payload(t.st4te.load_with)}))})):this.setSt4te(l({_settings:g.default.unpack(e.settings)},e))}},{key:"_handle_events",value:function(e){var t=this;if("TRIGGER_CANVAS_ACTION"===e.type)switch(e.data.name.toUpperCase()){case"CONTRAST":this._to_auto_medium_more_contrast();break;case"SATURATION":this._to_auto_medium_more_saturation();break;case"PALETTE":this._less_colors_auto();break;case"SMOOTH":this._smooth_adjust();break;case"FILTER":this._handle_edit_drawer_open(null,6);break;case"RENDER":this._handle_edit_drawer_open(null,1),setTimeout((function(){t._handle_edit_drawer_open(null,1),setTimeout((function(){t._handle_edit_drawer_open(null,1)}),100)}),100)}}},{key:"componentWillUnmount",value:function(){this._backup_state(),te.default.stop_sound(),window.removeEventListener("resize",this._updated_dimensions),window.removeEventListener("wheel",this._prevent_ctrl_zoom);try{document.getElementById("tabs-desktop").removeEventListener("wheel",this._handle_wheel,{passive:!1})}catch(e){}document.removeEventListener("keydown",this._handle_keydown),document.removeEventListener("keyup",this._handle_keyup),clearInterval(this.st4te._saved_at_interval)}},{key:"render",value:function(){var e=this,t=this.st4te,a=t.classes,n=t._canvas,o=t._loading,i=t._loading_process,r=t._is_image_import_mode,l=t._hide_canvas_content,s=t._show_original_image_in_background,_=t._show_transparent_image_in_background,c=t._can_undo,d=t._can_redo,m=t._current_color,h=t._slider_value,g=t._tool,v=t._import_size,b=t._hue,y=t._select_mode,x=t._pencil_mirror_mode,E=t._kb,C=t._mine_player_direction,S=t._menu_data,T=t._ripple_color,I=t._ripple_opacity,N=t._library_dialog_open,P=t._library,R=t._is_pixel_dialog_create_open,O=t._h_svg,A=t._h_svg_size,D=t._attachment_previews,L=t._perspective,j=t._files_waiting_download,M=t._time_ago_initiated,B=t._settings,U=t._text_dialog_open,F=t._drag_file;return S.pos_x=-1===S.pos_x?"out":S.pos_x,S.pos_y=-1===S.pos_y?"out":S.pos_y,f.default.createElement("div",{style:{height:"100%",position:"relative",pointerEvents:"none",userSelect:"none"},ref:this._set_root_ref},f.default.createElement("div",{className:a.root},f.default.createElement("div",{className:a.contentInner,style:{backgroundColor:"#f7f7f7",backgroundImage:'url("'+O+'")',backgroundRepeat:"repeat",backgroundSize:A,textRendering:"optimizespeed",imageRendering:"optimizespeed"}},f.default.createElement(p.Suspense,{fallback:f.default.createElement("div",{className:a.contentCanvas})},f.default.createElement(Ut,{set_compressor:this._set_png_compressors,perspective:L?2:0,on_state_export:this._handle_canvas_state_will_export,on_state_exported:this._handle_canvas_state_exported,on_fps_change:this._handle_fps_change,export_state_every_ms:Bt?3e5:21e4,shadow_size:Bt?0:1.5,key:"canvas",className:a.contentCanvas,ref:this._set_canvas_ref,tool:g,canvas_wrapper_padding:8,hide_canvas_content:l,show_original_image_in_background:s&&!0,show_transparent_image_in_background:_,select_mode:y,pencil_mirror_mode:x,hue:b,bucket_threshold:h,color_loss:h,pxl_current_opacity:1,onLoadComplete:this._handle_load_complete,onLoad:this._handle_load,onCanUndoRedoChange:this._handle_can_undo_redo_change,onSizeChange:this._handle_size_change,onCurrentColorChange:this._handle_current_color_change,onSomethingSelectedChange:this._handle_something_selected_change,onImageImportModeChange:this._handle_image_import_mode_change,onPositionChange:this._handle_position_change,onLayersChange:this._handle_layers_change,onFiltersThumbnailChange:this._handle_filters_thumbnail_change,onGameEnd:this._handle_game_end,onRelevantActionEvent:this._handle_relevant_action_event,setCursorFuckYou:this._set_cursor_fuck_you,onRightClick:this._handle_right_click,mine_player_direction:C,pxl_current_color:m,convert_scale:1,default_size:v,ideal_size:v,max_size:1.5*v,fast_drawing:!0,px_per_px:1})),this.drawer_desktop,this.menu)),f.default.createElement("div",{style:{pointerEvents:"all"}},f.default.createElement(k.default,{className:a.perspectiveButton,color:"primary",size:"small",onClick:this._toggle_perspective},L?f.default.createElement(tt.default,null):f.default.createElement($e.default,null)),f.default.createElement(w.default,{className:a.saveButton,variant:"text",color:"primary",onClick:this._backup_state},f.default.createElement("span",{id:"saved_at"},"?")," ",f.default.createElement(Xe.default,null)," ",E<.5?"?":Math.round(10*E)/10," kB"),f.default.createElement(w.default,{disabled:!r,className:a.confirmImportButton,color:"primary",size:"small",onClick:function(){r?n.confirm_import():e._import_image_library()}},f.default.createElement(u.default,null)," ",r?"OK":"Import"),f.default.createElement(k.default,{className:a.zoomOutButton,color:"primary",size:"small",onClick:function(){n.zoom_out()}},f.default.createElement(zt.default,null)),f.default.createElement(k.default,{className:a.zoomInButton,color:"primary",size:"small",onClick:function(){n.zoom_in()}},f.default.createElement(Pt.default,null)),f.default.createElement(w.default,{disabled:!d,variant:"text",color:"primary",size:"small",className:a.redoButton,onClick:function(t){e._redo()}},(-d||"")+" Redo"," ",f.default.createElement(De.default,{style:{transition:"ease-out 225ms transform 25m",transform:"rotate(+"+(360*d+90)+"deg)"}})),f.default.createElement(w.default,{disabled:!c,variant:"text",color:"primary",size:"small",className:a.undoButton,onClick:function(t){e._undo()}},f.default.createElement(De.default,{style:{transition:"ease-out 225ms transform 25ms",transform:"rotate(-"+(360*c+90)+"deg)"}}),(+c||"")+" Undo")),this.drawer_mobile,f.default.createElement(it.default,{keepMounted:!1,open:!!N,object:P,onClose:this._close_library,onSelectImage:this._from_library}),f.default.createElement(At.default,{keepMounted:!1,open:!!U,onClose:this._close_text,onSuccess:this._draw_text}),f.default.createElement(fe.default,{keepMounted:!1,theme_day:B._theme_day,open:!!R,pixel_arts:M?D:{},size:v,on_import_size_change:this._set_import_size,on_pixel_art_delete:this._delete_unsaved_pixel_art,import_JSON_state:this._handle_import_json_state_id,on_upload:this._handle_file_upload,onClose:this._handle_pixel_dialog_create_close}),f.default.createElement("div",{style:{position:"absolute",width:"100%",height:"100%",top:0,left:0,contain:"paint size style layout",visibility:"auto"}},f.default.createElement(Z.default,{className:a.ripple,ref:this._set_ripple_ref,center:!1,style:{color:T,opacity:I,position:"fixed",width:"100%",height:"100%"}}),f.default.createElement(z.default,{style:{pointerEvents:"all",cursor:"pointer"},onDrag:this._handle_file_upload,className:a.backdrop,open:!!(o||j.length>0||F+1e3>Date.now())},f.default.createElement("div",{className:a.backdropTextContent,style:{fontFamily:'"Industry Book"',textTransform:"uppercase"},onClick:this._continue_download},!F&&!!(o||j.length>0)&&f.default.createElement("h1",null,f.default.createElement(nt.default,{key:i||o,text:"browser"===i?"Laboratory in DANGER!":"LABORATORY PROCESSING",animation_delay_ms:0,animation_duration_ms:200})),!F&&j.length>0&&f.default.createElement("h3",null,f.default.createElement(nt.default,{key:j[0].name,text:"ACTION REQUIRED... "+j[0].name,animation_delay_ms:300,animation_duration_ms:500})),!F&&j.length>0&&f.default.createElement("div",null,f.default.createElement("img",{src:"/src/images/labostration/DOWNLOAD.svg",className:a.imageBackdrop})),!F&&j.length>0&&f.default.createElement("h4",null,f.default.createElement(nt.default,{pre:"[... ",app:" ...]",style:{textShadow:"0px 0px 16px white"},text:"CLICK ON THE SCREEN TO CONTINUE DOWNLOAD!",animation_delay_ms:Bt?5e3:2500,animation_duration_ms:500})),!F&&0===j.length&&o&&"browser"===i&&f.default.createElement("h3",null,f.default.createElement(nt.default,{text:"Doesn't feel like home for our dear code here.",animation_delay_ms:300,animation_duration_ms:500})),!F&&0===j.length&&o&&"browser"===i&&f.default.createElement("h4",null,f.default.createElement(nt.default,{pre:"[... ",app:" ...]",text:"It can take a while, please download an advanced browser.",animation_delay_ms:Bt?5e3:2500,animation_duration_ms:500})),!F&&0===j.length&&o&&"image_ai"===i&&f.default.createElement("h3",null,f.default.createElement(nt.default,{text:"AI processing your image",animation_delay_ms:300,animation_duration_ms:500})),F&&f.default.createElement("div",null,f.default.createElement("img",{src:"/src/images/labostration/ABDUCTION.svg",className:a.imageBackdrop})),F&&f.default.createElement("h4",null,f.default.createElement(nt.default,{pre:"[... ",app:" ...]",text:"Drop the file to the UFO.",animation_delay_ms:Bt?5e3:2500,animation_duration_ms:500})),F&&f.default.createElement("h3",null,f.default.createElement(nt.default,{text:"Ready for a new image abduction?",animation_delay_ms:300,animation_duration_ms:500})),!F&&0===j.length&&o&&"image_ai"===i&&f.default.createElement("div",null,f.default.createElement("img",{src:"/src/images/labostration/MOLECULE.svg",className:a.imageBackdrop})),!F&&0===j.length&&o&&"image_ai"===i&&f.default.createElement("h4",null,f.default.createElement(nt.default,{pre:"[... ",app:" ...]",text:"It can take a while, please wait ~10sec.",animation_delay_ms:Bt?5e3:2500,animation_duration_ms:500})),!F&&0===j.length&&o&&"image_preload"===i&&f.default.createElement("h3",null,f.default.createElement(nt.default,{text:"Preparing laboratory",animation_delay_ms:300,animation_duration_ms:500})),!F&&0===j.length&&o&&"image_preload"===i&&f.default.createElement("div",null,f.default.createElement("img",{src:"/src/images/labostration/SCIENCE.svg",className:a.imageBackdrop})),!F&&0===j.length&&o&&"image_preload"===i&&f.default.createElement("h4",null,f.default.createElement(nt.default,{pre:"[... ",app:" ...]",text:"It can take a while, please wait ~"+parseInt(3*parseFloat(v/100))*(Bt?3:1)+"sec.",animation_delay_ms:Bt?5e3:2500,animation_duration_ms:500})),!F&&0===j.length&&o&&"image_load"===i&&f.default.createElement("h3",null,f.default.createElement(nt.default,{text:"Abducting your image",animation_delay_ms:300,animation_duration_ms:500})),!F&&0===j.length&&o&&"image_load"===i&&f.default.createElement("div",null,f.default.createElement("img",{src:"/src/images/labostration/ABDUCTION.svg",className:a.imageBackdrop})),!F&&0===j.length&&o&&"image_load"===i&&f.default.createElement("h4",null,f.default.createElement(nt.default,{pre:"[... ",app:" ...]",text:"It can take a while, please wait ~"+parseInt(4*parseFloat(v/100))*(Bt?3:1)+"sec.",animation_delay_ms:Bt?5e3:2500,animation_duration_ms:500})),!F&&0===j.length&&o&&"image_render"===i&&f.default.createElement("div",null,f.default.createElement("img",{src:"/src/images/labostration/COMPUTING.svg",className:a.imageBackdrop})),!F&&0===j.length&&o&&"image_render"===i&&f.default.createElement("h3",null,f.default.createElement(nt.default,{text:"Atomic rendering in process",animation_delay_ms:300,animation_duration_ms:500})),!F&&0===j.length&&o&&"image_render"===i&&f.default.createElement("h4",null,f.default.createElement(nt.default,{pre:"[... ",app:" ...]",text:"It can take a while, please wait ~14sec.",animation_delay_ms:Bt?5e3:2500,animation_duration_ms:500})),!F&&0===j.length&&o&&"less_color"===i&&f.default.createElement("h3",null,f.default.createElement(nt.default,{text:"Coupling few color DNA",animation_delay_ms:300,animation_duration_ms:500})),!F&&0===j.length&&o&&"less_color"===i&&f.default.createElement("div",null,f.default.createElement("img",{src:"/src/images/labostration/GENOMA.svg",className:a.imageBackdrop})),!F&&0===j.length&&o&&"less_color"===i&&f.default.createElement("h4",null,f.default.createElement(nt.default,{pre:"[... ",app:" ...]",text:"It can take a while, please wait ~4sec.",animation_delay_ms:Bt?5e3:2500,animation_duration_ms:500})),!F&&0===j.length&&o&&"less_color_auto"===i&&f.default.createElement("h3",null,f.default.createElement(nt.default,{text:"Coupling the DNA of many color",animation_delay_ms:500,animation_duration_ms:500})),!F&&0===j.length&&o&&"less_color_auto"===i&&f.default.createElement("div",null,f.default.createElement("img",{src:"/src/images/labostration/GENOMA.svg",className:a.imageBackdrop})),!F&&0===j.length&&o&&"less_color_auto"===i&&f.default.createElement("h4",null,f.default.createElement(nt.default,{pre:"[... ",app:" ...]",text:"It can take a while, please wait ~7sec.",animation_delay_ms:Bt?5e3:2500,animation_duration_ms:500}))))))}}]),t}(f.default.PureComponent),Yt=function(){var e,t=this;this._request_force_update=function(e,a){return e=void 0===e||e,a=void 0!==a&&a,t.sraf.run_frame((function(){return new Promise((function(e,a){t.forceUpdate(e)}))}),!e,!a,Date.now(),"page_pixel").catch((function(){return t._request_force_update(e,a)}))},this._set_fps_and_xy_elements=function(){setTimeout((function(){t.st4te._less_than_1280w?t.setSt4te({_fps_el:{},_xy_el:{}}):t.setSt4te({_fps_el:document.getElementById("fps_el")||{},_xy_el:document.getElementById("xy_el")||{}})}),1e3)},this._prevent_ctrl_zoom=function(e){e.ctrlKey&&e.preventDefault()},this._set_saved_at_element=function(){t.st4te._saved_at_el||t.setSt4te({_saved_at_el:document.getElementById("saved_at")},(function(){var e=setInterval((function(){t.st4te._saved_at_el.innerText=(0,It.t)(t.st4te._saved_at||Date.now(),{mini:!0})}),1e3);t.setSt4te({_saved_at_interval:e})}))},this._try_load_with_payload=function(e){var n,o,i;0===e.length?(ge.default.get_settings(t._process_settings_info_result),setTimeout((function(){t.setSt4te({_is_pixel_dialog_create_open:!(0!==e.length)},(function(){t._compute_menu_drawer(),t._request_force_update()}))}),725)):(n=!!e.startsWith("data:image/png;base64,"),o=n?"image/png":"image/jpeg",i=t.st4te._import_size,t._handle_load("image_preload"),(0,lt.base64_to_bitmap)(e,(function(e){var n,l,s,_,u;te.default.trigger_voice("data_upload"),l=Bt?512:1024,s=parseInt((n=Bt?960:1440)*n),_=Math.min(parseInt(262144),Math.max(parseInt(i*i),parseInt(l*l))),u=Math.min(parseInt(262144),parseInt(i*i)),(0,lt.bitmap_to_imagedata)(e,s,(function(e){(0,m.default)((function(){return Promise.resolve().then(a.t.bind(null,652,7))})).then((function(a){var n=a.QuantiMatGlobal;(0,lt.imagedata_to_base64)(e,o,(function(e){(0,lt.base64_to_bitmap)(e,(function(a){(0,lt.bitmap_to_imagedata)(a,_,(function(a){n(a,256).then((function(a){var n=r(a,6),o=n[0],i=(n[1],n[2],n[3]),l=n[4],s=n[5];null===o?(window.dispatchEvent(new Event("art-upload-browsererror")),t._handle_load_complete("image_preload",{}),t._handle_load("browser"),te.default.trigger_sfx("alert_high-intensity",.6),te.default.jamy_update("flirty"),te.default.trigger_snackbar("That's our end my little buddy! My instinctive dwelling require a browser I am supporting.",6e3),setTimeout((function(){te.default.trigger_sfx("alert_high-intensity",.7),te.default.jamy_update("sad"),te.default.trigger_snackbar("Abandon, misfortune, sadness... I can't live in this strange place.",7e3),setTimeout((function(){te.default.trigger_sfx("alert_high-intensity",.8),te.default.jamy_update("suspicious"),te.default.trigger_snackbar("Ho no! I just can't, but someone needs to give me back my usual laboratory environment!",7e3),setTimeout((function(){te.default.trigger_sfx("alert_high-intensity",.9),te.default.jamy_update("shocked"),te.default.trigger_snackbar("Yes my enjoyable smartness, gladly you hear me now! Everything gonna be alright to look at me!",9e3),setTimeout((function(){te.default.jamy_update("happy"),te.default.trigger_sfx("alert_high-intensity",1),setTimeout((function(){te.default.trigger_sfx("alert_high-intensity",1)}),750)}),4e3)}),8e3)}),8e3)}),7e3)):(setTimeout((function(){te.default.trigger_snackbar("I am really awesome, within "+parseFloat(s/1e3).toFixed(3)+"sec. I've made disappears "+i+" colors, now there are "+l+" colors!",5700),setTimeout((function(){te.default.jamy_update("happy")}),2e3)}),15e3),(0,lt.imagedata_to_base64)(o,"image/png",(function(a){(0,lt.base64_to_bitmap)(a,(function(a){(0,lt.bitmap_to_imagedata)(a,u,(function(a){(0,lt.imagedata_to_base64)(a,"image/png",(function(a){var n=new Image;n.addEventListener("load",(function(){t._handle_load_complete("image_preload",{}),t.setSt4te({_kb:0,_saved_at:1/0}),t.st4te._canvas.set_canvas_from_image(n,e,{},!1)}),{once:!0,capture:!0}),n.src=a}))}))}))}),S.default))}),S.default)}))}),S.default)}),S.default)})).catch((function(e){t._handle_load_complete("image_preload",{}),te.default.trigger_snackbar("Be sure to have a recent browser or install Google Chrome for using it.",5700),te.default.jamy_update("angry")}))}))}),S.default))},this._handle_canvas_state_will_export=function(){te.default.trigger_loading_update(0),te.default.jamy_update("suspicious"),te.default.trigger_snackbar("Ok buddy! Saving yours.",1500),window.onbeforeunload=function(e){return"Your content that was being saved will be lost."}},this._handle_canvas_state_exported=function(e){if(te.default.trigger_loading_update(75),te.default.jamy_update("flirty"),te.default.trigger_snackbar("Hold on! Compressing...",1e3),e.kb>.5){var a={};a["json_state-ID"+e.id+".json.lz"]=e,t.setSt4te({_kb:e.kb,_saved_at:Date.now()},(function(){t._compute_menu_drawer(),t._request_force_update(),ge.default.set_settings({},(function(e,t){e&&(te.default.trigger_loading_update(100),te.default.trigger_snackbar("Looks like I can't save your file as our compression module can't load.",5700),te.default.jamy_update("angry"))}),a,c.UJS,S.default,(function(e,t){te.default.trigger_loading_update(100),e?(window.onbeforeunload=function(e){},te.default.trigger_snackbar("Laboratory artwork failed to save.",2e3),te.default.jamy_update("sad")):(window.onbeforeunload=function(e){},setTimeout((function(){setTimeout((function(){te.default.jamy_update("happy")}),500),te.default.trigger_snackbar("Success! Laboratory's artwork saved!",2e3)}),1e3))}))}))}else te.default.trigger_loading_update(100),window.onbeforeunload=function(e){},setTimeout((function(){te.default.trigger_snackbar("Huh, we don't store nearly empty file up here, buddy.",2e3)}),2e3)},this._handle_import_json_state_id=function(e){(0,m.default)((function(){return Promise.resolve().then(a.t.bind(null,690,7))})).then((function(a){var n=a.UJS;t._handle_load("image_preload"),te.default.trigger_voice("accessing_memory"),ge.default.get_settings((function(){}),["json_state-ID"+e+".json.lz"],t._process_settings_attachment_result,n,S.default)})).catch((function(){te.default.trigger_snackbar("Looks like I can't get your file as our compression module can't load.",5700),te.default.jamy_update("angry")}))},this._delete_unsaved_pixel_art=function(e){var a={};a["json_state-ID"+e+".json.lz"]="delete",ge.default.set_settings({},t._process_settings_info_result,a,null,null,(function(a,n){if(a)te.default.trigger_snackbar("DELETION, Failed!",2e3);else{te.default.trigger_snackbar("DELETION, Successful!",2e3),te.default.trigger_sfx("alert_high-intensity");var o=Object.assign({},t.st4te._attachment_previews);delete o["json_state-ID"+e+".json.lz"],t.setSt4te({_attachment_previews:o},(function(){t._request_force_update()}))}}))},this._updated_dimensions=function(){var e=document.documentElement,a=document.body||document.getElementsByTagName("body")[0],n=window.innerWidth||e.clientWidth||a.clientWidth,o=(window.innerHeight||e.clientHeight||a.clientHeight,!!(n<1280));t.setSt4te({_less_than_1280w:o},(function(){t._compute_menu_drawer(),t._compute_menu_drawer(),t._request_force_update(!1,!1).then((function(){t._set_fps_and_xy_elements()}))}))},this._handle_wheel=function(e){var a,n,o=e.deltaY;t.st4te._handle_wheel_timestamp+150<Date.now()&&(a=0===o?0:o>0?1:-1,(n=t.st4te._view_name_index+a|0)<0?n=t.st4te._view_name_index=t.st4te._view_names.length-1|0:n%=t.st4te._view_names.length+1|0,t._handle_view_name_change(n,t.st4te._view_name_index,(function(){t.setSt4te({_handle_wheel_timestamp:Date.now()})})))},this._handle_menu_close=function(){t.setSt4te({_menu_mouse_x:null,_menu_mouse_y:null},(function(){t._compute_menu_right_click(),t._request_force_update()}))},this._handle_right_click=function(e,a){a.pxl_color=t.st4te._canvas.get_pixel_color_from_pos(a.pos_x,a.pos_y),t.setSt4te({_menu_mouse_x:e.clientX-2,_menu_mouse_y:e.clientY-4,_menu_data:a,_menu_event:e},(function(){t._compute_menu_right_click(),t._request_force_update()}))},this._set_cursor_fuck_you=function(e){te.default.jamy_update("happy",2500)},this._process_settings_info_result=function(e,a){if(!e&&void 0!==a){var n=void 0!==a.attachment_previews?a.attachment_previews:{};t.setSt4te({_attachment_previews:n},(function(){t._request_force_update()}))}},this._process_settings_attachment_result=function(e,a){var n=t.st4te._canvas.import_JS_state;t._handle_load_complete("image_preload",{}),e?(te.default.trigger_snackbar("Looks like I can't get your file as something was erroneous.",5700),te.default.jamy_update("angry"),t._handle_pixel_dialog_create_open()):(t.setSt4te({_kb:a.kb,_saved_at:Date.now()},(function(){t._request_force_update()})),n(a,(function(){t.setSt4te({_is_pixel_dialog_create_open:!1,_attachment_previews:{}},(function(){t._request_force_update()}))})))},this._handle_view_name_change=function(e){var a,n,o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},s=t.st4te,_=s._view_names,u=s._toolbox_container_ref;i=null===i?t.st4te._view_name_index:i,a=_[e]||_[0],i>(n=-1===_.indexOf(a)?0:_.indexOf(a))?te.default.trigger_sfx("navigation_transition-left"):i<n&&te.default.trigger_sfx("navigation_transition-right"),(o={})._view_name_sub_index=0,u.scrollTop=0,t.setSt4te(l({},o,{_previous_view_name_index:i||t.st4te._view_name_index,_view_name_index:n}),(function(){t._set_props_bypass_this(),t._compute_menu_drawer(),t._request_force_update(),r()}))},this._handle_view_name_switch=function(e,a){var n,o,i,r,s,_,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;("mouse"===e.pointerType&&0===e.button||"mouse"!==e.pointerType)&&(o=(n=t.st4te)._view_names,i=n._toolbox_container_ref,u=null===u?t.st4te._view_name_index:u,r=o[a]||o[0],u>(s=-1===o.indexOf(r)?0:o.indexOf(r))?te.default.trigger_sfx("navigation_transition-left"):te.default.trigger_sfx("navigation_transition-right"),_={},u!==s&&(_._view_name_sub_index=0,i.scrollTop=0),t.setSt4te(l({},_,{_previous_view_name_index:u||t.st4te._view_name_index,_view_name_index:s}),(function(){t._set_props_bypass_this(),t._compute_menu_drawer(),t._request_force_update()})))},this._handle_keydown=function(e){var a=t.st4te,n=a._tool,o=a._view_name_index,i=a._view_names,r=a._is_pixel_dialog_post_edit_open;if(e&&!r){if("MINE"===n)switch(e.preventDefault(),e.keyCode){case 38:t.setSt4te({_mine_player_direction:"UP"});break;case 40:t.setSt4te({_mine_player_direction:"DOWN"});break;case 37:t.setSt4te({_mine_player_direction:"LEFT"});break;case 39:t.setSt4te({_mine_player_direction:"RIGHT"})}else switch(e.keyCode){case 37:t._handle_view_name_change(o-1<0?i.length-1:o-1);break;case 39:t._handle_view_name_change(o+1>i.length-1?0:o+1);break;case 38:t._scroll_to_drawer(-1);break;case 40:t._scroll_to_drawer(1)}"1"===e.key?t._handle_view_name_change(0):"2"===e.key?t._handle_view_name_change(1):"3"===e.key?t._handle_view_name_change(2):"4"===e.key?t._handle_view_name_change(3):"5"===e.key?t._handle_view_name_change(4):"6"===e.key?t._handle_view_name_change(5):"7"===e.key?t._handle_view_name_change(6):e.ctrlKey&&"z"===e.key?t._undo():e.ctrlKey&&"y"===e.key?t._redo():e.ctrlKey&&"m"===e.key?t._set_tool("MINE"):e.ctrlKey&&"o"===e.key?t._upload_image():e.ctrlKey&&"i"===e.key?t._handle_file_import():e.ctrlKey||"o"!==e.key?e.ctrlKey||"b"!==e.key?e.ctrlKey||"h"!==e.key?e.ctrlKey||"x"!==e.key?e.ctrlKey||"u"!==e.key?e.ctrlKey||"r"!==e.key?e.ctrlKey&&"r"===e.key?t._set_tool("SELECT RECTANGLE"):e.ctrlKey||"e"!==e.key?e.ctrlKey&&"e"===e.key?t._set_tool("SELECT ELLIPSE"):e.ctrlKey||"l"!==e.key?e.ctrlKey&&"l"===e.key?t._set_tool("SELECT LINE"):e.ctrlKey||"p"!==e.key?e.ctrlKey||"n"!==e.key?e.ctrlKey&&"p"===e.key?t._set_tool("SELECT PIXEL"):e.ctrlKey&&"n"===e.key?t._set_tool("SELECT PENCIL PERFECT"):e.ctrlKey||"m"!==e.key?e.ctrlKey||"f"!==e.key?e.ctrlKey&&"f"===e.key?t._set_tool("SELECT PATH"):e.ctrlKey&&"k"===e.key?t._set_tool("SELECT COLOR THRESHOLD"):e.ctrlKey&&"g"===e.key?t._set_tool("SELECT COLOR"):e.ctrlKey&&"q"===e.key?t._download_image(1):e.ctrlKey&&"s"===e.key?t._download_image(32):"Enter"===e.key?(0,t.st4te._canvas.confirm_import)():e.ctrlKey?n.includes("SELECT")?(t.setSt4te({_previous_tool_timestamp:Date.now()}),t._set_select_mode("REMOVE")):(t.setSt4te({_previous_tool_timestamp:Date.now()}),t._set_tool("PICKER",!1)):"Shift"===e.key&&(n.includes("SELECT")?(t.setSt4te({_previous_tool_timestamp:Date.now()}),t._set_select_mode("ADD")):(t.setSt4te({_previous_tool_timestamp:Date.now()}),t._set_tool("MOVE",!1))):t._set_tool("CONTOUR"):t._set_tool("SET PENCIL MIRROR"):t._set_tool("PENCIL PERFECT"):t._set_tool("PENCIL"):t._set_tool("LINE"):t._set_tool("ELLIPSE"):t._set_tool("RECTANGLE"):t._set_tool("BORDER"):t._set_tool("EXCHANGE"):t._set_tool("HUE BUCKET"):t._set_tool("BUCKET"):t._set_tool("PICKER")}},this._undo=function(){(100*Math.random()|0)>90&&te.default.trigger_snackbar("That was a nice undo!"),t.st4te._canvas.undo()},this._redo=function(){(100*Math.random()|0)>95&&(te.default.jamy_update("suspicious"),te.default.trigger_snackbar("Even nicer redo! Doo,doo,doo...",2500),setTimeout((function(){te.default.jamy_update("annoyed"),te.default.trigger_snackbar("Did I already said that today? I won't feel much smarter today.",3500),setTimeout((function(){te.default.jamy_update("shocked"),te.default.trigger_snackbar("No, huh!? I have feelings.",2500),setTimeout((function(){te.default.jamy_update("flirty"),te.default.trigger_snackbar("I am a real booooy! Yuhhh!")}),3e3)}),4e3)}),3e3)),t.st4te._canvas.redo()},this._set_png_compressors=function(){var e=t.st4te._canvas.set_png_compressors;(0,m.default)((function(){return a.e(0).then(a.t.bind(null,655,7))})).then((function(t){var n=t.png_quant;(0,m.default)((function(){return a.e(1).then(a.t.bind(null,663,7))})).then((function(t){var a=t.oxi_png;e(n,a)}))}))},this._backup_state=function(){var e=t.st4te._canvas,n=e.export_state,o=e.set_png_compressors;(0,m.default)((function(){return a.e(0).then(a.t.bind(null,655,7))})).then((function(e){var t=e.png_quant;(0,m.default)((function(){return a.e(1).then(a.t.bind(null,663,7))})).then((function(e){var a=e.oxi_png;o(t,a),n()}))}))},this._download_image=function(e){var n=t.st4te._canvas,o=n.get_base64_png_data_url,i=n.xxhashthat,r=n.set_png_compressors;window.dispatchEvent(new Event("art-download-raster"+e)),void 0!==o&&void 0!==i&&void 0!==r&&(0,m.default)((function(){return a.e(0).then(a.t.bind(null,655,7))})).then((function(n){var l=n.png_quant;(0,m.default)((function(){return a.e(1).then(a.t.bind(null,663,7))})).then((function(a){var n=a.oxi_png;r(l,n),o(e,!1,1,100,100).then((function(a){var n=a.url,o=i(n),r=document.createElement("a");r.download="PIXAPICS-"+o+"-PIXELATED-"+e+"x_RAS.png",r.href=n,r.click(),r.remove(),t._propose_selling_nft()}))}))}))},this._download_svg=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"xbrz",n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=t.st4te._canvas,s=l.get_base64_png_data_url,_=l.set_png_compressors,u=l.xxhashthat;window.dispatchEvent(new Event("art-download-vector"+e.toLowerCase())),te.default.trigger_voice("please_wait"),te.default.trigger_snackbar("Please wait... Files will download in a few seconds.",5700),te.default.jamy_update("happy"),t.setSt4te({_loading:!0,_loading_process:"image_render"},(function(){(0,m.default)((function(){return a.e(0).then(a.t.bind(null,655,7))})).then((function(l){var c=l.png_quant;(0,m.default)((function(){return a.e(1).then(a.t.bind(null,663,7))})).then((function(a){var l=a.oxi_png;_(c,l),s(1,!0,1,100,100).then((function(a){var l=a.url,s=a.colors,_=u(l),c=t.st4te._files_waiting_download;c.push({name:"PIXAPICS-"+_+"-PIXELATED-1x_RAS.png",url:l}),t.setSt4te({_files_waiting_download:c},(function(){t._request_force_update()})),te.default.trigger_voice("processing"),(0,rt.base64png_to_xbrz_svg)(l,(function(a,n,o,i){var l=t.st4te._files_waiting_download;l.push({name:"PIXAPICS-"+_+"-"+e.toUpperCase()+"-"+n+"x_RAS.png",url:""+a}),t.setSt4te({_files_waiting_download:l},(function(){t._request_force_update(),r?(0,st.postJSON)("https://real-life-image.pixa-pics.workers.dev/init",""+a,(function(e,a){a&&(0,st.postJSON)("https://real-life-image.pixa-pics.workers.dev/get",""+a,(function(e,a){a&&a.split(" ").forEach((function(e){fetch(e).then((function(e){e.blob().then((function(e,a){new Promise((function(t,a){var n=new FileReader;n.onload=function(){t(n.result)},n.onerror=function(){var a=URL.createObjectURL(e);t(a)},n.readAsDataURL(e)})).then((function(e){l.push({name:"PIXAPICS-"+_+"-PHOTO-REAL-BIG+AI_RAS-#"+a+".jpg",url:""+e}),t.setSt4te({_files_waiting_download:l},t._request_force_update)}))}))}))}))}),"application/text")}),"application/text"):(te.default.trigger_snackbar("Looks like we had an unexpected issue",5700),te.default.jamy_update("angry"))}))}),(function(a,n){if(a.length>0){var o=t.st4te._files_waiting_download;o.push({name:"PIXAPICS-"+_+"-"+e.toUpperCase()+"-"+n+"x_VEC.svg",url:a}),t.setSt4te({_files_waiting_download:o},(function(){t._request_force_update()}))}t.setSt4te({_loading:!1,_loading_process:""},(function(){t._propose_selling_nft()}))}),(function(a,n){if(a.length>0){var o=t.st4te._files_waiting_download;o.push({name:"PIXAPICS-"+_+"-"+e.toUpperCase()+"-"+n+"+CRT.png",url:a}),t.setSt4te({_files_waiting_download:o},(function(){t._request_force_update()}))}}),Array.from(s),e,!!n,!!o,!!i)}))}))}))}))},this._propose_selling_nft=function(){te.default.trigger_voice("complete"),te.default.trigger_sfx("hero_decorative-celebration-02"),te.default.trigger_snackbar("Fantastic!",1500),setTimeout((function(){te.default.trigger_share(),window.dispatchEvent(new Event("home-action-tryshare")),setTimeout((function(){te.default.trigger_sfx("alert_high-intensity"),te.default.trigger_snackbar("Your unique and stunning pixel art can now be turned into a valuable digital asset through the power of blockchain technology.",7e3),setTimeout((function(){te.default.trigger_sfx("hero_decorative-celebration-02"),te.default.trigger_snackbar("Sell your pixel art as an NFT on your favourite platform and become a part of the growing NFT community.",9e3)}),8e3)}),2e3)}),2e3)},this._continue_download=function(){var e,a,n=t.st4te._files_waiting_download;n.length>0&&(e=n.shift(),(a=document.createElement("a")).download=""+e.name,a.href=""+e.url,a.click(),delete e.url,delete e.name,a.remove(),t.setSt4te({_files_waiting_download:n},(function(){t._request_force_update()})))},this._handle_keyup=function(e){var a,n,o,i,r=t.st4te._is_pixel_dialog_post_edit_open;e&&!r&&(e.preventDefault(),e.stopPropagation(),n=(a=t.st4te)._tool,o=a._memory_tool,i=a._previous_tool_timestamp,o&&o!==n&&Date.now()-1e4<i?(t.setSt4te({_previous_tool_timestamp:1/0}),t._set_tool(o)):i<Date.now()&&n.includes("SELECT")&&(t.setSt4te({_previous_tool_timestamp:1/0}),t._set_select_mode("REPLACE")))},this._upload_image=function(e){t._handle_file_upload(e)},this._upload_image_library=function(){t.setSt4te({_library_dialog_open:!0,_library_type:"open"},(function(){t._request_force_update()}))},this._close_library=function(){t.setSt4te({_library_dialog_open:!1},(function(){t._request_force_update()}))},this._from_library=function(e){var a=t.st4te._library_type,n=t.st4te._canvas,o=n.set_canvas_from_image,i=n.import_image_on_canvas,r=new Image;r.src=e,r.onload=function(){"open"===a?(t.setSt4te({_kb:0,_saved_at:1/0},(function(){t._request_force_update()})),o(r)):"import"===a&&i(r,e),t._close_library()}},this._handle_file_upload=(e=o(regeneratorRuntime.mark((function e(a){var n,i,r,l,s,_,u,c,d,m,p,f,h,g,v,b,y,w,x;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"dataTransfer"in a&&a.dataTransfer.files.length>0&&(a.preventDefault(),a.stopPropagation()),t.st4te._drag_file&&t.setSt4te({_drag_file:0},(function(){t._request_force_update()})),n=(a.target||{}).files||(a.srcElement||{}).files||(a.currentTarget||{}).files||((a.path||[])[0]||{}).files||(a.dataTransfer||{}).files||[],i=n[0]||null,r=null;for(l=0;l<n.length;l++)(r=n[l]).type.startsWith("image/")&&(l=n.length);s=new Mt.LongCaptionerAPI,_=new Mt.FaceToAllAPI,null===r&&null===i?(te.default.trigger_snackbar("Looks like I can't get your file as something is erroneous.",5700),te.default.jamy_update("angry")):null!==r&&(u=!("image/png"!==r.type),c=u?"image/png":r.type,d=t.st4te,m=d._import_colorize,p=d._import_size,f=t.st4te._canvas.set_canvas_from_image,g=parseInt((h=Bt?623.5382907247958:881.8163074019441)*h),v=Math.min(parseInt(262144),parseInt(p*p)),b=1,y=function(){var e=o(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t._handle_load("image_preload"),te.default.trigger_voice("data_upload"),(0,lt.file_to_imagedata_resized)(a,g,(function(e){(0,lt.imagedata_to_base64)(e,c,(function(a){for(;Math.round(e.width*b)*Math.round(e.height*b)>v;)b-=.01;(0,lt.base64_sanitize)(a,(function(e){(0,lt.base64_to_bitmap)(e,(function(e){(0,lt.bitmap_to_imagedata)(e,e.width*e.height|0,(function(e){(0,lt.imagedata_to_base64)(e,"image/png",(function(e){var n=new Image;n.addEventListener("load",(function(){t._handle_load_complete("image_preload",{}),t.setSt4te({_kb:0,_saved_at:1/0}),f(n,a,{},!1),setTimeout((function(){te.default.trigger_snackbar("I am really awesome, here is your pixel art!",5700),setTimeout((function(){te.default.jamy_update("happy")}),2e3)}),1e3)}),{once:!0,capture:!0}),n.src=e}),S.default)}),S.default)}),S.default)}),null,b,"doppel")}),S.default)}),S.default);case 3:case"end":return e.stop()}}),e,t)})));return function(t){return e.apply(this,arguments)}}(),0===parseInt(m)?y(r).then((function(){})):(w=function(){var e=o(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return te.default.jamy_update("angry"),te.default.trigger_voice("processing"),te.default.trigger_loading_update(10),te.default.trigger_snackbar("Uploading file (3 sec)"),te.default.jamy_update("annoyed",8e3),te.default.trigger_loading_update(20),te.default.trigger_snackbar("Creating captions (10 sec)"),setTimeout((function(){te.default.jamy_update("annoyed",8e3),te.default.trigger_loading_update(20),te.default.trigger_snackbar("Creating captions (5/10)")}),5e3),e.next=10,s.run(t);case 10:return a=e.sent,te.default.trigger_snackbar("IMAGE: "+a,5e3),setTimeout((function(){te.default.jamy_update("flirty",8e3),te.default.trigger_loading_update(40),te.default.trigger_snackbar("Loading pixel art style (3 sec)")}),4e3),setTimeout((function(){te.default.jamy_update("annoyed",5e3),te.default.trigger_loading_update(60),te.default.trigger_snackbar("Waiting on generation (15 sec)"),setTimeout((function(){te.default.jamy_update("annoyed",8e3),te.default.trigger_loading_update(20),te.default.trigger_snackbar("Waiting on generation (5/15)")}),5e3),setTimeout((function(){te.default.jamy_update("annoyed",8e3),te.default.trigger_loading_update(20),te.default.trigger_snackbar("Waiting on generation (10/15)")}),1e4)}),4e3),e.next=16,_.run(t,a);case 16:return n=e.sent,te.default.jamy_update("flirty",666),te.default.trigger_loading_update(100),te.default.trigger_snackbar("Receiving results (3 sec)"),te.default.jamy_update("happy",666),te.default.trigger_sfx("alert_high-intensity",1,"md"),te.default.trigger_loading_update(0),te.default.trigger_snackbar("AI Processing [OK]"),x._handle_load_complete("image_ai",{}),x._handle_load("image_preload"),e.abrupt("return",Promise.resolve(n));case 27:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),x=t,t._handle_load("image_ai"),w(r).then((function(e){y(e)}))));case 9:case"end":return e.stop()}}),e,t)}))),function(t){return e.apply(this,arguments)}),this._handle_file_import=function(e){var a,n,o,i,r=(e.target||{}).files||(e.srcElement||{}).files||(e.currentTarget||{}).files||((e.path||[])[0]||{}).files||[],l=(r[0],null);for(a=0;a<r.length;a++)(n=r[a]).type.startsWith("image/")&&(l=n);null!==l&&(o=new Image,i=t.st4te._canvas.import_image_on_canvas,(0,lt.file_to_base64)(l,(function(e){o.onload=function(){i(o,e),t._handle_menu_close()},o.src=e}),S.default))},this._import_image_library=function(){t.setSt4te({_library_dialog_open:!0,_library_type:"import"},(function(){t._request_force_update()}))},this._handle_load=function(e){te.default.trigger_loading_update(0),t.setSt4te({_loading:!0,_loading_process:e},(function(){t._request_force_update()})),"image_preload"===e&&(t._handle_edit_drawer_close(),t._handle_menu_close(),t._handle_pixel_dialog_create_close())},this._handle_load_complete=function(e,a){te.default.trigger_loading_update(100),t.setSt4te({_loading:!1,_loading_process:e},(function(){t._request_force_update().then((function(){t.st4te._saved_at>Date.now()-60&&t._backup_state(),t._updated_dimensions()}))})),"less_color"===e||"less_color_auto"===e?0!==a.colors_removed&&(te.default.trigger_snackbar("I am a magician! And "+a.colors_removed+" colors are now gone, only "+a.colors_remaining+" remaining."),te.default.trigger_sfx("navigation_selection-complete-celebration"),te.default.jamy_update("happy")):"image_load"===e&&(a.only_scan?te.default.trigger_sfx("ui_scan"):(te.default.trigger_sfx("ui_scan"),te.default.trigger_snackbar("DONE! We've imported an image with my now "+a.number_of_colors+" colors."),setTimeout((function(){te.default.trigger_voice("complete")}),1e3),te.default.jamy_update("happy"),t._handle_edit_drawer_close(),t._handle_menu_close(),t._handle_pixel_dialog_create_close()))},this._set_ripple_ref=function(e){null!=e&&t.setSt4te({_ripple:e})},this._set_canvas_ref=function(e){null!=e&&t.setSt4te({_canvas:e,_filters:e.get_filter_names()},(function(){t._request_force_update()}))},this._handle_position_change=function(e){var a,n;void 0!==t.st4te._xy_el&&(a=-1===e.x?"out":e.x+1,n=-1===e.y?"out":e.y+1,t.st4te._xy_el.textContent=" | X: "+a+", Y: "+n+" ")},this._handle_fps_change=function(e){void 0!==t.st4te._fps_el&&(t.st4te._fps_el.textContent="FPS: "+e)},this._handle_can_undo_redo_change=function(e,a){e=parseInt(e),a=parseInt(a);var n=!(t.st4te._can_undo===e&&t.st4te._can_redo===a);t.setSt4te({_can_undo:e,_can_redo:a},(function(){n&&t._request_force_update()}))},this._handle_size_change=function(e,a){var n=!(t.st4te._width===e&&t.st4te._height===a);t.setSt4te({_width:e,_height:a},(function(){n&&(t._compute_menu_drawer(),t._request_force_update())}))},this._handle_current_color_change=function(e,a){e=void 0!==e.rgb?qt.new_of(e.rgb.r,e.rgb.g,e.rgb.b,Math.round(parseInt(255*e.rgb.a))).hex:qt.new_hex(e).hex;var n=qt.new_hex(e).hsla[0];t.setSt4te({_current_color:e,_hue:n})},this._handle_relevant_action_event=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#ffffff",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=t.st4te._ripple;e&&o&&(te.default.trigger_sfx("navigation_selection-complete-celebration"),0!==n&&t.setSt4te({_ripple_color:a,_ripple_opacity:n},(function(){setTimeout((function(){o.start(e)}),25),setTimeout((function(){o.stop(e)}),200)})))},this._handle_something_selected_change=function(e){var a=!(t.st4te._is_something_selected===e);t.setSt4te({_is_something_selected:e},(function(){a&&(t._compute_menu_right_click(),t._request_force_update())}))},this._set_value_from_slider_with_update=function(e,a){t.setSt4te({_slider_value:a||e.target.value},(function(){t._set_props_bypass_this()}))},this._set_width_from_slider=function(e,a){t.setSt4te({_slider_value_width:a||e.target.value},(function(){t._set_props_bypass_this()}))},this._set_height_from_slider=function(e,a){t.setSt4te({_slider_value_height:a||e.target.value},(function(){t._set_props_bypass_this()}))},this._set_import_size=function(e,a){t.setSt4te({_import_size:a||e.target.value})},this._set_import_colorize=function(e,a){t.setSt4te({_import_colorize:a||e.target.value})},this._revert_tool=function(){t.setSt4te({_tool:t.st4te._memory_tool})},this._set_tool=function(e){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t.setSt4te({_tool:e.toUpperCase()},(function(){t._set_props_bypass_this()})),a&&t.setSt4te({_memory_tool:e.toUpperCase()})},this._set_select_mode=function(e){t.setSt4te({_select_mode:e.toUpperCase()},(function(){t._set_props_bypass_this()}))},this._set_pencil_mirror_mode=function(e){t.setSt4te({_pencil_mirror_mode:e.toUpperCase()},(function(){t._set_props_bypass_this()}))},this._switch_with_second_color=function(){var e=t.st4te,a=e._current_color,n=e._second_color;t.setSt4te({_current_color:n,_second_color:a},(function(){t._set_props_bypass_this()}))},this._show_hide_canvas_content=function(){t.setSt4te({_hide_canvas_content:!t.st4te._hide_canvas_content},(function(){t._set_props_bypass_this(),t.forceUpdate()}))},this._show_hide_background_image=function(){t.setSt4te({_show_original_image_in_background:!t.st4te._show_original_image_in_background},(function(){t._set_props_bypass_this()}))},this._show_hide_transparent_image=function(){t.setSt4te({_show_transparent_image_in_background:!t.st4te._show_transparent_image_in_background},(function(){t._set_props_bypass_this()}))},this._handle_image_import_mode_change=function(e){t.setSt4te({_is_image_import_mode:e},(function(){t._set_props_bypass_this(),t._request_force_update()}))},this._handle_layers_change=function(e,a){t.setSt4te({_previous_layer_index:parseInt(t.st4te._layer_index),_layer_index:parseInt(e),_layers:a},(function(){t._set_props_bypass_this()}))},this._handle_filters_thumbnail_change=function(e,a,n){t.st4te._swipeable_drawer_handle_filters_thumbnail_change(e,a,n)},this._set_filters_callback=function(e){t.setSt4te({_swipeable_drawer_handle_filters_thumbnail_change:e})},this._set_props_callback=function(e){t.setSt4te({_swipeable_drawer_set_props:e},(function(){t._set_props_bypass_this(),t._request_force_update()}))},this._set_props_bypass_this=function(){var e=t.st4te,a=e._view_name_index,n=e._previous_view_name_index,o=e._layers,i=e._layer_index,r=e._hide_canvas_content,l=e._show_original_image_in_background,s=e._show_transparent_image_in_background,_=e._hue,u=e._current_color,c=e._second_color,d=e._slider_value,m=e._tool,p=e._width,f=e._height,h=e._filters,g=e._select_mode,v=e._pencil_mirror_mode,b=e._is_something_selected,y=e._is_image_import_mode,w=e._import_size,x=e._import_colorize,k=e._slider_value_width,E=e._slider_value_height;t.st4te._canvas&&t.st4te._canvas._set_props({tool:m,hide_canvas_content:r,show_original_image_in_background:l&&!0,show_transparent_image_in_background:s,select_mode:g,pencil_mirror_mode:v,hue:_,bucket_threshold:d,color_loss:d,pxl_current_color:u,default_size:w,ideal_size:w,max_size:1.5*w}),t.st4te._swipeable_drawer_set_props({view_name_index:a%7,previous_view_name_index:n%7,layers:o,layer_index:i,hide_canvas_content:r,show_original_image_in_background:l,show_transparent_image_in_background:s,hue:_,current_color:u,second_color:c,slider_value:parseFloat(d),slider_value_width:k,slider_value_height:E,tool:m,width:parseInt(p),height:parseInt(f),filters:h,select_mode:g,pencil_mirror_mode:v,is_something_selected:b,is_image_import_mode:y,import_size:w,import_colorize:x})},this._handle_game_end=function(){t.setSt4te({_game_ended:!0},(function(){setTimeout((function(){t.setSt4te({_game_ended:!1})}),5e3)}))},this._handle_edit_drawer_open=function(e,a){var n,o,i,r,l,s,_;a=void 0!==a?a:t.st4te._view_name_index,n=!(t.st4te._view_name_index!==a)&&t.st4te._is_edit_drawer_open,o=t.st4te._toolbox_container_ref,i=!0,r=void 0,n&&null!==o?(l="swipetoolbox_i_"+a+"_"+(r=t.st4te._view_name_sub_index||0),r++,null!==(s=(document.getElementsByClassName(l)||[])[0]||null)?o.scrollTop=s.offsetTop:(r=0,o.scrollTop=0)):(r=0,o.scrollTop=0),_=!(t.st4te._is_edit_drawer_open===i&&t.st4te._view_name_index===a),t.setSt4te({_is_edit_drawer_open:i,_view_name_index:a,_view_name_sub_index:r},(function(){_&&(t._compute_menu_drawer(),t._request_force_update())}))},this._handle_edit_drawer_close=function(){var e=!!t.st4te._is_edit_drawer_open;t.setSt4te({_is_edit_drawer_open:!1},(function(){e&&(t._compute_menu_drawer(),t._request_force_update())}))},this._set_current_color=function(e){t._handle_menu_close(),t.setSt4te({_current_color:e},(function(){t._set_props_bypass_this()}))},this._exchange_pixel_colors=function(e,a,n){var o=t.st4te._canvas.exchange_pixel_color,i=t.st4te._menu_data;o(e,a,n),i.pxl_color=n,t._handle_menu_close(),t.setSt4te({_menu_data:i})},this._to_auto_medium_more_contrast=function(){(0,t.st4te._canvas.auto_adjust_contrast)(.2),te.default.trigger_voice("enhanced")},this._to_auto_medium_more_saturation=function(){(0,t.st4te._canvas.auto_adjust_saturation)(.2),te.default.trigger_voice("enhanced")},this._less_colors_auto=function(){var e=t.st4te,a=e._layers,n=e._layer_index,o=t.st4te._canvas.to_less_color;te.default.trigger_voice("please_wait"),(a[n]||{}).number_of_colors,o("auto")},this._get_average_color_of_selection=function(){var e=(0,t.st4te._canvas.get_average_color_of_selection)();t._handle_current_color_change(e)},this._handle_pixel_dialog_create_close=function(){t.setSt4te({_is_pixel_dialog_create_open:!1,_attachment_previews:{}},(function(){t._request_force_update()}))},this._handle_pixel_dialog_create_open=function(){!1===t.st4te._is_pixel_dialog_create_open&&te.default.trigger_sfx("hero_decorative-celebration-02"),ge.default.get_settings(t._process_settings_info_result),setTimeout((function(){t.setSt4te({_is_pixel_dialog_create_open:!0},(function(){t._request_force_update()}))}),725)},this._set_toolbox_container_ref=function(e){null!=e&&t.setSt4te({_toolbox_container_ref:e})},this._set_root_ref=function(e){null!=e&&t.setSt4te({_root_ref:e},(function(){t.st4te._root_ref.addEventListener("drop",t._handle_file_upload,{capture:!0}),t.st4te._root_ref.addEventListener("dragenter",t._drop_start),t.st4te._root_ref.addEventListener("dragover",t._drop_start),t.st4te._root_ref.addEventListener("dragleave",t._drop_end)}))},this._drop_start=function(e){e.preventDefault(),e.stopPropagation(),t.setSt4te({_drag_file:Date.now()},(function(){t._request_force_update()}))},this._drop_end=function(e){e.preventDefault(),e.stopPropagation(),t.st4te._drag_file&&t.setSt4te({_drag_file:0},(function(){t._request_force_update()}))},this._scroll_to_drawer=function(e){var a,n,o,i;if((""+e).startsWith("swipetoolbox_i_"))a=(document.getElementsByClassName(e)||[])[0]||null,t.st4te._toolbox_container_ref.scrollTop=null!==a?a.offsetTop:0;else{for(n=t.st4te._toolbox_container_ref.scrollTop,o=(document.getElementsByClassName("swipetoolbox_i_"+t.st4te._view_name_index+"_0")||[])[0]||{},i=1;o;){if(!(n>o.offsetTop)){o=(document.getElementsByClassName("swipetoolbox_i_"+t.st4te._view_name_index+"_"+(i-1+e))||[])[0]||{};break}o=(document.getElementsByClassName("swipetoolbox_i_"+t.st4te._view_name_index+"_"+i++)||[])[0]||{}}t.st4te._toolbox_container_ref.scrollTop=o.offsetTop||0}},this._toggle_perspective=function(){var e=!t.st4te._perspective;e?(te.default.trigger_voice("vision_activated"),t._set_tool("MOVE",!1)):(te.default.trigger_voice("vision_deactivated"),t._revert_tool()),t.setSt4te({_perspective:e},(function(){t._request_force_update()}))},this._smooth_adjust=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;(0,t.st4te._canvas.smooth_adjust)(e)},this._close_text=function(){t.setSt4te({_text_dialog_open:!1},(function(){t._request_force_update()}))},this._open_text=function(){t.setSt4te({_text_dialog_open:!0},(function(){t._request_force_update()}))},this._draw_text=function(e,a){t._close_text(),(0,t.st4te._canvas.write_text)(e,a)},this._resume_video=function(){try{document.getElementById("labintro-video").play()}catch(e){}},this._compute_menu_right_click=function(){var e=t.st4te,a=e.classes,n=e._canvas,o=e._current_color,i=e._tool,r=e._width,l=e._height,s=e._pencil_mirror_mode,_=e._is_something_selected,u=e._menu_mouse_y,c=e._menu_mouse_x,d=e._menu_data,m=e._menu_event;d.pos_x=-1===d.pos_x?"out":d.pos_x,d.pos_y=-1===d.pos_y?"out":d.pos_y,t.menu=f.default.createElement(K.default,{className:a.contextMenuFuckYouDisable,PaperProps:{style:{maxHeight:380,width:240,overflowY:"overlay",contain:"paint style layout",scrollBehavior:"smooth",userSelect:"none",pointerEvents:u||c?"all":"none"}},onContextMenu:function(e){e.preventDefault()},MenuListProps:{dense:!0},transitionDuration:{enter:125,exit:250},open:!!u||!!c,onClose:t._handle_menu_close,disablePortal:!1,keepMounted:!0,anchorReference:"anchorPosition",anchorPosition:{top:0|u,left:0|c}},f.default.createElement("span",{style:{textAlign:"left",padding:"12px 8px",color:"#666"}},"X: ",d.pos_x,", Y: ",d.pos_y),f.default.createElement("div",{style:"SET PENCIL MIRROR"===i||"NONE"!==s?{}:{display:"none"}},f.default.createElement(W.default,{className:a.contextMenuSubheader},"Tools"),f.default.createElement(I.default,{button:!0,divider:!0,disabled:"PENCIL"===i,onClick:function(){t._set_tool("PENCIL")}},f.default.createElement(G.default,null,f.default.createElement(He.default,null)),f.default.createElement(J.default,{primary:"Pencil"})),f.default.createElement(I.default,{button:!0,divider:!0,disabled:"PENCIL PERFECT"===i,onClick:function(){t._set_tool("PENCIL PERFECT")}},f.default.createElement(G.default,null,f.default.createElement(Ye.default,null)),f.default.createElement(J.default,{primary:"Pencil perfect"})),f.default.createElement(W.default,{className:a.contextMenuSubheader},"Mirror mode"),[{icon:f.default.createElement(Fe.default,null),disabled:"NONE"===s,text:"None",on_click:function(){t._set_pencil_mirror_mode("NONE")}},{icon:f.default.createElement(Fe.default,null),disabled:"VERTICAL"===s,text:"Vertical",on_click:function(){t._set_pencil_mirror_mode("VERTICAL")}},{icon:f.default.createElement(Fe.default,null),disabled:"HORIZONTAL"===s,text:"Horizontal",on_click:function(){t._set_pencil_mirror_mode("HORIZONTAL")}},{icon:f.default.createElement(Fe.default,null),disabled:"BOTH"===s,text:"Both",on_click:function(){t._set_pencil_mirror_mode("BOTH")}}].map((function(e){return f.default.createElement(I.default,{key:e.text,button:!0,divider:!0,disabled:e.disabled,onClick:e.on_click},f.default.createElement(G.default,null,e.icon),f.default.createElement(J.default,{primary:e.text}))}))),f.default.createElement("div",{style:_?{}:{display:"none"}},f.default.createElement(W.default,{className:a.contextMenuSubheader},"Apply to selection"),[{icon:f.default.createElement(Qe.default,null),text:"Unselect",on_click:function(){n.to_selection_none()}},{icon:f.default.createElement(Ne.default,null),text:"Colorize dynamical",on_click:function(){n.to_selection_changes(o,!1)}},{icon:f.default.createElement(Ve.default,null),text:"Get average color",on_click:function(){t._get_average_color_of_selection()}},{icon:f.default.createElement(Ce.default,null),text:"Shrink",on_click:function(){n.to_selection_size(-1)}},{icon:f.default.createElement(Ce.default,null),text:"Grow",on_click:function(){n.to_selection_size(1)}},{icon:f.default.createElement(Te.default,null),text:"Border",on_click:function(){n.to_selection_border()}},{icon:f.default.createElement(Ne.default,null),text:"Bucket",on_click:function(){n.to_selection_bucket()}},{icon:f.default.createElement(Ce.default,null),text:"Crop",on_click:function(){n.to_selection_crop()}},{icon:f.default.createElement(Re.default,null),text:"Invert",on_click:function(){n.to_selection_invert()}},{icon:f.default.createElement(Oe.default,null),text:"Copy",on_click:function(){n.copy_selection()}},{icon:f.default.createElement(je.default,null),text:"Cut",on_click:function(){n.cut_selection()}},{icon:f.default.createElement(Be.default,null),text:"Erase",on_click:function(){n.erase_selection()}}].map((function(e){return f.default.createElement(I.default,{key:e.text,button:!0,divider:!0,onClick:e.on_click},f.default.createElement(G.default,null,e.icon),f.default.createElement(J.default,{primary:e.text}))}))),f.default.createElement(W.default,{style:null===d.pxl_color?{display:"none"}:{},className:a.contextMenuSubheader},"Color"),f.default.createElement(I.default,{button:!0,divider:!0,style:null===d.pxl_color?{display:"none"}:{},disabled:d.pxl_color===o||null===d.pxl_color,onClick:function(e){t._set_current_color(d.pxl_color),t._handle_relevant_action_event(m,d.pxl_color,1,!0)}},f.default.createElement(G.default,null,f.default.createElement(ie.default,{style:{color:d.pxl_color,background:"repeating-conic-gradient(#80808055 0% 25%, #00000000 0% 50%) 50% / calc(200% / "+r+") calc(200% / "+l+")"}})),f.default.createElement(J.default,{primary:"Pick color"})),f.default.createElement(I.default,{button:!0,divider:!0,style:null===d.pxl_color?{display:"none"}:{},disabled:d.pxl_color===o||null===d.pxl_color,onClick:function(e){t._exchange_pixel_colors(d.pos_x,d.pos_y,o+""),t._handle_relevant_action_event(m,o,1,!0)}},f.default.createElement(G.default,null,f.default.createElement(ie.default,{style:{color:o,background:"repeating-conic-gradient(#80808055 0% 25%, #00000000 0% 50%) 50% / calc(200% / "+r+") calc(200% / "+l+")"}})),f.default.createElement(J.default,{primary:"Replace color"})),f.default.createElement(W.default,{className:a.contextMenuSubheader},"Effect"),f.default.createElement(I.default,{button:!0,divider:!0,onClick:function(e){return t._to_auto_medium_more_contrast()}},f.default.createElement(G.default,null,f.default.createElement(be.default,null)),f.default.createElement(J.default,{primary:"Increase contrast"})),f.default.createElement(I.default,{button:!0,divider:!0,onClick:function(e){return t._to_auto_medium_more_saturation()}},f.default.createElement(G.default,null,f.default.createElement(be.default,null)),f.default.createElement(J.default,{primary:"Increase saturation"})),f.default.createElement(I.default,{button:!0,divider:!0,onClick:function(e){return t._handle_edit_drawer_open(null,6)}},f.default.createElement(G.default,null,f.default.createElement(ne.default,null)),f.default.createElement(J.default,{primary:"Add a filter"})),f.default.createElement(I.default,{button:!0,divider:!0,onClick:function(e){n.less_colors_stepped()}},f.default.createElement(G.default,null,f.default.createElement(we.default,null)),f.default.createElement(J.default,{primary:"Reduce color number"})),f.default.createElement(I.default,{button:!0,divider:!0,onClick:t._less_colors_auto},f.default.createElement(G.default,null,f.default.createElement(we.default,null)),f.default.createElement(J.default,{primary:"To auto colors number"})),f.default.createElement(I.default,{button:!0,divider:!0,onClick:function(e){return t._smooth_adjust(1)}},f.default.createElement(G.default,null,f.default.createElement(ke.default,null)),f.default.createElement(J.default,{primary:"Smooth a bit"})))},this._compute_menu_drawer=function(){var e=t.st4te,a=e.classes,n=e._canvas,o=e._view_name_index,i=e._previous_view_name_index,r=e._view_names,l=e._layers,s=e._layer_index,_=e._is_image_import_mode,u=e._hide_canvas_content,c=e._show_original_image_in_background,d=e._show_transparent_image_in_background,m=e._can_undo,p=e._can_redo,h=e._current_color,g=e._second_color,v=e._slider_value,b=e._tool,y=e._width,w=e._height,x=e._import_size,k=e._import_colorize,E=e._hue,C=e._filters,S=e._select_mode,T=e._pencil_mirror_mode,I=e._is_something_selected,N=e._is_edit_drawer_open,R=e._menu_data,z=e._less_than_1280w,O=e._slider_value_width,D=e._slider_value_height;R.pos_x=-1===R.pos_x?"out":R.pos_x,R.pos_y=-1===R.pos_y?"out":R.pos_y,z?t.drawer_mobile=f.default.createElement(f.default.Fragment,null,f.default.createElement(L.default,{className:a.contentDrawer,disableBackdropTransition:!1,disableSwipeToOpen:!1,disableDiscovery:!1,disablePortal:!0,keepMounted:!0,hysteresis:.314,minFlingVelocity:314,swipeAreaWidth:128,open:!!N,onOpen:t._handle_edit_drawer_open,onClose:t._handle_edit_drawer_close,classes:{paper:a.swipeableDrawerPaper,modal:a.drawerModal},transitionDuration:{appear:5,enter:50,exit:75},ModalProps:{disablePortal:!0,BackdropProps:{classes:{root:a.drawerModalBackdropRoot}}},variant:"temporary",anchor:"bottom",style:{pointerEvents:"all"}},f.default.createElement("div",{className:a.mobileintrovideowrapper},f.default.createElement("video",{className:a.mobileintrovideo,id:"labintro-video",width:"56",height:"56",onClick:t._resume_video,style:{aspectRatio:"1",transform:"translateZ(10px)"}},f.default.createElement("source",{src:"/src/videos/labintro.mp4",type:"video/mp4"}))),f.default.createElement(le.default,{onClick:t._handle_edit_drawer_close}),f.default.createElement("div",{style:{display:"grid",contain:"layout paint style"}},f.default.createElement("div",{style:{boxShadow:"rgb(0 0 0 / 20%) 0px 2px 4px -1px, rgb(0 0 0 / 14%) 0px 4px 5px 0px, rgb(0 0 0 / 12%) 0px 1px 10px 0px",zIndex:1}},f.default.createElement("div",{className:a.drawerHeader},f.default.createElement(P.default,{className:a.effectSliderText,id:"strength-slider",gutterBottom:!0},"Effect strength :"),f.default.createElement(A.default,{key:"slider-"+(255*v|0),className:a.effectSlider,defaultValue:parseFloat(v),step:1/255,min:0,max:1,onChangeCommitted:t._set_value_from_slider_with_update,"aria-labelledby":"strength-slider"}))),f.default.createElement("div",{className:a.drawerContainer,ref:t._set_toolbox_container_ref},f.default.createElement(me.default,{should_update:N,slider_value_width:O,slider_value_height:D,onActionClose:t._handle_edit_drawer_close,canvas:n,is_mobile:Bt,view_class:a.listOfTools,view_names:r,is_image_import_mode:_,can_undo:m,can_redo:p,view_name_index:o,previous_view_name_index:i,layers:l,layer_index:s,hide_canvas_content:u,show_original_image_in_background:c,show_transparent_image_in_background:d,hue:E,current_color:h,second_color:g,slider_value:v,tool:b,width:parseInt(y),height:parseInt(w),filters:C,select_mode:S,pencil_mirror_mode:T,is_something_selected:I,import_size:x,import_colorize:k,set_filters_callback:t._set_filters_callback,set_props_callback:t._set_props_callback,set_tool:t._set_tool,set_select_mode:t._set_select_mode,set_pencil_mirror_mode:t._set_pencil_mirror_mode,set_width_from_slider:t._set_width_from_slider,set_height_from_slider:t._set_height_from_slider,set_import_size:t._set_import_size,set_import_colorize:t._set_import_colorize,switch_with_second_color:t._switch_with_second_color,show_hide_canvas_content:t._show_hide_canvas_content,show_hide_background_image:t._show_hide_background_image,show_hide_transparent_image:t._show_hide_transparent_image,on_current_color_change:t._handle_current_color_change,on_view_name_change:t._handle_view_name_change,on_upload_image:function(e){window.dispatchEvent(new Event("art-upload-drawer")),t._upload_image(e)},on_upload_image_library:t._upload_image_library,on_import_image:function(e){window.dispatchEvent(new Event("art-import-drawer")),t._handle_file_import(e)},on_import_image_library:t._import_image_library,on_request_draw_text:t._open_text,on_download_image:t._download_image,on_download_svg:t._download_svg,on_scroll_to:t._scroll_to_drawer})))),f.default.createElement("div",{className:a.fatabs,style:N&&z?{transform:"translateY(24px)",backgroundColor:"#fff"}:{}},f.default.createElement(U.default,{className:a.tabs,style:{pointerEvents:"all"},variant:"fullWidth",scrollButtons:"off",indicatorColor:"primary",textColor:"primary",selectionFollowsFocus:!0,value:o,onChange:t._handle_edit_drawer_open},f.default.createElement(q.default,{className:a.tab,label:"colors",icon:f.default.createElement(ut.default,null)}),f.default.createElement(q.default,{className:a.tab,label:"image",icon:f.default.createElement(dt.default,null)}),f.default.createElement(q.default,{className:a.tab,label:"layers",icon:f.default.createElement(pt.default,null)}),f.default.createElement(q.default,{className:a.tab,label:"tools",icon:f.default.createElement(ht.default,null)}),f.default.createElement(q.default,{className:a.tab,label:"select",icon:f.default.createElement(vt.default,null)}),f.default.createElement(q.default,{className:a.tab,label:"effects",icon:f.default.createElement(yt.default,null)}),f.default.createElement(q.default,{className:a.tab,label:"filters",icon:f.default.createElement(xt.default,null)})))):t.drawer_desktop=f.default.createElement(M.default,{className:a.contentDrawerFixed,variant:"permanent",anchor:"right",classes:{paper:a.drawerPaper}},f.default.createElement("div",{style:{display:"contents",pointerEvents:"all"}},f.default.createElement("div",{style:{boxShadow:"rgb(0 0 0 / 20%) 0px 2px 4px -1px, rgb(0 0 0 / 14%) 0px 4px 5px 0px, rgb(0 0 0 / 12%) 0px 1px 10px 0px",zIndex:1}},f.default.createElement("div",{className:a.drawerHeader},f.default.createElement("div",{className:a.desktopintrovideowrapper},f.default.createElement("video",{className:a.desktopintrovideo,id:"labintro-video",width:"56",height:"56",onClick:t._resume_video,style:{aspectRatio:"1",transform:"translateZ(10px)"}},f.default.createElement("source",{src:"/src/videos/labintro.mp4",type:"video/mp4"}))),f.default.createElement("span",{className:a.coordinate},f.default.createElement("span",{id:"fps_el"},"FPS: 0"),f.default.createElement("span",{id:"xy_el"}," | X: out, Y: out ")),f.default.createElement(P.default,{className:a.effectSliderText,id:"strength-slider",gutterBottom:!0},"Effect strength :"),f.default.createElement(A.default,{key:"slider-"+(255*v|0),defaultValue:parseFloat(v),className:a.effectSlider,step:1/255,min:0,max:1,onChangeCommitted:t._set_value_from_slider_with_update,"aria-labelledby":"strength-slider"})),f.default.createElement(U.default,{id:"tabs-desktop",className:a.tabs,variant:"fullWidth",indicatorColor:"primary",textColor:"primary",selectionFollowsFocus:!1,value:o,onChange:function(e,a){t._handle_view_name_change(a)}},f.default.createElement(q.default,{className:a.tab,label:"colors",icon:f.default.createElement(ut.default,null)}),f.default.createElement(q.default,{className:a.tab,label:"image",icon:f.default.createElement(dt.default,null)}),f.default.createElement(q.default,{className:a.tab,label:"layers",icon:f.default.createElement(pt.default,null)}),f.default.createElement(q.default,{className:a.tab,label:"tools",icon:f.default.createElement(ht.default,null)}),f.default.createElement(q.default,{className:a.tab,label:"select",icon:f.default.createElement(vt.default,null)}),f.default.createElement(q.default,{className:a.tab,label:"effects",icon:f.default.createElement(yt.default,null)}),f.default.createElement(q.default,{className:a.tab,label:"filters",icon:f.default.createElement(xt.default,null)}))),f.default.createElement("div",{className:a.drawerContainer,ref:t._set_toolbox_container_ref},f.default.createElement(me.default,{should_update:!Bt,slider_value_width:O,slider_value_height:D,canvas:n,view_class:a.listOfTools,is_mobile:Bt,view_names:r,is_image_import_mode:_,can_undo:m,can_redo:p,view_name_index:o,previous_view_name_index:i,layers:l,layer_index:s,hide_canvas_content:u,show_original_image_in_background:c,show_transparent_image_in_background:d,hue:E,current_color:h,second_color:g,slider_value:v,tool:b,width:parseInt(y),height:parseInt(w),filters:C,select_mode:S,pencil_mirror_mode:T,is_something_selected:I,import_size:x,import_colorize:k,set_filters_callback:t._set_filters_callback,set_props_callback:t._set_props_callback,set_tool:t._set_tool,set_select_mode:t._set_select_mode,set_pencil_mirror_mode:t._set_pencil_mirror_mode,set_width_from_slider:t._set_width_from_slider,set_height_from_slider:t._set_height_from_slider,set_import_size:t._set_import_size,set_import_colorize:t._set_import_colorize,switch_with_second_color:t._switch_with_second_color,show_hide_canvas_content:t._show_hide_canvas_content,show_hide_background_image:t._show_hide_background_image,show_hide_transparent_image:t._show_hide_transparent_image,on_current_color_change:t._handle_current_color_change,on_view_name_change:t._handle_view_name_change,on_upload_image:function(e){window.dispatchEvent(new Event("art-upload-drawer")),t._upload_image(e)},on_upload_image_library:t._upload_image_library,on_import_image:t._handle_file_import,on_import_image_library:t._import_image_library,on_request_draw_text:t._open_text,on_download_image:t._download_image,on_download_svg:t._download_svg,on_scroll_to:t._scroll_to_drawer}))))}},t.default=(0,E.default)(Ht)(Kt)},665:function(e,t,a){"use strict";function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,a){return function n(o,i){var r,l;try{l=(r=t[o](i)).value}catch(s){return void a(s)}if(!r.done)return Promise.resolve(l).then((function(e){n("next",e)}),(function(e){n("throw",e)}));e(l)}("next")}))}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l=function(){function e(e,t){var a,n;for(a=0;a<t.length;a++)(n=t[a]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=function(){function e(t){r(this,e),this.baseUrl=t}var t,a,n;return l(e,[{key:"generateRandomSeed",value:function(){try{return crypto.getRandomValues(new Uint32Array(1))[0]}catch(e){return Math.round(4294967295*Math.random())}}},{key:"generateRandomId",value:function(){return Math.round(16777215*Math.random()).toString(16).padStart(6,"0")}},{key:"getHeadersJson",value:function(){return{"Content-Type":"application/json"}}},{key:"getHeadersStream",value:function(){return{accept:"text/event-stream"}}},{key:"getUploadUrl",value:function(e){return this.baseUrl+"/upload?upload_id="+e}},{key:"getCreateImagePathUrl",value:function(e){return this.baseUrl+"/file="+e}},{key:"handleLoadComplete",value:(n=i(regeneratorRuntime.mark((function e(t,a){var n,o,r,l,s,_;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=void 0===a?"blob":a,n=t.split("/"),o=n[n.length-1],r=o.split(".")[1],l="image/"+r,e.prev=5,e.next=8,new Promise((function(e){var n=this,o=new Image;o.setAttribute("crossorigin","anonymous"),o.onload=i(regeneratorRuntime.mark((function t(){var r,l,s,_,u=(_=i(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(a=document.createElement("canvas")).width=l,a.height=r,a.getContext("2d").drawImage(o,0,0);try{a.toBlob(e,"image/webp",.75)}catch(n){a.toBlob(e,"image/jpeg",.75)}case 6:case"end":return t.stop()}}),t,this)}))),function(){return _.apply(this,arguments)}),c=(s=i(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(a=document.createElement("canvas")).width=l,a.height=r,(n=a.getContext("2d")).drawImage(o,0,0),e(n.getImageData(0,0,l,r,{colorSpace:"srgb"}));case 6:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)});return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=o.naturalHeight||o.height,l=o.naturalWidth||o.width,e.prev=2,e.t0=a.toLowerCase(),e.next="blob"===e.t0?6:"imagedata"===e.t0?8:10;break;case 6:return u(),e.abrupt("break",10);case 8:return c(),e.abrupt("break",10);case 10:e.next=14;break;case 12:e.prev=12,e.t1=e.catch(2);case 14:case"end":return e.stop()}}),t,n,[[2,12]])}))),o.setAttribute("src",t)}));case 8:s=e.sent,e.t0=a,e.next="blob"===e.t0?12:"imagedata"===e.t0?14:15;break;case 12:return _=new File([s],o,{type:l}),e.abrupt("return",Promise.resolve(_));case 14:return e.abrupt("return",Promise.resolve(s));case 15:e.next=21;break;case 17:return e.prev=17,e.t1=e.catch(5),console.error("Error creating file from URL:",e.t1),e.abrupt("return",Promise.reject());case 21:case"end":return e.stop()}}),e,this,[[5,17]])}))),function(e,t){return n.apply(this,arguments)})},{key:"uploadFile",value:(a=i(regeneratorRuntime.mark((function e(t,a){var n,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("files",t),e.next=4,fetch(this.getUploadUrl(a),{method:"POST",body:n});case 4:return o=e.sent,e.next=7,o.json();case 7:return i=e.sent,e.abrupt("return",Promise.resolve(i[0]||i));case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"fetchEventSource",value:(t=i(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{headers:this.getHeadersStream()});case 2:return a=e.sent,e.abrupt("return",Promise.resolve(a.body.getReader()));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}(),_=function(e){function t(){return r(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"https://gokaygokay-sd3-long-captioner-v2.hf.space"))}var a,s,_;return o(t,e),l(t,[{key:"getCreateCaptionsUrl",value:function(){return this.baseUrl+"/call/create_captions_rich"}},{key:"getReadCaptions",value:function(e){return console.log(e),e}},{key:"readResponse",value:(_=i(regeneratorRuntime.mark((function e(t){var a,n,o,i,r,l,s,_,u,c,d,m,p,f,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=new TextDecoder("utf-8"),n="",o=!1,i=null;case 4:if(o){e.next=35;break}return e.next=7,t.read();case 7:for(r=e.sent,l=r.value,s=r.done,o=o||s,n+=a.decode(l||new Uint8Array,{stream:!0}),_=n.split("\n"),u=!0,c=!1,d=void 0,e.prev=16,m=_[Symbol.iterator]();!(u=(p=m.next()).done);u=!0)if((f=(f=p.value).trim()).startsWith("event: complete")&&(o=!0),f.startsWith("data:")&&o)try{h=JSON.parse(f.slice(5)),i=h}catch(g){console.error("Failed to parse data as JSON",g)}e.next=24;break;case 20:e.prev=20,e.t0=e.catch(16),c=!0,d=e.t0;case 24:e.prev=24,e.prev=25,!u&&m.return&&m.return();case 27:if(e.prev=27,!c){e.next=30;break}throw d;case 30:return e.finish(27);case 31:return e.finish(24);case 32:n=_[_.length-1],e.next=4;break;case 35:return e.abrupt("return",Promise.resolve(i));case 36:case"end":return e.stop()}}),e,this,[[16,20,24,32],[25,,27,31]])}))),function(e){return _.apply(this,arguments)})},{key:"createCaptions",value:(s=i(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.getCreateCaptionsUrl(),{method:"POST",headers:this.getHeadersJson(),body:JSON.stringify({data:[{path:t}]})});case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",Promise.resolve(n.event_id));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"run",value:(a=i(regeneratorRuntime.mark((function e(t){var a,n,o,i,r,l,s,_,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=void 0,"string"!=typeof t){e.next=7;break}return e.next=4,this.handleLoadComplete(t);case 4:a=e.sent,e.next=12;break;case 7:if(!(t instanceof Blob)){e.next=11;break}a=t,e.next=12;break;case 11:return e.abrupt("return",Promise.reject());case 12:return n=this.generateRandomId(),e.next=15,this.uploadFile(a,n);case 15:return o=e.sent,i=this.getCreateCaptionsUrl(),e.next=19,this.createCaptions(o);case 19:return r=e.sent,e.next=22,this.fetchEventSource(i+"/"+r);case 22:return l=e.sent,e.prev=23,e.next=26,this.readResponse(l);case 26:return s=e.sent,_=this.getReadCaptions(s),e.abrupt("return",Promise.resolve(_));case 31:return e.prev=31,e.t0=e.catch(23),e.next=35,l();case 35:return u=e.sent,e.abrupt("return",Promise.resolve(u[0]));case 37:case"end":return e.stop()}}),e,this,[[23,31]])}))),function(e){return a.apply(this,arguments)})}]),t}(s),u=function(e){function t(){return r(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"https://pixart-alpha-pixart-sigma.hf.space"))}var a,s;return o(t,e),l(t,[{key:"getPredictHeader",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:512,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:512,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"(No style)",r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"bad shape, disformed, photography, photo, realistic, photo-realistic.",l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"DPM-Solver",s=this.generateRandomSeed();return i="string"==typeof i?i:["(No style)","Pixel Art","Digital Art","Anime","Manga"],{headers:this.getHeadersJson(),body:JSON.stringify({data:["A pixel art (retro style video game palette artwork) of : "+e,r,i,!0,o,s,a,n,l,4.5,3.5,17,25,!0],event_data:null,fn_index:3,trigger_id:7,session_hash:t}),method:"POST"}}},{key:"getQueueJoinUrl",value:function(){return this.baseUrl+"/queue/join"}},{key:"getResultUrl",value:function(e){return this.baseUrl+"/queue/data?session_hash="+e}},{key:"readResponse",value:(s=i(regeneratorRuntime.mark((function e(t){var a,n,o,i,r,l,s,_,u,c,d,m,p,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=new TextDecoder("utf-8"),n="",o=!1,i=null;case 4:if(o){e.next=35;break}return e.next=7,t.read();case 7:for(r=e.sent,l=r.value,s=r.done,o=o||s,n+=a.decode(l||new Uint8Array,{stream:!0}),_=n.split("\n"),u=!0,c=!1,d=void 0,e.prev=16,m=_[Symbol.iterator]();!(u=(p=m.next()).done);u=!0)(f=(f=p.value).trim()).includes("complete")&&(o=!0,i=f);e.next=24;break;case 20:e.prev=20,e.t0=e.catch(16),c=!0,d=e.t0;case 24:e.prev=24,e.prev=25,!u&&m.return&&m.return();case 27:if(e.prev=27,!c){e.next=30;break}throw d;case 30:return e.finish(27);case 31:return e.finish(24);case 32:n=_[_.length-1],e.next=4;break;case 35:return e.abrupt("return",Promise.resolve(i));case 36:case"end":return e.stop()}}),e,this,[[16,20,24,32],[25,,27,31]])}))),function(e){return s.apply(this,arguments)})},{key:"extractLastImageUrl",value:function(e,t){var a,n,o,i,r,l,s;try{for(console.log(e),a=JSON.parse(e.slice(5).trim()),n=[],o=a.output.data||[],i=0;i<o.length;i++)for(r=o[i],l=0;l<r.length;l++)(s=r[l]).image&&s.image.url&&n.push(s.image.url);return n}catch(_){return console.error("Failed to parse JSON or extract image URLs:",_),[]}}},{key:"run",value:(a=i(regeneratorRuntime.mark((function e(t){var a,n,o,i,r,l,s,_,u,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:512,d=this,m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:512,p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.generateRandomId(),n=this.getPredictHeader(t,a,c,m,p),o=this.getQueueJoinUrl(),e.next=5,fetch(o,n);case 5:return i=e.sent,e.next=8,i.json();case 8:if(!e.sent.event_id){e.next=27;break}return e.next=13,this.fetchEventSource(this.getResultUrl(a));case 13:return r=e.sent,e.next=16,this.readResponse(r);case 16:if(l=e.sent,1!==(s=this.extractLastImageUrl(l)).length){e.next=26;break}return _=s[0],e.next=22,this.handleLoadComplete(_,"imagedata");case 22:return u=e.sent,e.abrupt("return",Promise.resolve(u));case 26:return e.abrupt("return",Promise.allSettled([s.map((function(){return d.handleLoadComplete(o,"imagedata")}))]));case 27:return e.abrupt("return",Promise.reject());case 28:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})}]),t}(s),c=function(e){function t(){return r(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"https://abidlabs-face-to-all.hf.space"))}var a,s;return o(t,e),l(t,[{key:"getPredictUrl",value:function(){return this.baseUrl+"/run/predict"}},{key:"getPredictHeader",value:function(e,t){return{headers:this.getHeadersJson(),body:JSON.stringify({data:[e],event_data:null,fn_index:0,trigger_id:11,session_hash:t}),method:"POST"}}},{key:"getQueueJoinUrl",value:function(){return this.baseUrl+"/queue/join"}},{key:"extractSecondImageUrl",value:function(e){var t=e.match(/"url":"(https:\/\/[^"]+)"/g);return t&&t.length>1?t[1].match(/"url":"(https:\/\/[^"]+)"/)[1]:null}},{key:"getQueueJoinHeader",value:function(e,t,a,n,o,i){var r="A palette based, low color number pixel art (pixelart:1.25) in lucasarts style of : "+o+"... Truthful facial traits, highly detailed face for a pixel art, retro video game art, masterpiece retro game art, beautiful pixel art only.";return{headers:this.getHeadersJson(),body:JSON.stringify({data:[{path:e,url:t,orig_name:"image."+n.replaceAll("image/",""),size:a,mime_type:n,meta:{_type:"gradio.FileData"}},r,"Photography, realistic, strange skin, untruthful, wrong, ugly, bad light, wrong colors, mismatched, missing fingers, poor quality, bad result, unsatisfiying, photo, picture, photo-realistic, 4K, 8K, 35mm, real.",.9,null,.9,.25,10,.8,null,null],event_data:null,fn_index:6,trigger_id:18,session_hash:i}),method:"POST"}}},{key:"getQueueDataUrl",value:function(e){return this.baseUrl+"/queue/data?session_hash="+e}},{key:"readResponse",value:(s=i(regeneratorRuntime.mark((function e(t){var a,n,o,i,r,l,s,_,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=new TextDecoder("utf-8"),n="",o="",i=!1;case 3:if(i){e.next=16;break}return e.next=6,t.read();case 6:for(r=e.sent,l=r.value,s=r.done,i=i||s,n+=a.decode(l||new Uint8Array,{stream:!0}),_=n.split("\n"),u=0;u<_.length;u++)(c=_[u].trim()).includes("complete")&&(i=!0,o=c);n=_[_.length-1],e.next=3;break;case 16:return e.abrupt("return",Promise.resolve(o));case 17:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"run",value:(a=i(regeneratorRuntime.mark((function e(t,a){var n,o,i,r,l,s,_,u,c,d,m,p,f,h,g,v,b,y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"https://civitai.com/models/247890/lucasarts-adventure-game-style-xl";return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=void 0,"string"!=typeof t){e.next=7;break}return e.next=4,this.handleLoadComplete(t);case 4:n=e.sent,e.next=12;break;case 7:if(!(t instanceof Blob)){e.next=11;break}n=t,e.next=12;break;case 11:case 49:return e.abrupt("return",Promise.reject());case 12:return o=this.generateRandomId(),i=this.generateRandomId(),e.next=16,this.uploadFile(n,o);case 16:return r=e.sent,l=this.getCreateImagePathUrl(r),s=this.getPredictHeader(y,i),_=this.getPredictUrl(),e.next=22,fetch(_,s);case 22:return u=e.sent,e.next=25,u.json();case 25:if(!e.sent){e.next=49;break}return c=this.getQueueJoinHeader(r,l,n.size,n.type,a,i),d=this.getQueueJoinUrl(),e.next=31,fetch(d,c);case 31:return m=e.sent,e.next=34,m.json();case 34:if(void 0===(p=e.sent).event_id){e.next=49;break}return p.event_id,f=this.getQueueDataUrl(i),e.next=40,this.fetchEventSource(f);case 40:return h=e.sent,e.next=43,this.readResponse(h);case 43:return g=e.sent,v=this.extractSecondImageUrl(g),e.next=47,this.handleLoadComplete(v);case 47:return b=e.sent,e.abrupt("return",Promise.resolve(b));case 50:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})}]),t}(s);e.exports={HuggingFaceAPI:s,FaceToAllAPI:c,LongCaptionerAPI:_,ImageCreatorAPI:u}},668:function(e,t,a){"use strict";var n=new(a(267).B64chromium);e.exports={bytesToBase64:n.bytesToBase64.bind(n),base64ToBytes:n.base64ToBytes.bind(n)}}}]);